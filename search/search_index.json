{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u6b22\u8fce\u6765\u5230\u6211\u7684\u4e2a\u4eba\u6280\u672f\u7b14\u8bb0\u7ad9","text":"<p>\u8fd9\u91cc\u662f\u6211\u5728 \u673a\u5668\u5b66\u4e60 \u548c \u5d4c\u5165\u5f0f\u8f6f\u4ef6\u5f00\u53d1\uff08\u5c24\u5176\u662f\u7535\u8d5b\u76f8\u5173\uff09 \u9886\u57df\u7684\u5b66\u4e60\u4e0e\u5b9e\u8df5\u8bb0\u5f55\u3002</p> <p>\u672c\u7f51\u7ad9\u81f4\u529b\u4e8e\u6574\u7406\u590d\u6742\u7684\u77e5\u8bc6\u70b9\uff0c\u4ee5\u6e05\u6670\u3001\u6613\u61c2\u7684\u7ed3\u6784\u8fdb\u884c\u5448\u73b0\uff0c\u65b9\u4fbf\u81ea\u5df1\u67e5\u9605\uff0c\u4e5f\u5e0c\u671b\u80fd\u4e3a\u6709\u76f8\u4f3c\u5b66\u4e60\u8def\u5f84\u7684\u670b\u53cb\u63d0\u4f9b\u53c2\u8003\u3002</p>"},{"location":"#_2","title":"\ud83d\uddfa\ufe0f \u4e3b\u8981\u7b14\u8bb0\u5206\u7c7b","text":"<p>\u6211\u7684\u7b14\u8bb0\u5185\u5bb9\u4e3b\u8981\u56f4\u7ed5\u4ee5\u4e0b\u4e24\u4e2a\u6838\u5fc3\u9886\u57df\u5c55\u5f00\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5de6\u4fa7\u7684\u5bfc\u822a\u680f\u6216\u70b9\u51fb\u4e0b\u9762\u7684\u94fe\u63a5\u8fdb\u5165\u76f8\u5e94\u90e8\u5206\u3002</p>"},{"location":"#machine-learning","title":"\ud83e\udd16 \u673a\u5668\u5b66\u4e60 (Machine Learning)","text":"<p>\u8be5\u90e8\u5206\u4e3b\u8981\u8bb0\u5f55\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6 PyTorch \u7684\u5b66\u4e60\u8fc7\u7a0b\u548c\u5b9e\u8df5\u5fc3\u5f97\u3002</p> <ul> <li>\u6838\u5fc3\u5185\u5bb9: Tensor \u64cd\u4f5c\u3001\u6570\u636e\u52a0\u8f7d\u4e0e\u9884\u5904\u7406\u3001\u795e\u7ecf\u7f51\u7edc\u6a21\u5757 (<code>nn</code>) \u7684\u5b9e\u73b0\u3001\u4ee5\u53ca\u4f7f\u7528 TensorBoard \u8fdb\u884c\u6a21\u578b\u53ef\u89c6\u5316\u3002</li> <li>\u5feb\u901f\u5165\u53e3: \u8fdb\u5165 PyTorch \u5b66\u4e60\u7b14\u8bb0 (\u4ee5 <code>nn</code> \u6a21\u5757\u4e3a\u4f8b)</li> </ul>"},{"location":"#embedded-software","title":"\ud83d\udcbb \u7535\u8d5b\u8f6f\u4ef6 (Embedded Software)","text":"<p>\u8be5\u90e8\u5206\u805a\u7126\u4e8e\u7535\u5b50\u8bbe\u8ba1\u7ade\u8d5b\u53ca\u5d4c\u5165\u5f0f\u5f00\u53d1\u6240\u9700\u7684\u8f6f\u4ef6\u77e5\u8bc6\u548c\u6280\u80fd\uff0c\u5185\u5bb9\u6db5\u76d6\u5e95\u5c42\u67b6\u6784\u5230\u5b9e\u65f6\u7cfb\u7edf\u3002</p> <ul> <li>\u6838\u5fc3\u5185\u5bb9: ARM Cortex-M \u67b6\u6784\u3001FreeRTOS \u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf\u3001STM32 HAL \u5e93\u5e94\u7528\u3001\u901a\u4fe1\u534f\u8bae (I2C, SPI, CAN) \u4ee5\u53ca\u57fa\u7840\u7684\u7535\u63a7\u7b97\u6cd5\u3002</li> <li>\u5feb\u901f\u5165\u53e3: \u8fdb\u5165 FreeRTOS \u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf (\u4ee5 FreeRTOS \u7b80\u4ecb\u4e3a\u4f8b)</li> </ul>"},{"location":"#_3","title":"\u2728 \u7f51\u7ad9\u7279\u8272","text":"<ul> <li>\u7ed3\u6784\u6e05\u6670: \u7b14\u8bb0\u5185\u5bb9\u7ecf\u8fc7\u7ec6\u81f4\u5206\u5c42\uff0c\u65b9\u4fbf\u5feb\u901f\u5b9a\u4f4d\u77e5\u8bc6\u70b9\u3002</li> <li>\u652f\u6301 Notebook: \u96c6\u6210\u4e86 Jupyter Notebook \u6e32\u67d3\uff0c\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u5305\u542b\u4ee3\u7801\u8fd0\u884c\u7ed3\u679c\u7684\u6587\u6863\u3002</li> <li>\u6301\u7eed\u66f4\u65b0: \u5185\u5bb9\u5c06\u968f\u7740\u6211\u7684\u5b66\u4e60\u548c\u5b9e\u8df5\u7684\u6df1\u5165\u800c\u4e0d\u65ad\u5b8c\u5584\u3002</li> </ul> <p>\u611f\u8c22\u4f60\u7684\u8bbf\u95ee\uff0c\u795d\u4f60\u5b66\u4e60\u6109\u5feb\uff01</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/Test/","title":"Test Notebook","text":"In\u00a0[1]: Copied! <pre>import torch\n</pre> import torch In\u00a0[2]: Copied! <pre>torch.cuda.is_available()\n</pre> torch.cuda.is_available() Out[2]: <pre>True</pre> In\u00a0[\u00a0]: Copied! <pre>\n</pre>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/","title":"data \u6570\u636e\u5904\u7406","text":"<p>\u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406\u662f\u8bad\u7ec3\u4e00\u4e2a\u826f\u597d\u6a21\u578b\u7684\u524d\u63d0\u3002</p> <p>\u8be6\u89c1 Pytorch\u5b98\u65b9\u6570\u636e\u96c6\u4e0e\u6570\u636e\u52a0\u8f7d\u5668</p> In\u00a0[4]: Copied! <pre>import torch\nfrom torch.utils.data import Dataset\nfrom torchvision import datasets\nfrom torchvision.transforms import ToTensor\nimport matplotlib.pyplot as plt\n\n\ntraining_data = datasets.FashionMNIST(\n    root=\"data\",\n    train=True,\n    download=True,\n    transform=ToTensor()\n)\n\ntest_data = datasets.FashionMNIST(\n    root=\"data\",\n    train=False,\n    download=True,\n    transform=ToTensor()\n)\n</pre> import torch from torch.utils.data import Dataset from torchvision import datasets from torchvision.transforms import ToTensor import matplotlib.pyplot as plt   training_data = datasets.FashionMNIST(     root=\"data\",     train=True,     download=True,     transform=ToTensor() )  test_data = datasets.FashionMNIST(     root=\"data\",     train=False,     download=True,     transform=ToTensor() ) <pre>100.0%\n100.0%\n100.0%\n100.0%\n</pre> In\u00a0[5]: Copied! <pre>print(training_data)\n</pre> print(training_data) <pre>Dataset FashionMNIST\n    Number of datapoints: 60000\n    Root location: data\n    Split: Train\n    StandardTransform\nTransform: ToTensor()\n</pre> In\u00a0[19]: Copied! <pre>import random\nsample_idx = random.randint(0, len(training_data))\nprint(sample_idx)\n</pre> import random sample_idx = random.randint(0, len(training_data)) print(sample_idx) <pre>26389\n</pre> In\u00a0[\u00a0]: Copied! <pre># this is the same\nsample_idx = torch.randint(len(training_data), size=(1,)).item()\n</pre> # this is the same sample_idx = torch.randint(len(training_data), size=(1,)).item() In\u00a0[20]: Copied! <pre>labels_map = {\n    0: \"T-Shirt\",\n    1: \"Trouser\",\n    2: \"Pullover\",\n    3: \"Dress\",\n    4: \"Coat\",\n    5: \"Sandal\",\n    6: \"Shirt\",\n    7: \"Sneaker\",\n    8: \"Bag\",\n    9: \"Ankle Boot\",\n}\nfigure = plt.figure(figsize=(8, 8))\ncols, rows = 3, 3\nfor i in range(1, cols * rows + 1):\n    # sample_idx = torch.randint(len(training_data), size=(1,)).item()\n    sample_idx = random.randint(0, len(training_data))\n    img, label = training_data[sample_idx]\n    figure.add_subplot(rows, cols, i)\n    plt.title(labels_map[label])\n    plt.axis(\"off\")\n    plt.imshow(img.squeeze(), cmap=\"gray\")\nplt.show()\n</pre> labels_map = {     0: \"T-Shirt\",     1: \"Trouser\",     2: \"Pullover\",     3: \"Dress\",     4: \"Coat\",     5: \"Sandal\",     6: \"Shirt\",     7: \"Sneaker\",     8: \"Bag\",     9: \"Ankle Boot\", } figure = plt.figure(figsize=(8, 8)) cols, rows = 3, 3 for i in range(1, cols * rows + 1):     # sample_idx = torch.randint(len(training_data), size=(1,)).item()     sample_idx = random.randint(0, len(training_data))     img, label = training_data[sample_idx]     figure.add_subplot(rows, cols, i)     plt.title(labels_map[label])     plt.axis(\"off\")     plt.imshow(img.squeeze(), cmap=\"gray\") plt.show() In\u00a0[21]: Copied! <pre>from torch.utils.data import DataLoader\n\ntrain_dataloader = DataLoader(training_data, batch_size=64, shuffle=True)\ntest_dataloader = DataLoader(test_data, batch_size=64, shuffle=True)\n</pre> from torch.utils.data import DataLoader  train_dataloader = DataLoader(training_data, batch_size=64, shuffle=True) test_dataloader = DataLoader(test_data, batch_size=64, shuffle=True) In\u00a0[24]: Copied! <pre># Display image and label.\ntrain_features, train_labels = next(iter(train_dataloader))\nprint(f\"Feature batch shape: {train_features.size()}\")\nprint(f\"Labels batch shape: {train_labels.size()}\")\nimg = train_features[0].squeeze()\nlabel = train_labels[0]\nplt.imshow(img, cmap=\"gray\")\nplt.show()\nprint(f\"Label: {label}\")\n</pre> # Display image and label. train_features, train_labels = next(iter(train_dataloader)) print(f\"Feature batch shape: {train_features.size()}\") print(f\"Labels batch shape: {train_labels.size()}\") img = train_features[0].squeeze() label = train_labels[0] plt.imshow(img, cmap=\"gray\") plt.show() print(f\"Label: {label}\") <pre>Feature batch shape: torch.Size([64, 1, 28, 28])\nLabels batch shape: torch.Size([64])\n</pre> <pre>Label: 6\n</pre>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/","title":"\ud83d\udca1 \u610f\u4e49\u4e00\uff1a\u5de5\u7a0b\u5316\u4e0e\u6548\u7387\uff08\u4e3a\u8bad\u7ec3\u63d0\u901f\uff09\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/#1-batching","title":"1. \u6279\u91cf\u5904\u7406 (Batching)\u00b6","text":"<ul> <li>\u95ee\u9898\uff1a \u73b0\u4ee3\u6df1\u5ea6\u5b66\u4e60\u8bad\u7ec3\u91c7\u7528\u968f\u673a\u68af\u5ea6\u4e0b\u964d (SGD) \u53ca\u5176\u53d8\u79cd\uff08\u5982 Adam\uff09\u3002\u8fd9\u4e9b\u4f18\u5316\u7b97\u6cd5\u4e0d\u662f\u5bf9\u5355\u4e2a\u6837\u672c\u6c42\u68af\u5ea6\uff0c\u800c\u662f\u5bf9\u4e00\u6279\uff08Batch\uff09\u6837\u672c\u7684\u5e73\u5747\u68af\u5ea6\u8fdb\u884c\u66f4\u65b0\u3002</li> <li><code>DataLoader</code> \u7684\u610f\u4e49\uff1a <code>DataLoader</code> \u8d1f\u8d23\u5c06\u6570\u767e\u4e07\u4e2a\u6837\u672c\u7ec4\u7ec7\u6210\u4e00\u4e2a\u4e2a\u9884\u5b9a\u5927\u5c0f\u7684 Batch\u3002\u8fd9\u4f7f\u5f97 GPU \u6216 CPU \u80fd\u591f\u8fdb\u884c\u9ad8\u6548\u7684\u5e76\u884c\u8ba1\u7b97\uff0c\u5145\u5206\u5229\u7528\u786c\u4ef6\u8d44\u6e90\uff0c\u5927\u5927\u52a0\u5feb\u8bad\u7ec3\u901f\u5ea6\u3002</li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/#2","title":"2. \u5185\u5b58\u7ba1\u7406\u4e0e\u52a0\u8f7d\u4f18\u5316\u00b6","text":"<ul> <li>\u95ee\u9898\uff1a \u8bb8\u591a\u6570\u636e\u96c6\uff08\u5c24\u5176\u662f\u56fe\u50cf\u548c\u89c6\u9891\uff09\u975e\u5e38\u5e9e\u5927\uff0c\u65e0\u6cd5\u4e00\u6b21\u6027\u5168\u90e8\u52a0\u8f7d\u5230\u5185\u5b58\u6216 GPU \u663e\u5b58\u4e2d\u3002</li> <li><code>Dataset</code> &amp; <code>DataLoader</code> \u7684\u610f\u4e49\uff1a<ul> <li><code>Dataset</code> \u8d1f\u8d23\u5b9a\u4e49\u5982\u4f55\u83b7\u53d6\u5355\u4e2a\u6837\u672c\u53ca\u5176\u6807\u7b7e\u3002</li> <li><code>DataLoader</code> \u5219\u91c7\u7528 \u6309\u9700\u52a0\u8f7d\uff08On-demand Loading\uff09 \u673a\u5236\u3002\u5b83\u53ea\u5728\u9700\u8981\u65f6\uff08\u5373\u5f53\u524d Batch \u8fed\u4ee3\u65f6\uff09\u624d\u4ece\u78c1\u76d8\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u8bbe\u7f6e <code>num_workers</code> \u53c2\u6570\u542f\u7528 \u591a\u8fdb\u7a0b (Multiprocessing) \u6765\u63d0\u524d\u5e76\u884c\u52a0\u8f7d\u4e0b\u4e00\u4e2a Batch \u7684\u6570\u636e\uff0c\u8fd9\u88ab\u79f0\u4e3a \u201c\u9884\u53d6 (Prefetching)\u201d\uff0c\u6709\u6548\u7f13\u89e3\u4e86\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u7684 \u201c\u6570\u636e\u74f6\u9888\u201d\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/#3-shuffling","title":"3. \u6570\u636e\u6df7\u6d17 (Shuffling)\u00b6","text":"<ul> <li>\u610f\u4e49\uff1a \u5728\u6bcf\u4e2a Epoch \u5f00\u59cb\u524d\uff0c<code>DataLoader</code> \u901a\u5e38\u4f1a\u5bf9\u6570\u636e\u987a\u5e8f\u8fdb\u884c\u968f\u673a\u6253\u4e71 (Shuffling)\u3002\u8fd9\u5bf9\u4e8e SGD \u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u80fd\u786e\u4fdd\u6a21\u578b\u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u6570\u636e\u4e2d\u7684\u7279\u5b9a\u987a\u5e8f\u6a21\u5f0f\u6240\u8bef\u5bfc\uff0c\u63d0\u9ad8\u6a21\u578b\u7684\u6cdb\u5316\u80fd\u529b\u3002</li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/","title":"\ud83d\udca1 \u610f\u4e49\u4e8c\uff1a\u6570\u636e\u62bd\u8c61\u4e0e\u7075\u6d3b\u6027\uff08\u5b9a\u5236\u5316\u6570\u636e\u6d41\uff09\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/#4-decoupling","title":"4. \u62bd\u8c61\u5316\u548c\u89e3\u8026 (Decoupling)\u00b6","text":"<ul> <li><code>Dataset</code> \u7684\u610f\u4e49\uff1a \u5b83\u5c06 \u201c\u6570\u636e\u8bfb\u53d6\u548c\u9884\u5904\u7406\u201d \u7684\u903b\u8f91\u4e0e \u201c\u6a21\u578b\u8bad\u7ec3\u201d \u7684\u903b\u8f91\u5f7b\u5e95\u5206\u79bb\u3002<ul> <li>\u65e0\u8bba\u662f\u4ece\u6587\u4ef6\u7cfb\u7edf\u8bfb\u53d6\u56fe\u50cf\u3001\u4ece CSV \u6587\u4ef6\u8bfb\u53d6\u6587\u672c\uff0c\u8fd8\u662f\u4ece\u6570\u636e\u5e93\u83b7\u53d6\u6570\u636e\uff0c\u8fd9\u4e9b\u5e95\u5c42\u7ec6\u8282\u90fd\u88ab\u5c01\u88c5\u5728 <code>Dataset</code> \u7684 <code>__getitem__</code> \u65b9\u6cd5\u4e2d\u3002</li> <li>\u8fd9\u6837\uff0c\u5f53\u60a8\u66f4\u6362\u6570\u636e\u96c6\u65f6\uff0c\u53ea\u9700\u8981\u4fee\u6539 <code>Dataset</code> \u7684\u5b9e\u73b0\uff0c\u800c\u6838\u5fc3\u7684\u8bad\u7ec3\u5faa\u73af\u4ee3\u7801\uff08\u6a21\u578b\u5b9a\u4e49\u3001\u4f18\u5316\u5668\u3001\u8bad\u7ec3\u6b65\u9aa4\uff09\u51e0\u4e4e\u4e0d\u9700\u8981\u53d8\u52a8\uff0c\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u590d\u7528\u6027\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/#5-transforms","title":"5. \u6570\u636e\u8f6c\u6362\u4e0e\u589e\u5f3a (Transforms)\u00b6","text":"<ul> <li>\u610f\u4e49\uff1a <code>Dataset</code> \u662f\u8fdb\u884c\u6570\u636e\u9884\u5904\u7406\u548c\u6570\u636e\u589e\u5f3a\uff08\u5982\u56fe\u50cf\u7684\u968f\u673a\u88c1\u526a\u3001\u7ffb\u8f6c\u3001\u6807\u51c6\u5316\u7b49\uff09\u7684\u7406\u60f3\u573a\u6240\u3002<ul> <li>\u8fd9\u4e9b\u64cd\u4f5c\u53ef\u4ee5\u76f4\u63a5\u5e94\u7528\u4e8e\u6bcf\u4e2a\u6837\u672c\uff0c\u786e\u4fdd\u6240\u6709\u8fdb\u5165\u6a21\u578b\u7684 Batch \u90fd\u7ecf\u8fc7\u4e86\u6b63\u786e\u7684\u8f6c\u6362\u3002</li> <li>\u6570\u636e\u589e\u5f3a\u662f\u63d0\u9ad8\u6a21\u578b\u6cdb\u5316\u80fd\u529b\u3001\u9632\u6b62\u8fc7\u62df\u5408\u7684\u5173\u952e\u624b\u6bb5\u4e4b\u4e00\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/#6-collate","title":"6. \u81ea\u52a8\u6574\u7406 (Collate)\u00b6","text":"<ul> <li><code>DataLoader</code> \u7684\u610f\u4e49\uff1a \u5373\u4f7f\u6240\u6709\u6837\u672c\u90fd\u662f\u4ece <code>Dataset</code> \u83b7\u53d6\u7684\uff0c\u5b83\u4eec\u4e5f\u53ef\u80fd\u9700\u8981\u8fdb\u4e00\u6b65\u6574\u7406\u624d\u80fd\u5806\u53e0\u6210\u4e00\u4e2a\u5f20\u91cf (Tensor Batch)\u3002<ul> <li><code>collate_fn</code> \u53c2\u6570\u5141\u8bb8\u60a8\u81ea\u5b9a\u4e49\u5982\u4f55\u5c06\u5355\u4e2a\u6837\u672c\uff08\u4f8b\u5982\u4e0d\u540c\u957f\u5ea6\u7684\u6587\u672c\u5e8f\u5217\u6216\u5d4c\u5957\u7ed3\u6784\uff09\u6574\u7406\u6210\u4e00\u4e2a\u7edf\u4e00\u7684 Batch \u5f20\u91cf\uff0c\u6ee1\u8db3 PyTorch \u6a21\u578b\u7684\u8f93\u5165\u8981\u6c42\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/#dataset-dataloader","title":"\u603b\u7ed3\uff1a<code>Dataset</code> &amp; <code>DataLoader</code> \u7684\u6838\u5fc3\u4ef7\u503c\u00b6","text":"\u7ec4\u4ef6 \u6838\u5fc3\u804c\u80fd \u5bf9\u8bad\u7ec3\u7684\u610f\u4e49 <code>Dataset</code> \u6570\u636e\u62bd\u8c61\u4e0e\u5355\u6837\u672c\u5904\u7406 \u5c01\u88c5\u6570\u636e\u6765\u6e90\u548c\u9884\u5904\u7406\u903b\u8f91\uff0c\u5b9e\u73b0\u4ee3\u7801\u89e3\u8026\u548c\u6570\u636e\u589e\u5f3a\u3002 <code>DataLoader</code> \u9ad8\u6548\u6570\u636e\u6d41\u4e0e\u6279\u91cf\u5904\u7406 \u5b9e\u73b0\u6279\u91cf\u52a0\u8f7d\u3001\u6570\u636e\u6df7\u6d17\u3001\u591a\u8fdb\u7a0b\u9884\u53d6\uff0c\u4fdd\u8bc1 GPU/CPU \u7684\u9ad8\u6548\u5229\u7528\u3002 <p>\u7b80\u5355\u6765\u8bf4\uff0c<code>Dataset</code> \u89e3\u51b3\u4e86\u201c\u5982\u4f55\u5904\u7406\u5355\u4e2a\u6570\u636e\u201d\u7684\u95ee\u9898\uff0c\u800c <code>DataLoader</code> \u89e3\u51b3\u4e86\u201c\u5982\u4f55\u9ad8\u6548\u3001\u7a33\u5b9a\u5730\u5c06\u6279\u6b21\u6570\u636e\u5582\u7ed9\u6a21\u578b\u201d\u7684\u95ee\u9898\u3002 \u5b83\u4eec\u662f\u8fde\u63a5\u539f\u59cb\u6570\u636e\u548c\u9ad8\u6027\u80fd\u8bad\u7ec3\u6d41\u7a0b\u7684\u6865\u6881\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/data/","title":"Data","text":"In\u00a0[\u00a0]: Copied! <pre>from torch.utils.data import Dataset\nfrom PIL import Image\nimport os\n</pre> from torch.utils.data import Dataset from PIL import Image import os In\u00a0[\u00a0]: Copied! <pre>class MyDataset(Dataset):\n    def __init__(self, root_dir,label_dir):\n        \"\"\"\u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u96c6\u53c2\u6570\u548c\u52a0\u8f7d\u6570\u636e\"\"\"\n        super().__init__()\n        # \u521d\u59cb\u5316\u4ee3\u7801\n        self.root_dir = root_dir\n        self.label_dir = label_dir\n        self.path = os.path.join(self.root_dir,self.label_dir)\n        self.img_path = os.listdir(self.path)\n\n    def __len__(self):\n        \"\"\"\u8fd4\u56de\u6570\u636e\u96c6\u7684\u5927\u5c0f\"\"\"\n        return len(self.img_path)\n\n    def __getitem__(self, idx):\n        \"\"\"\u6839\u636e\u7d22\u5f15\u8fd4\u56de\u4e00\u4e2a\u6837\u672c\"\"\"\n        img_name = self.img_path[idx]\n        img_item_path = os.path.join(self.root_dir,self.label_dir, img_name)\n        img = Image.open(img_item_path)\n        label = self.label_dir\n        return img, label\n</pre> class MyDataset(Dataset):     def __init__(self, root_dir,label_dir):         \"\"\"\u521d\u59cb\u5316\u65b9\u6cd5\uff0c\u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u96c6\u53c2\u6570\u548c\u52a0\u8f7d\u6570\u636e\"\"\"         super().__init__()         # \u521d\u59cb\u5316\u4ee3\u7801         self.root_dir = root_dir         self.label_dir = label_dir         self.path = os.path.join(self.root_dir,self.label_dir)         self.img_path = os.listdir(self.path)      def __len__(self):         \"\"\"\u8fd4\u56de\u6570\u636e\u96c6\u7684\u5927\u5c0f\"\"\"         return len(self.img_path)      def __getitem__(self, idx):         \"\"\"\u6839\u636e\u7d22\u5f15\u8fd4\u56de\u4e00\u4e2a\u6837\u672c\"\"\"         img_name = self.img_path[idx]         img_item_path = os.path.join(self.root_dir,self.label_dir, img_name)         img = Image.open(img_item_path)         label = self.label_dir         return img, label In\u00a0[\u00a0]: Copied! <pre># \u53d6\u6570\u636e\u96c6\nants_dataset = MyDataset('dataset/train',\"ants\")\nbees_dataset = MyDataset('dataset/train',\"bees\")\n</pre> # \u53d6\u6570\u636e\u96c6 ants_dataset = MyDataset('dataset/train',\"ants\") bees_dataset = MyDataset('dataset/train',\"bees\") In\u00a0[\u00a0]: Copied! <pre>train_dataset = ants_dataset + bees_dataset\n</pre> train_dataset = ants_dataset + bees_dataset"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/nn/","title":"nn \u795e\u7ecf\u7f51\u7edc","text":"In\u00a0[1]: Copied! <pre>import os\nimport torch\nfrom torch import nn\nfrom torch.utils.data import DataLoader\nfrom torchvision import datasets, transforms\n</pre> import os import torch from torch import nn from torch.utils.data import DataLoader from torchvision import datasets, transforms In\u00a0[2]: Copied! <pre>device = torch.accelerator.current_accelerator().type if torch.accelerator.is_available() else \"cpu\"\nprint(f\"Using {device} device\")\n</pre> device = torch.accelerator.current_accelerator().type if torch.accelerator.is_available() else \"cpu\" print(f\"Using {device} device\") <pre>Using cuda device\n</pre> In\u00a0[\u00a0]: Copied! <pre>\n</pre>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/","title":"Tensor","text":"<p>\u8be6\u89c1 Pytorch\u5b98\u65b9Tensor\u6559\u7a0b</p> <p>import torch import numpy as np</p> In\u00a0[8]: Copied! <pre>one = torch.ones((3,4))\nprint(one)\n</pre> one = torch.ones((3,4)) print(one) <pre>tensor([[1., 1., 1., 1.],\n        [1., 1., 1., 1.],\n        [1., 1., 1., 1.]])\n</pre> In\u00a0[15]: Copied! <pre>one = torch.ones(3,4) #no difference\nprint(one)\n</pre> one = torch.ones(3,4) #no difference print(one) <pre>tensor([[1., 1., 1., 1.],\n        [1., 1., 1., 1.],\n        [1., 1., 1., 1.]])\n</pre> In\u00a0[16]: Copied! <pre># CPU \u4e0a\u7684\u5f20\u91cf\u548c NumPy \u6570\u7ec4\u53ef\u4ee5\u5171\u4eab\u5b83\u4eec\u7684\u5e95\u5c42\u5185\u5b58\u4f4d\u7f6e\uff0c\u66f4\u6539\u5176\u4e2d\u4e00\u4e2a\u4f1a\u6539\u53d8\u53e6\u4e00\u4e2a\u3002\nt = torch.ones(5)\nprint(f\"t: {t}\")\nn = t.numpy()\nprint(f\"n: {n}\")\n</pre> # CPU \u4e0a\u7684\u5f20\u91cf\u548c NumPy \u6570\u7ec4\u53ef\u4ee5\u5171\u4eab\u5b83\u4eec\u7684\u5e95\u5c42\u5185\u5b58\u4f4d\u7f6e\uff0c\u66f4\u6539\u5176\u4e2d\u4e00\u4e2a\u4f1a\u6539\u53d8\u53e6\u4e00\u4e2a\u3002 t = torch.ones(5) print(f\"t: {t}\") n = t.numpy() print(f\"n: {n}\") <pre>t: tensor([1., 1., 1., 1., 1.])\nn: [1. 1. 1. 1. 1.]\n</pre> In\u00a0[17]: Copied! <pre>t.add_(1)\nprint(f\"t: {t}\")\nprint(f\"n: {n}\")\n</pre> t.add_(1) print(f\"t: {t}\") print(f\"n: {n}\") <pre>t: tensor([2., 2., 2., 2., 2.])\nn: [2. 2. 2. 2. 2.]\n</pre>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#tensor","title":"Tensor\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#tensor","title":"\ud83d\udcd0 \u5f20\u91cf (Tensor) \u8bb2\u89e3\u00b6","text":"<p>\u5f20\u91cf (Tensor) \u662f PyTorch\u3001TensorFlow \u7b49\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u4e2d\u7684\u6838\u5fc3\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5728\u6570\u5b66\u4e0a\u662f\u6807\u91cf\u3001\u5411\u91cf\u548c\u77e9\u9635\u6982\u5ff5\u7684\u6cdb\u5316\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5f20\u91cf\u5c31\u662f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684\u6570\u636e\u5bb9\u5668\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#1-rank","title":"1. \u5f20\u91cf\u7684\u6570\u5b66\u6982\u5ff5\uff1a\u7ef4\u5ea6 (Rank)\u00b6","text":"<p>\u5f20\u91cf\u53ef\u4ee5\u88ab\u770b\u4f5c\u662f\u4e00\u4e2a\u591a\u7ef4\u6570\u7ec4\uff0c\u5b83\u7684\u201c\u7ef4\u5ea6\u201d\u6216\u201c\u9636\u201d\uff08\u5728\u6570\u5b66\u548c\u7269\u7406\u4e2d\u79f0\u4e3a Rank\uff09\u51b3\u5b9a\u4e86\u5b83\u80fd\u8868\u793a\u7684\u6570\u636e\u590d\u6742\u7a0b\u5ea6\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#-rank-shape","title":"- \u7ef4\u6570 (Rank) \u548c\u5f62\u72b6 (Shape)\u00b6","text":"<ul> <li>\u7ef4\u6570 (Rank)\uff1a \u6307\u7684\u662f\u5f20\u91cf\u4e2d \u8f74 (Axes) \u7684\u6570\u91cf\uff0c\u4e5f\u5c31\u662f\u5f20\u91cf\u5f62\u72b6 (Shape) \u5143\u7ec4\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\u3002<ul> <li>\u4f8b\u5982\uff0c\u5f62\u72b6\u4e3a <code>(1, 3, 7)</code> \u7684\u5f20\u91cf\uff0c\u5176\u7ef4\u6570\u662f 3\u3002</li> </ul> </li> <li>\u5f62\u72b6 (Shape)\uff1a \u4e00\u4e2a\u5143\u7ec4\uff0c\u63cf\u8ff0\u4e86\u5f20\u91cf\u5728\u6bcf\u4e2a\u7ef4\u5ea6\u4e0a\u7684\u5927\u5c0f\u3002<ul> <li>\u5f62\u72b6 <code>(D0, D1, D2, ...)</code> \u4e2d\u7684 $D_i$ \u5c31\u662f\u7b2c $i$ \u7ef4\u7684\u5927\u5c0f\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#-","title":"- \u9ed8\u8ba4\u7ef4\u5ea6\u987a\u5e8f\u00b6","text":"<p>PyTorch \u5f20\u91cf\u9ed8\u8ba4\u7684\u7ef4\u5ea6\u987a\u5e8f\u91c7\u7528 \u4ece\u5de6\u5230\u53f3\u3001\u4ece\u5916\u5230\u5185 \u7684\u7d22\u5f15\u89c4\u5219\uff1a</p> \u7ef4\u5ea6\u540d\u79f0 \u7d22\u5f15\u503c (\u5728 <code>dim</code> \u53c2\u6570\u4e2d) \u9ed8\u8ba4\u542b\u4e49 (\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d) \u5f62\u72b6\u5143\u7ec4\u4e2d\u7684\u4f4d\u7f6e \u7b2c 0 \u7ef4 <code>dim=0</code> Batch Size\uff08\u6279\u91cf\u5927\u5c0f\uff09 \u6700\u5de6\u8fb9\u7b2c\u4e00\u4e2a \u7b2c 1 \u7ef4 <code>dim=1</code> Channels\uff08\u901a\u9053\u6570\uff0c\u5982\u56fe\u50cf $R, G, B$\uff09 \u7b2c\u4e8c\u4e2a \u7b2c 2 \u7ef4 <code>dim=2</code> Height\uff08\u9ad8\u5ea6\uff09 \u7b2c\u4e09\u4e2a \u7b2c 3 \u7ef4 `dim=3$ Width\uff08\u5bbd\u5ea6\uff09 \u7b2c\u56db\u4e2a ... $dim=k$ $k$ \u7ef4 $k+1$ \u4e2a"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#-dim","title":"- \u7ef4\u5ea6 (Dim) \u7684\u7406\u89e3\u548c\u5e94\u7528\u00b6","text":"<p>\u5f53\u60a8\u5728 PyTorch \u4e2d\u4f7f\u7528\u6d89\u53ca <code>dim</code> \u53c2\u6570\u7684\u51fd\u6570\u65f6\uff0c\u8fd9\u4e2a\u53c2\u6570\u544a\u8bc9\u51fd\u6570\u60a8\u5e0c\u671b\u6cbf\u7740\u54ea\u4e2a\u8f74\u8fdb\u884c\u64cd\u4f5c\u3002</p> PyTorch \u51fd\u6570 <code>dim</code> \u7684\u610f\u4e49 \u793a\u4f8b <code>torch.sum(tensor, dim=1)</code> \u6cbf\u7740 <code>dim=1</code> \u7684\u65b9\u5411 \u5bf9\u6570\u636e\u8fdb\u884c\u6c42\u548c\uff0c\u7136\u540e\u8fd9\u4e2a\u7ef4\u5ea6\u4f1a\u88ab\u538b\u7f29\u6216\u79fb\u9664\u3002 \u5982\u679c\u5f20\u91cf\u5f62\u72b6\u662f <code>(1, 3, 7)</code>\uff0c\u6cbf\u7740 <code>dim=1</code> \u6c42\u548c\u540e\uff0c\u65b0\u5f20\u91cf\u5f62\u72b6\u4f1a\u53d8\u4e3a <code>(1, 7)</code>\u3002 <code>torch.cat((t1, t2), dim=0)</code> \u6cbf\u7740 <code>dim=0</code> \u7684\u65b9\u5411 \u5c06\u5f20\u91cf\u8fdb\u884c\u62fc\u63a5\u3002 \u5982\u679c $t1$ \u662f <code>(1, 3, 7)</code>\uff0c$t2$ \u4e5f\u662f <code>(1, 3, 7)</code>\uff0c\u6cbf\u7740 <code>dim=0</code> \u62fc\u63a5\u540e\uff0c\u65b0\u5f20\u91cf\u5f62\u72b6\u53d8\u4e3a <code>(2, 3, 7)</code>\u3002 <code>torch.unsqueeze(tensor, dim=1)</code> \u5728 <code>dim=1</code> \u7684\u4f4d\u7f6e \u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u3001\u5927\u5c0f\u4e3a 1 \u7684\u7ef4\u5ea6\u3002 \u5982\u679c\u5f20\u91cf\u5f62\u72b6\u662f <code>(1, 7)</code>\uff0c\u5728 <code>dim=1</code> \u63d2\u5165\u540e\uff0c\u65b0\u5f20\u91cf\u5f62\u72b6\u53d8\u4e3a <code>(1, 1, 7)</code>\u3002 <p>\u7b80\u8bb0\u6cd5\u5219\uff1a <code>dim=k</code> \u59cb\u7ec8\u6307\u5411\u5f62\u72b6\u5143\u7ec4\u4e2d\u7b2c $k+1$ \u4e2a\u6570\u5b57\u6240\u4ee3\u8868\u7684\u8f74\u3002</p> \u9636/\u7ef4\u5ea6 (Rank) \u5f62\u72b6 (Shape) \u63cf\u8ff0 \u793a\u4f8b\u6570\u636e 0 \u9636 <code>()</code> \u6807\u91cf (Scalar)\uff1a\u4e00\u4e2a\u7eaf\u91cf\u3002 <code>5</code>, $\\pi$, \u635f\u5931\u51fd\u6570\u503c <code>loss</code> 1 \u9636 <code>(n,)</code> \u5411\u91cf (Vector)\uff1a\u4e00\u7ef4\u6570\u7ec4\u3002 \u8bcd\u5d4c\u5165 (Word Embedding)\uff0c$\\begin{bmatrix} 1 \\\\ 2 \\\\ 3 \\end{bmatrix}$ 2 \u9636 <code>(n, m)</code> \u77e9\u9635 (Matrix)\uff1a\u4e8c\u7ef4\u6570\u7ec4\u3002 \u56fe\u50cf\u7684\u7070\u5ea6\u503c\uff0c\u7ebf\u6027\u5c42\u6743\u91cd $\\mathbf{W}$ 3 \u9636 <code>(n, m, k)</code> \u4e09\u9636\u5f20\u91cf\uff1a\u4e09\u7ef4\u6570\u7ec4\u3002 \u5f69\u8272\u56fe\u50cf (\u9ad8 x \u5bbd x \u989c\u8272\u901a\u9053)\uff0c\u89c6\u9891\u5e27 4 \u9636 <code>(n, m, k, l)</code> \u56db\u9636\u5f20\u91cf\uff1a\u56db\u7ef4\u6570\u7ec4\u3002 \u6279\u91cf (Batch) \u7684\u5f69\u8272\u56fe\u50cf (\u6279\u91cf\u5927\u5c0f x \u989c\u8272\u901a\u9053 x \u9ad8 x \u5bbd)"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#2","title":"2. \u5f20\u91cf\u7684\u4e3b\u8981\u5c5e\u6027\u00b6","text":"<p>\u5728 PyTorch \u7b49\u6846\u67b6\u4e2d\uff0c\u4e00\u4e2a\u5f20\u91cf\u5bf9\u8c61\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u5c5e\u6027\uff1a</p> \u5c5e\u6027 \u63cf\u8ff0 \u793a\u4f8b Data (\u6570\u636e) \u5b58\u50a8\u5728\u5f20\u91cf\u4e2d\u7684\u5b9e\u9645\u6570\u503c\u3002 <code>[[1, 2], [3, 4]]</code> Shape (\u5f62\u72b6) \u5b9a\u4e49\u4e86\u5f20\u91cf\u5728\u6bcf\u4e2a\u7ef4\u5ea6\u4e0a\u7684\u5927\u5c0f\u3002 2x2 \u77e9\u9635\u7684\u5f62\u72b6\u662f <code>(2, 2)</code> Dtype (\u6570\u636e\u7c7b\u578b) \u5b58\u50a8\u7684\u5143\u7d20\u7684\u6570\u636e\u7c7b\u578b\u3002 <code>torch.float32</code>, <code>torch.int64</code> \u7b49\u3002 Device (\u8bbe\u5907) \u5f20\u91cf\u5b58\u50a8\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u662f CPU \u6216 GPU\u3002 <code>cpu</code> \u6216 <code>cuda:0</code> <code>requires_grad</code> \u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u9700\u8981\u8ba1\u7b97\u8be5\u5f20\u91cf\u7684\u68af\u5ea6\uff08\u7528\u4e8e\u53cd\u5411\u4f20\u64ad\uff09\u3002 <code>True</code> \u6216 <code>False</code>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#3","title":"3. \u5f20\u91cf\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684\u5e94\u7528\u00b6","text":"<p>\u5f20\u91cf\u662f\u8868\u793a\u6240\u6709\u6570\u636e\u7684\u901a\u7528\u8bed\u8a00\uff1a</p> \u6570\u636e\u7c7b\u578b \u5bf9\u5e94\u7684\u5f20\u91cf\u5f62\u72b6 (\u5e38\u89c1) \u63cf\u8ff0 \u56fe\u50cf <code>(C, H, W)</code> \u6216 <code>(H, W, C)</code> \u901a\u9053\u6570 (C)\u3001\u9ad8 (H)\u3001\u5bbd (W)\u3002 \u6587\u672c (\u6279\u91cf) <code>(Batch_size, Seq_len, Embedding_dim)</code> \u6279\u91cf\u5927\u5c0f\u3001\u5e8f\u5217\u957f\u5ea6\u3001\u8bcd\u5d4c\u5165\u7ef4\u5ea6\u3002 \u8bad\u7ec3\u6279\u91cf (Batch) <code>(Batch_size, C, H, W)</code> \u6df1\u5ea6\u5b66\u4e60\u4e2d\u5904\u7406\u6570\u636e\u7684\u4e3b\u6d41\u5f62\u5f0f\uff0c\u4e00\u6b21\u5904\u7406\u591a\u5f20\u56fe\u7247\u3002 \u6a21\u578b\u53c2\u6570 \u5404\u79cd\u5f62\u72b6 \u6a21\u578b\u7684\u6743\u91cd $\\mathbf{W}$ \u548c\u504f\u7f6e $\\mathbf{b}$ \u90fd\u662f\u5f20\u91cf\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#4-pytorch","title":"4. PyTorch \u5f20\u91cf\u7684\u7279\u70b9\uff1a\u81ea\u52a8\u5fae\u5206\u00b6","text":"<p>PyTorch \u7684\u5f20\u91cf (<code>torch.Tensor</code>) \u6700\u5f3a\u5927\u7684\u7279\u6027\u662f\u5b83\u96c6\u6210\u4e86\u81ea\u52a8\u5fae\u5206 (Autograd) \u7cfb\u7edf\u3002</p> <ul> <li>\u5f53\u4f60\u521b\u5efa\u4e00\u4e2a\u5f20\u91cf\u5e76\u8bbe\u7f6e <code>requires_grad=True</code> \u65f6\uff0cPyTorch \u4f1a\u5f00\u59cb\u8ddf\u8e2a\u6240\u6709\u4f5c\u7528\u5728\u8fd9\u4e2a\u5f20\u91cf\u4e0a\u7684\u64cd\u4f5c\u3002</li> <li>\u8fd9\u4f7f\u5f97\u6a21\u578b\u5728\u8bad\u7ec3\u65f6\u53ef\u4ee5\u8f7b\u677e\u5730\u901a\u8fc7<code>.backward()</code> \u65b9\u6cd5\u81ea\u52a8\u8ba1\u7b97\u6240\u6709\u53c2\u6570\u7684\u68af\u5ea6\uff0c\u8fd9\u662f\u5b9e\u73b0\u53cd\u5411\u4f20\u64ad\u548c\u4f18\u5316\u6a21\u578b\u7684\u57fa\u7840\u3002</li> </ul> <pre>import torch\n\n# \u521b\u5efa\u4e00\u4e2a\u9700\u8981\u8ba1\u7b97\u68af\u5ea6\u7684 2 \u9636\u5f20\u91cf (\u77e9\u9635)\nx = torch.tensor([[1., 2.], [3., 4.]], requires_grad=True)\nprint(f\"\u5f20\u91cf\u7684\u5f62\u72b6: {x.shape}\")\nprint(f\"\u662f\u5426\u9700\u8981\u8ba1\u7b97\u68af\u5ea6: {x.requires_grad}\")\n\n# \u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\ny = x + 2\nz = y * y * 3\nout = z.mean()\n\n# out.backward()  # \u8c03\u7528 backward \u4f1a\u81ea\u52a8\u8ba1\u7b97\u6240\u6709 require_grad=True \u7684\u5f20\u91cf\u7684\u68af\u5ea6\n</pre> <p>\u603b\u7ed3: \u5f20\u91cf\u662f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u6570\u636e\u7684\u8f7d\u4f53\uff0c\u5b83\u4e0d\u4ec5\u80fd\u5b58\u50a8\u591a\u7ef4\u6570\u636e\uff0c\u8fd8\u96c6\u6210\u4e86\u81ea\u52a8\u5fae\u5206\u80fd\u529b\uff0c\u662f\u6784\u5efa\u548c\u8bad\u7ec3\u795e\u7ecf\u7f51\u7edc\u7684\u57fa\u77f3\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#pytorch","title":"PyTorch \u5f20\u91cf\u5e38\u89c1\u529f\u80fd\u6620\u5c04\u8868\u00b6","text":"\u529f\u80fd\u7c7b\u522b \u6570\u5b66/NumPy \u6982\u5ff5 PyTorch \u5bf9\u5e94\u51fd\u6570/\u65b9\u6cd5 \u5e38\u89c1\u7528\u9014\u548c\u8bf4\u660e I. \u521b\u5efa\u4e0e\u521d\u59cb\u5316 \u96f6\u77e9\u9635 <code>torch.zeros(shape)</code> \u521b\u5efa\u4e00\u4e2a\u6240\u6709\u5143\u7d20\u90fd\u4e3a 0 \u7684\u5f20\u91cf\u3002 '1'\u77e9\u9635 <code>torch.ones(n, m)</code> \u521b\u5efa\u4e00\u4e2a $n \\times m$ \u7684\u5168'1'\u77e9\u9635\u3002 \u5355\u4f4d\u77e9\u9635 <code>torch.eye(n, m)</code> \u521b\u5efa\u4e00\u4e2a $n \\times m$ \u7684\u5355\u4f4d\u77e9\u9635\u3002 \u968f\u673a\u6570 <code>torch.rand(shape)</code> \u521b\u5efa\u670d\u4ece $[0, 1)$ \u5747\u5300\u5206\u5e03\u7684\u5f20\u91cf\u3002 \u6b63\u6001\u5206\u5e03\u968f\u673a\u6570 <code>torch.randn(shape)</code> \u521b\u5efa\u670d\u4ece\u6807\u51c6\u6b63\u6001\u5206\u5e03 ($\\mu=0, \\sigma=1$) \u7684\u5f20\u91cf\u3002 \u57fa\u4e8e\u73b0\u6709\u5f20\u91cf\u521b\u5efa <code>torch.ones_like(tensor)</code> \u6839\u636e\u53e6\u4e00\u4e2a\u5f20\u91cf\u7684\u5f62\u72b6\u521b\u5efa\u65b0\u5f20\u91cf\u3002 \u4ece Python/NumPy \u521b\u5efa <code>torch.tensor(data)</code>, <code>torch.from_numpy(ndarray)</code> \u5c06 Python \u5217\u8868\u3001\u6570\u7ec4\u6216 NumPy \u8f6c\u6362\u6210\u5f20\u91cf\u3002 II. \u5f62\u72b6\u548c\u7ef4\u5ea6\u64cd\u4f5c \u5f62\u72b6\u67e5\u8be2 <code>tensor.shape</code> \u6216 <code>tensor.size()</code> \u8fd4\u56de\u5f20\u91cf\u7684\u5f62\u72b6\uff08\u5143\u7ec4\uff09\u3002 \u7ef4\u5ea6\u91cd\u5851 (NumPy: <code>reshape</code>) <code>tensor.view(new_shape)</code> \u6216 <code>tensor.reshape(new_shape)</code> \u6539\u53d8\u5f20\u91cf\u7684\u5f62\u72b6\u3002<code>view</code> \u8981\u6c42\u5185\u5b58\u8fde\u7eed\uff0c<code>reshape</code> \u66f4\u7075\u6d3b\u3002 \u589e\u52a0/\u51cf\u5c11\u7ef4\u5ea6 <code>torch.squeeze()</code>, <code>torch.unsqueeze(dim)</code> \u79fb\u9664\uff08\u7ef4\u5ea6\u4e3a 1\uff09\u6216\u589e\u52a0\u7ef4\u5ea6\uff08\u5982\u5c06\u5411\u91cf\u8f6c\u4e3a Batch \uff09\u3002 \u7ef4\u5ea6\u8f6c\u7f6e (NumPy: <code>T</code>) <code>tensor.permute(dims)</code>, <code>tensor.transpose(dim0, dim1)</code> \u4ea4\u6362\u5f20\u91cf\u7684\u7ef4\u5ea6\u4f4d\u7f6e\uff08\u5e38\u7528\u4e8e $HWC \\to CWH$\uff09\u3002 \u5f20\u91cf\u62fc\u63a5 (NumPy: <code>concatenate</code>) <code>torch.cat((t1, t2), dim=0)</code> \u6cbf\u6307\u5b9a\u7ef4\u5ea6\u5c06\u591a\u4e2a\u5f20\u91cf\u62fc\u63a5\u8d77\u6765\uff08\u7ef4\u5ea6\u589e\u52a0\uff09\u3002 \u5f20\u91cf\u5806\u53e0 (NumPy: <code>stack</code>) <code>torch.stack((t1, t2), dim=0)</code> \u6cbf\u4e00\u4e2a\u65b0\u7684\u7ef4\u5ea6\u5c06\u591a\u4e2a\u5f20\u91cf\u5806\u53e0\u8d77\u6765\uff08\u7ef4\u5ea6\u6570\u91cf\u589e\u52a0\uff09\u3002 \u57fa\u4e8e\u7d22\u5f15\u7684\u5143\u7d20\u5206\u6563\u64cd\u4f5c <code>target.scatter_(dim, index, src,value (optional))</code> \u5c06\u4e00\u4e2a src \u5f20\u91cf\uff08\u6e90\u6570\u636e\uff09\u4e2d\u7684\u503c\uff0c\u6839\u636e\u4e00\u4e2a index \u5f20\u91cf\uff08\u7d22\u5f15\uff09\u7684\u6307\u793a\uff0c\u5206\u6563\u5199\u5165\uff08\u8986\u76d6\u6216\u7d2f\u52a0\uff09\u5230\u8c03\u7528\u8be5\u65b9\u6cd5\u7684 \u76ee\u6807\u5f20\u91cf\uff08self\uff0c\u5373 target\uff09\u7684\u6307\u5b9a\u4f4d\u7f6e;\u5982\u679c\u4e0d\u4f7f\u7528 src \u5f20\u91cf\uff0c\u53ef\u4ee5\u4f20\u5165\u4e00\u4e2a\u6807\u91cf\u503c\uff0c\u6240\u6709\u5199\u5165\u64cd\u4f5c\u90fd\u4f7f\u7528\u8fd9\u4e2a\u56fa\u5b9a\u503c\u3002 III. \u6570\u5b66\u8fd0\u7b97 \u5143\u7d20\u7ea7\u52a0\u51cf\u4e58\u9664 <code>t1 + t2</code>, <code>t1 * t2</code>, <code>torch.add(t1, t2, out=t3)</code> \u5bf9\u5e94\u5143\u7d20\u8fdb\u884c\u8fd0\u7b97\u3002 \u77e9\u9635\u4e58\u6cd5 (NumPy: <code>@</code> \u6216 <code>dot</code>) <code>torch.matmul(t1, t2)</code> \u6216 <code>t1 @ t2</code> \u9002\u7528\u4e8e\u77e9\u9635\u3001\u5411\u91cf\u4e58\u6cd5\uff0c\u4e5f\u652f\u6301 Batch \u77e9\u9635\u4e58\u6cd5\u3002 \u5411\u91cf\u5185\u79ef (NumPy: <code>dot</code>) <code>torch.dot(vec1, vec2)</code> \u4ec5\u7528\u4e8e\u4e00\u7ef4\u5f20\u91cf\uff08\u5411\u91cf\uff09\u3002 \u6c42\u548c (NumPy: <code>sum</code>) <code>torch.sum(tensor, dim=None)</code> \u5bf9\u6240\u6709\u5143\u7d20\u6216\u6307\u5b9a\u7ef4\u5ea6\u6c42\u548c\u3002 \u5e73\u5747\u503c <code>torch.mean(tensor, dim=None)</code> \u5bf9\u6240\u6709\u5143\u7d20\u6216\u6307\u5b9a\u7ef4\u5ea6\u6c42\u5e73\u5747\u503c\u3002 IV. \u68af\u5ea6\u63a7\u5236\u4e0e\u8bbe\u5907\u7ba1\u7406 \u8bbe\u5907\u67e5\u8be2 <code>tensor.device</code> \u8fd4\u56de\u5f20\u91cf\u6240\u5728\u7684\u8bbe\u5907\uff08\u5982 <code>cpu</code> \u6216 <code>cuda:0</code>\uff09\u3002 \u8bbe\u5907\u79fb\u52a8 <code>tensor.to('cuda')</code>, <code>tensor.cpu()</code> \u5c06\u5f20\u91cf\u5728 CPU \u548c GPU \u4e4b\u95f4\u79fb\u52a8\u3002 \u68af\u5ea6\u8ffd\u8e2a <code>tensor.requires_grad</code> \u5e03\u5c14\u503c\uff0c\u6307\u793a\u662f\u5426\u9700\u8981\u8ba1\u7b97\u68af\u5ea6\uff08\u9ed8\u8ba4\u4e3a <code>False</code>\uff09\u3002 \u505c\u6b62\u68af\u5ea6\u8ffd\u8e2a <code>with torch.no_grad():</code> \u6216 <code>tensor.detach()</code> \u5728\u4e0d\u9700\u8981\u8ba1\u7b97\u68af\u5ea6\u65f6\uff08\u5982\u8bc4\u4f30\u9636\u6bb5\uff09\u4f7f\u7528\uff0c\u8282\u7701\u8ba1\u7b97\u548c\u5185\u5b58\u3002 V. \u7d22\u5f15\u548c\u5207\u7247 \u6807\u91cf\u503c <code>tensor.item()</code> \u4ece\u53ea\u5305\u542b\u4e00\u4e2a\u5143\u7d20\u7684\u5f20\u91cf\u4e2d\u83b7\u53d6 Python \u6807\u91cf\u503c\u3002 \u6807\u51c6\u7d22\u5f15/\u5207\u7247 <code>tensor[0]</code>, <code>tensor[:, 2:5]</code> \u4e0e NumPy \u7d22\u5f15\u89c4\u5219\u76f8\u540c\u3002 \u63a9\u7801\u7d22\u5f15 <code>tensor[tensor &gt; 5]</code> \u4f7f\u7528\u5e03\u5c14\u5f20\u91cf\u4f5c\u4e3a\u7d22\u5f15\uff08\u83b7\u53d6\u6ee1\u8db3\u6761\u4ef6\u7684\u5143\u7d20\uff09\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensor/#pytorch-numpy","title":"PyTorch \u4e0e NumPy \u7684\u5173\u952e\u533a\u522b\u00b6","text":"<ol> <li>\u8bbe\u5907\u652f\u6301\uff1a PyTorch Tensors \u9ed8\u8ba4\u5728 CPU \u4e0a\u521b\u5efa\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528 <code>.cuda()</code> \u6216 <code>.to('cuda')</code> \u8f7b\u677e\u79fb\u52a8\u5230 GPU \u4e0a\u8fdb\u884c\u9ad8\u6027\u80fd\u8ba1\u7b97\u3002NumPy $ndarray$ \u53ea\u80fd\u5728 CPU \u4e0a\u8fd0\u884c\u3002</li> <li>\u68af\u5ea6\u8ffd\u8e2a\uff1a PyTorch Tensors \u53ef\u4ee5\u4f7f\u7528 <code>requires_grad=True</code> \u542f\u7528 \u81ea\u52a8\u6c42\u5bfc (Autograd)\uff0c\u8fd9\u662f\u6784\u5efa\u795e\u7ecf\u7f51\u7edc\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u800c NumPy \u4e0d\u5177\u5907\u6b64\u529f\u80fd\u3002</li> <li>\u539f\u5730\u64cd\u4f5c (In-place Operations)\uff1a PyTorch \u63d0\u4f9b\u4e86\u8bb8\u591a\u4ee5 <code>_</code> \u7ed3\u5c3e\u7684\u65b9\u6cd5\uff08\u4f8b\u5982 <code>add_()</code>\uff09\uff0c\u8fd9\u4e9b\u662f\u539f\u5730\u64cd\u4f5c\uff0c\u4f1a\u76f4\u63a5\u4fee\u6539\u5f20\u91cf\u672c\u8eab\u7684\u503c\u3002\u5728\u6d89\u53ca Autograd \u65f6\u4f7f\u7528\u539f\u5730\u64cd\u4f5c\u9700\u8981\u5c0f\u5fc3\uff0c\u53ef\u80fd\u4f1a\u7834\u574f\u8ba1\u7b97\u56fe\u3002</li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/","title":"tensorboard \u53ef\u89c6\u5316","text":"<p>\ud83d\udca1 TensorBoard \u7b80\u4ecb</p> <p>TensorBoard \u662f\u4e00\u4e2a\u4e13\u4e3a\u673a\u5668\u5b66\u4e60\u5b9e\u9a8c\u8bbe\u8ba1\uff0c\u7528\u4e8e\u53ef\u89c6\u5316\u548c\u5206\u6790\u6570\u636e\u4e0e\u6a21\u578b\u7684\u5f00\u6e90\u5de5\u5177\u5305\u3002\u5b83\u6700\u521d\u662f\u4e3a TensorFlow \u5f00\u53d1\u7684\uff0c\u4f46\u73b0\u5728\u4e5f\u652f\u6301 PyTorch\u3001Hugging Face Transformers \u7b49\u591a\u79cd AI \u6846\u67b6\u3002</p> In\u00a0[1]: Copied! <pre>from torch.utils.tensorboard import SummaryWriter\n</pre> from torch.utils.tensorboard import SummaryWriter In\u00a0[2]: Copied! <pre>help(SummaryWriter)\n</pre> help(SummaryWriter) <pre>Help on class SummaryWriter in module torch.utils.tensorboard.writer:\n\nclass SummaryWriter(builtins.object)\n |  SummaryWriter(log_dir=None, comment='', purge_step=None, max_queue=10, flush_secs=120, filename_suffix='')\n |  \n |  Writes entries directly to event files in the log_dir to be consumed by TensorBoard.\n |  \n |  The `SummaryWriter` class provides a high-level API to create an event file\n |  in a given directory and add summaries and events to it. The class updates the\n |  file contents asynchronously. This allows a training program to call methods\n |  to add data to the file directly from the training loop, without slowing down\n |  training.\n |  \n |  Methods defined here:\n |  \n |  __enter__(self)\n |  \n |  __exit__(self, exc_type, exc_val, exc_tb)\n |  \n |  __init__(self, log_dir=None, comment='', purge_step=None, max_queue=10, flush_secs=120, filename_suffix='')\n |      Create a `SummaryWriter` that will write out events and summaries to the event file.\n |      \n |      Args:\n |          log_dir (str): Save directory location. Default is\n |            runs/**CURRENT_DATETIME_HOSTNAME**, which changes after each run.\n |            Use hierarchical folder structure to compare\n |            between runs easily. e.g. pass in 'runs/exp1', 'runs/exp2', etc.\n |            for each new experiment to compare across them.\n |          comment (str): Comment log_dir suffix appended to the default\n |            ``log_dir``. If ``log_dir`` is assigned, this argument has no effect.\n |          purge_step (int):\n |            When logging crashes at step :math:`T+X` and restarts at step :math:`T`,\n |            any events whose global_step larger or equal to :math:`T` will be\n |            purged and hidden from TensorBoard.\n |            Note that crashed and resumed experiments should have the same ``log_dir``.\n |          max_queue (int): Size of the queue for pending events and\n |            summaries before one of the 'add' calls forces a flush to disk.\n |            Default is ten items.\n |          flush_secs (int): How often, in seconds, to flush the\n |            pending events and summaries to disk. Default is every two minutes.\n |          filename_suffix (str): Suffix added to all event filenames in\n |            the log_dir directory. More details on filename construction in\n |            tensorboard.summary.writer.event_file_writer.EventFileWriter.\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |      \n |          # create a summary writer with automatically generated folder name.\n |          writer = SummaryWriter()\n |          # folder location: runs/May04_22-14-54_s-MacBook-Pro.local/\n |      \n |          # create a summary writer using the specified folder name.\n |          writer = SummaryWriter(\"my_experiment\")\n |          # folder location: my_experiment\n |      \n |          # create a summary writer with comment appended.\n |          writer = SummaryWriter(comment=\"LR_0.1_BATCH_16\")\n |          # folder location: runs/May04_22-14-54_s-MacBook-Pro.localLR_0.1_BATCH_16/\n |  \n |  add_audio(self, tag, snd_tensor, global_step=None, sample_rate=44100, walltime=None)\n |      Add audio data to summary.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          snd_tensor (torch.Tensor): Sound data\n |          global_step (int): Global step value to record\n |          sample_rate (int): sample rate in Hz\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |      Shape:\n |          snd_tensor: :math:`(1, L)`. The values should lie between [-1, 1].\n |  \n |  add_custom_scalars(self, layout)\n |      Create special chart by collecting charts tags in 'scalars'.\n |      \n |      NOTE: This function can only be called once for each SummaryWriter() object.\n |      \n |      Because it only provides metadata to tensorboard, the function can be called before or after the training loop.\n |      \n |      Args:\n |          layout (dict): {categoryName: *charts*}, where *charts* is also a dictionary\n |            {chartName: *ListOfProperties*}. The first element in *ListOfProperties* is the chart's type\n |            (one of **Multiline** or **Margin**) and the second element should be a list containing the tags\n |            you have used in add_scalar function, which will be collected into the new chart.\n |      \n |      Examples::\n |      \n |          layout = {'Taiwan':{'twse':['Multiline',['twse/0050', 'twse/2330']]},\n |                       'USA':{ 'dow':['Margin',   ['dow/aaa', 'dow/bbb', 'dow/ccc']],\n |                            'nasdaq':['Margin',   ['nasdaq/aaa', 'nasdaq/bbb', 'nasdaq/ccc']]}}\n |      \n |          writer.add_custom_scalars(layout)\n |  \n |  add_custom_scalars_marginchart(self, tags, category='default', title='untitled')\n |      Shorthand for creating marginchart.\n |      \n |      Similar to ``add_custom_scalars()``, but the only necessary argument is *tags*,\n |      which should have exactly 3 elements.\n |      \n |      Args:\n |          tags (list): list of tags that have been used in ``add_scalar()``\n |      \n |      Examples::\n |      \n |          writer.add_custom_scalars_marginchart(['twse/0050', 'twse/2330', 'twse/2006'])\n |  \n |  add_custom_scalars_multilinechart(self, tags, category='default', title='untitled')\n |      Shorthand for creating multilinechart. Similar to ``add_custom_scalars()``, but the only necessary argument is *tags*.\n |      \n |      Args:\n |          tags (list): list of tags that have been used in ``add_scalar()``\n |      \n |      Examples::\n |      \n |          writer.add_custom_scalars_multilinechart(['twse/0050', 'twse/2330'])\n |  \n |  add_embedding(self, mat, metadata=None, label_img=None, global_step=None, tag='default', metadata_header=None)\n |      Add embedding projector data to summary.\n |      \n |      Args:\n |          mat (torch.Tensor or numpy.ndarray): A matrix which each row is the feature vector of the data point\n |          metadata (list): A list of labels, each element will be converted to string\n |          label_img (torch.Tensor): Images correspond to each data point\n |          global_step (int): Global step value to record\n |          tag (str): Name for the embedding\n |          metadata_header (list): A list of headers for multi-column metadata. If given, each metadata must be\n |              a list with values corresponding to headers.\n |      Shape:\n |          mat: :math:`(N, D)`, where N is number of data and D is feature dimension\n |      \n |          label_img: :math:`(N, C, H, W)`\n |      \n |      Examples::\n |      \n |          import keyword\n |          import torch\n |          meta = []\n |          while len(meta)&lt;100:\n |              meta = meta+keyword.kwlist # get some strings\n |          meta = meta[:100]\n |      \n |          for i, v in enumerate(meta):\n |              meta[i] = v+str(i)\n |      \n |          label_img = torch.rand(100, 3, 10, 32)\n |          for i in range(100):\n |              label_img[i]*=i/100.0\n |      \n |          writer.add_embedding(torch.randn(100, 5), metadata=meta, label_img=label_img)\n |          writer.add_embedding(torch.randn(100, 5), label_img=label_img)\n |          writer.add_embedding(torch.randn(100, 5), metadata=meta)\n |      \n |      .. note::\n |          Categorical (i.e. non-numeric) metadata cannot have more than 50 unique values if they are to be used for\n |          coloring in the embedding projector.\n |  \n |  add_figure(self, tag: str, figure: Union[ForwardRef('Figure'), list['Figure']], global_step: Optional[int] = None, close: bool = True, walltime: Optional[float] = None) -&gt; None\n |      Render matplotlib figure into an image and add it to summary.\n |      \n |      Note that this requires the ``matplotlib`` package.\n |      \n |      Args:\n |          tag: Data identifier\n |          figure: Figure or a list of figures\n |          global_step: Global step value to record\n |          close: Flag to automatically close the figure\n |          walltime: Optional override default walltime (time.time())\n |            seconds after epoch of event\n |  \n |  add_graph(self, model, input_to_model=None, verbose=False, use_strict_trace=True)\n |      Add graph data to summary.\n |      \n |      Args:\n |          model (torch.nn.Module): Model to draw.\n |          input_to_model (torch.Tensor or list of torch.Tensor): A variable or a tuple of\n |              variables to be fed.\n |          verbose (bool): Whether to print graph structure in console.\n |          use_strict_trace (bool): Whether to pass keyword argument `strict` to\n |              `torch.jit.trace`. Pass False when you want the tracer to\n |              record your mutable container types (list, dict)\n |  \n |  add_histogram(self, tag, values, global_step=None, bins='tensorflow', walltime=None, max_bins=None)\n |      Add histogram to summary.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          values (torch.Tensor, numpy.ndarray, or string/blobname): Values to build histogram\n |          global_step (int): Global step value to record\n |          bins (str): One of {'tensorflow','auto', 'fd', ...}. This determines how the bins are made. You can find\n |            other options in: https://numpy.org/doc/stable/reference/generated/numpy.histogram.html\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          import numpy as np\n |          writer = SummaryWriter()\n |          for i in range(10):\n |              x = np.random.random(1000)\n |              writer.add_histogram('distribution centers', x + i, i)\n |          writer.close()\n |      \n |      Expected result:\n |      \n |      .. image:: _static/img/tensorboard/add_histogram.png\n |         :scale: 50 %\n |  \n |  add_histogram_raw(self, tag, min, max, num, sum, sum_squares, bucket_limits, bucket_counts, global_step=None, walltime=None)\n |      Add histogram with raw data.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          min (float or int): Min value\n |          max (float or int): Max value\n |          num (int): Number of values\n |          sum (float or int): Sum of all values\n |          sum_squares (float or int): Sum of squares for all values\n |          bucket_limits (torch.Tensor, numpy.ndarray): Upper value per bucket.\n |            The number of elements of it should be the same as `bucket_counts`.\n |          bucket_counts (torch.Tensor, numpy.ndarray): Number of values per bucket\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |          see: https://github.com/tensorflow/tensorboard/blob/master/tensorboard/plugins/histogram/README.md\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          import numpy as np\n |          writer = SummaryWriter()\n |          dummy_data = []\n |          for idx, value in enumerate(range(50)):\n |              dummy_data += [idx + 0.001] * value\n |      \n |          bins = list(range(50+2))\n |          bins = np.array(bins)\n |          values = np.array(dummy_data).astype(float).reshape(-1)\n |          counts, limits = np.histogram(values, bins=bins)\n |          sum_sq = values.dot(values)\n |          writer.add_histogram_raw(\n |              tag='histogram_with_raw_data',\n |              min=values.min(),\n |              max=values.max(),\n |              num=len(values),\n |              sum=values.sum(),\n |              sum_squares=sum_sq,\n |              bucket_limits=limits[1:].tolist(),\n |              bucket_counts=counts.tolist(),\n |              global_step=0)\n |          writer.close()\n |      \n |      Expected result:\n |      \n |      .. image:: _static/img/tensorboard/add_histogram_raw.png\n |         :scale: 50 %\n |  \n |  add_hparams(self, hparam_dict, metric_dict, hparam_domain_discrete=None, run_name=None, global_step=None)\n |      Add a set of hyperparameters to be compared in TensorBoard.\n |      \n |      Args:\n |          hparam_dict (dict): Each key-value pair in the dictionary is the\n |            name of the hyper parameter and it's corresponding value.\n |            The type of the value can be one of `bool`, `string`, `float`,\n |            `int`, or `None`.\n |          metric_dict (dict): Each key-value pair in the dictionary is the\n |            name of the metric and it's corresponding value. Note that the key used\n |            here should be unique in the tensorboard record. Otherwise the value\n |            you added by ``add_scalar`` will be displayed in hparam plugin. In most\n |            cases, this is unwanted.\n |          hparam_domain_discrete: (Optional[Dict[str, List[Any]]]) A dictionary that\n |            contains names of the hyperparameters and all discrete values they can hold\n |          run_name (str): Name of the run, to be included as part of the logdir.\n |            If unspecified, will use current timestamp.\n |          global_step (int): Global step value to record\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          with SummaryWriter() as w:\n |              for i in range(5):\n |                  w.add_hparams({'lr': 0.1*i, 'bsize': i},\n |                                {'hparam/accuracy': 10*i, 'hparam/loss': 10*i})\n |      \n |      Expected result:\n |      \n |      .. image:: _static/img/tensorboard/add_hparam.png\n |         :scale: 50 %\n |  \n |  add_image(self, tag, img_tensor, global_step=None, walltime=None, dataformats='CHW')\n |      Add image data to summary.\n |      \n |      Note that this requires the ``pillow`` package.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          img_tensor (torch.Tensor, numpy.ndarray, or string/blobname): Image data\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |          dataformats (str): Image data format specification of the form\n |            CHW, HWC, HW, WH, etc.\n |      Shape:\n |          img_tensor: Default is :math:`(3, H, W)`. You can use ``torchvision.utils.make_grid()`` to\n |          convert a batch of tensor into 3xHxW format or call ``add_images`` and let us do the job.\n |          Tensor with :math:`(1, H, W)`, :math:`(H, W)`, :math:`(H, W, 3)` is also suitable as long as\n |          corresponding ``dataformats`` argument is passed, e.g. ``CHW``, ``HWC``, ``HW``.\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          import numpy as np\n |          img = np.zeros((3, 100, 100))\n |          img[0] = np.arange(0, 10000).reshape(100, 100) / 10000\n |          img[1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000\n |      \n |          img_HWC = np.zeros((100, 100, 3))\n |          img_HWC[:, :, 0] = np.arange(0, 10000).reshape(100, 100) / 10000\n |          img_HWC[:, :, 1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000\n |      \n |          writer = SummaryWriter()\n |          writer.add_image('my_image', img, 0)\n |      \n |          # If you have non-default dimension setting, set the dataformats argument.\n |          writer.add_image('my_image_HWC', img_HWC, 0, dataformats='HWC')\n |          writer.close()\n |      \n |      Expected result:\n |      \n |      .. image:: _static/img/tensorboard/add_image.png\n |         :scale: 50 %\n |  \n |  add_image_with_boxes(self, tag, img_tensor, box_tensor, global_step=None, walltime=None, rescale=1, dataformats='CHW', labels=None)\n |      Add image and draw bounding boxes on the image.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          img_tensor (torch.Tensor, numpy.ndarray, or string/blobname): Image data\n |          box_tensor (torch.Tensor, numpy.ndarray, or string/blobname): Box data (for detected objects)\n |            box should be represented as [x1, y1, x2, y2].\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |          rescale (float): Optional scale override\n |          dataformats (str): Image data format specification of the form\n |            NCHW, NHWC, CHW, HWC, HW, WH, etc.\n |          labels (list of string): The label to be shown for each bounding box.\n |      Shape:\n |          img_tensor: Default is :math:`(3, H, W)`. It can be specified with ``dataformats`` argument.\n |          e.g. CHW or HWC\n |      \n |          box_tensor: (torch.Tensor, numpy.ndarray, or string/blobname): NX4,  where N is the number of\n |          boxes and each 4 elements in a row represents (xmin, ymin, xmax, ymax).\n |  \n |  add_images(self, tag, img_tensor, global_step=None, walltime=None, dataformats='NCHW')\n |      Add batched image data to summary.\n |      \n |      Note that this requires the ``pillow`` package.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          img_tensor (torch.Tensor, numpy.ndarray, or string/blobname): Image data\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |          dataformats (str): Image data format specification of the form\n |            NCHW, NHWC, CHW, HWC, HW, WH, etc.\n |      Shape:\n |          img_tensor: Default is :math:`(N, 3, H, W)`. If ``dataformats`` is specified, other shape will be\n |          accepted. e.g. NCHW or NHWC.\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          import numpy as np\n |      \n |          img_batch = np.zeros((16, 3, 100, 100))\n |          for i in range(16):\n |              img_batch[i, 0] = np.arange(0, 10000).reshape(100, 100) / 10000 / 16 * i\n |              img_batch[i, 1] = (1 - np.arange(0, 10000).reshape(100, 100) / 10000) / 16 * i\n |      \n |          writer = SummaryWriter()\n |          writer.add_images('my_image_batch', img_batch, 0)\n |          writer.close()\n |      \n |      Expected result:\n |      \n |      .. image:: _static/img/tensorboard/add_images.png\n |         :scale: 30 %\n |  \n |  add_mesh(self, tag, vertices, colors=None, faces=None, config_dict=None, global_step=None, walltime=None)\n |      Add meshes or 3D point clouds to TensorBoard.\n |      \n |      The visualization is based on Three.js,\n |      so it allows users to interact with the rendered object. Besides the basic definitions\n |      such as vertices, faces, users can further provide camera parameter, lighting condition, etc.\n |      Please check https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene for\n |      advanced usage.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          vertices (torch.Tensor): List of the 3D coordinates of vertices.\n |          colors (torch.Tensor): Colors for each vertex\n |          faces (torch.Tensor): Indices of vertices within each triangle. (Optional)\n |          config_dict: Dictionary with ThreeJS classes names and configuration.\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |      \n |      Shape:\n |          vertices: :math:`(B, N, 3)`. (batch, number_of_vertices, channels)\n |      \n |          colors: :math:`(B, N, 3)`. The values should lie in [0, 255] for type `uint8` or [0, 1] for type `float`.\n |      \n |          faces: :math:`(B, N, 3)`. The values should lie in [0, number_of_vertices] for type `uint8`.\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          vertices_tensor = torch.as_tensor([\n |              [1, 1, 1],\n |              [-1, -1, 1],\n |              [1, -1, -1],\n |              [-1, 1, -1],\n |          ], dtype=torch.float).unsqueeze(0)\n |          colors_tensor = torch.as_tensor([\n |              [255, 0, 0],\n |              [0, 255, 0],\n |              [0, 0, 255],\n |              [255, 0, 255],\n |          ], dtype=torch.int).unsqueeze(0)\n |          faces_tensor = torch.as_tensor([\n |              [0, 2, 3],\n |              [0, 3, 1],\n |              [0, 1, 2],\n |              [1, 3, 2],\n |          ], dtype=torch.int).unsqueeze(0)\n |      \n |          writer = SummaryWriter()\n |          writer.add_mesh('my_mesh', vertices=vertices_tensor, colors=colors_tensor, faces=faces_tensor)\n |      \n |          writer.close()\n |  \n |  add_onnx_graph(self, prototxt)\n |  \n |  add_pr_curve(self, tag, labels, predictions, global_step=None, num_thresholds=127, weights=None, walltime=None)\n |      Add precision recall curve.\n |      \n |      Plotting a precision-recall curve lets you understand your model's\n |      performance under different threshold settings. With this function,\n |      you provide the ground truth labeling (T/F) and prediction confidence\n |      (usually the output of your model) for each target. The TensorBoard UI\n |      will let you choose the threshold interactively.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          labels (torch.Tensor, numpy.ndarray, or string/blobname):\n |            Ground truth data. Binary label for each element.\n |          predictions (torch.Tensor, numpy.ndarray, or string/blobname):\n |            The probability that an element be classified as true.\n |            Value should be in [0, 1]\n |          global_step (int): Global step value to record\n |          num_thresholds (int): Number of thresholds used to draw the curve.\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          import numpy as np\n |          labels = np.random.randint(2, size=100)  # binary label\n |          predictions = np.random.rand(100)\n |          writer = SummaryWriter()\n |          writer.add_pr_curve('pr_curve', labels, predictions, 0)\n |          writer.close()\n |  \n |  add_pr_curve_raw(self, tag, true_positive_counts, false_positive_counts, true_negative_counts, false_negative_counts, precision, recall, global_step=None, num_thresholds=127, weights=None, walltime=None)\n |      Add precision recall curve with raw data.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          true_positive_counts (torch.Tensor, numpy.ndarray, or string/blobname): true positive counts\n |          false_positive_counts (torch.Tensor, numpy.ndarray, or string/blobname): false positive counts\n |          true_negative_counts (torch.Tensor, numpy.ndarray, or string/blobname): true negative counts\n |          false_negative_counts (torch.Tensor, numpy.ndarray, or string/blobname): false negative counts\n |          precision (torch.Tensor, numpy.ndarray, or string/blobname): precision\n |          recall (torch.Tensor, numpy.ndarray, or string/blobname): recall\n |          global_step (int): Global step value to record\n |          num_thresholds (int): Number of thresholds used to draw the curve.\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |          see: https://github.com/tensorflow/tensorboard/blob/master/tensorboard/plugins/pr_curve/README.md\n |  \n |  add_scalar(self, tag, scalar_value, global_step=None, walltime=None, new_style=False, double_precision=False)\n |      Add scalar data to summary.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          scalar_value (float or string/blobname): Value to save\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            with seconds after epoch of event\n |          new_style (boolean): Whether to use new style (tensor field) or old\n |            style (simple_value field). New style could lead to faster data loading.\n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          writer = SummaryWriter()\n |          x = range(100)\n |          for i in x:\n |              writer.add_scalar('y=2x', i * 2, i)\n |          writer.close()\n |      \n |      Expected result:\n |      \n |      .. image:: _static/img/tensorboard/add_scalar.png\n |         :scale: 50 %\n |  \n |  add_scalars(self, main_tag, tag_scalar_dict, global_step=None, walltime=None)\n |      Add many scalar data to summary.\n |      \n |      Args:\n |          main_tag (str): The parent name for the tags\n |          tag_scalar_dict (dict): Key-value pair storing the tag and corresponding values\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |      \n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          writer = SummaryWriter()\n |          r = 5\n |          for i in range(100):\n |              writer.add_scalars('run_14h', {'xsinx':i*np.sin(i/r),\n |                                              'xcosx':i*np.cos(i/r),\n |                                              'tanx': np.tan(i/r)}, i)\n |          writer.close()\n |          # This call adds three values to the same scalar plot with the tag\n |          # 'run_14h' in TensorBoard's scalar section.\n |      \n |      Expected result:\n |      \n |      .. image:: _static/img/tensorboard/add_scalars.png\n |         :scale: 50 %\n |  \n |  add_tensor(self, tag, tensor, global_step=None, walltime=None)\n |      Add tensor data to summary.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          tensor (torch.Tensor): tensor to save\n |          global_step (int): Global step value to record\n |      Examples::\n |      \n |          from torch.utils.tensorboard import SummaryWriter\n |          writer = SummaryWriter()\n |          x = torch.tensor([1,2,3])\n |          writer.add_scalar('x', x)\n |          writer.close()\n |      \n |      Expected result:\n |          Summary::tensor::float_val [1,2,3]\n |                 ::tensor::shape [3]\n |                 ::tag 'x'\n |  \n |  add_text(self, tag, text_string, global_step=None, walltime=None)\n |      Add text data to summary.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          text_string (str): String to save\n |          global_step (int): Global step value to record\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |      Examples::\n |      \n |          writer.add_text('lstm', 'This is an lstm', 0)\n |          writer.add_text('rnn', 'This is an rnn', 10)\n |  \n |  add_video(self, tag, vid_tensor, global_step=None, fps=4, walltime=None)\n |      Add video data to summary.\n |      \n |      Note that this requires the ``moviepy`` package.\n |      \n |      Args:\n |          tag (str): Data identifier\n |          vid_tensor (torch.Tensor): Video data\n |          global_step (int): Global step value to record\n |          fps (float or int): Frames per second\n |          walltime (float): Optional override default walltime (time.time())\n |            seconds after epoch of event\n |      Shape:\n |          vid_tensor: :math:`(N, T, C, H, W)`. The values should lie in [0, 255] for type `uint8` or [0, 1] for type `float`.\n |  \n |  close(self)\n |  \n |  flush(self)\n |      Flushes the event file to disk.\n |      \n |      Call this method to make sure that all pending events have been written to\n |      disk.\n |  \n |  get_logdir(self)\n |      Return the directory where event files will be written.\n |  \n |  ----------------------------------------------------------------------\n |  Data descriptors defined here:\n |  \n |  __dict__\n |      dictionary for instance variables (if defined)\n |  \n |  __weakref__\n |      list of weak references to the object (if defined)\n\n</pre> In\u00a0[3]: Copied! <pre># \u5b9e\u4f8b\u5316 \u6307\u5b9a\u8def\u5f84\nwriter = SummaryWriter(\"logs\") \n</pre> # \u5b9e\u4f8b\u5316 \u6307\u5b9a\u8def\u5f84 writer = SummaryWriter(\"logs\")  In\u00a0[4]: Copied! <pre>help(SummaryWriter.add_scalar)\n</pre> help(SummaryWriter.add_scalar) <pre>Help on function add_scalar in module torch.utils.tensorboard.writer:\n\nadd_scalar(self, tag, scalar_value, global_step=None, walltime=None, new_style=False, double_precision=False)\n    Add scalar data to summary.\n    \n    Args:\n        tag (str): Data identifier\n        scalar_value (float or string/blobname): Value to save\n        global_step (int): Global step value to record\n        walltime (float): Optional override default walltime (time.time())\n          with seconds after epoch of event\n        new_style (boolean): Whether to use new style (tensor field) or old\n          style (simple_value field). New style could lead to faster data loading.\n    Examples::\n    \n        from torch.utils.tensorboard import SummaryWriter\n        writer = SummaryWriter()\n        x = range(100)\n        for i in x:\n            writer.add_scalar('y=2x', i * 2, i)\n        writer.close()\n    \n    Expected result:\n    \n    .. image:: _static/img/tensorboard/add_scalar.png\n       :scale: 50 %\n\n</pre> <p>\u8bf4\u660e\uff1a <code>scalar_value</code> y\u8f74\u70b9 <code>global_step</code> x\u8f74\u70b9</p> In\u00a0[6]: Copied! <pre>help(SummaryWriter.add_image)\n</pre> help(SummaryWriter.add_image) <pre>Help on function add_image in module torch.utils.tensorboard.writer:\n\nadd_image(self, tag, img_tensor, global_step=None, walltime=None, dataformats='CHW')\n    Add image data to summary.\n    \n    Note that this requires the ``pillow`` package.\n    \n    Args:\n        tag (str): Data identifier\n        img_tensor (torch.Tensor, numpy.ndarray, or string/blobname): Image data\n        global_step (int): Global step value to record\n        walltime (float): Optional override default walltime (time.time())\n          seconds after epoch of event\n        dataformats (str): Image data format specification of the form\n          CHW, HWC, HW, WH, etc.\n    Shape:\n        img_tensor: Default is :math:`(3, H, W)`. You can use ``torchvision.utils.make_grid()`` to\n        convert a batch of tensor into 3xHxW format or call ``add_images`` and let us do the job.\n        Tensor with :math:`(1, H, W)`, :math:`(H, W)`, :math:`(H, W, 3)` is also suitable as long as\n        corresponding ``dataformats`` argument is passed, e.g. ``CHW``, ``HWC``, ``HW``.\n    \n    Examples::\n    \n        from torch.utils.tensorboard import SummaryWriter\n        import numpy as np\n        img = np.zeros((3, 100, 100))\n        img[0] = np.arange(0, 10000).reshape(100, 100) / 10000\n        img[1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000\n    \n        img_HWC = np.zeros((100, 100, 3))\n        img_HWC[:, :, 0] = np.arange(0, 10000).reshape(100, 100) / 10000\n        img_HWC[:, :, 1] = 1 - np.arange(0, 10000).reshape(100, 100) / 10000\n    \n        writer = SummaryWriter()\n        writer.add_image('my_image', img, 0)\n    \n        # If you have non-default dimension setting, set the dataformats argument.\n        writer.add_image('my_image_HWC', img_HWC, 0, dataformats='HWC')\n        writer.close()\n    \n    Expected result:\n    \n    .. image:: _static/img/tensorboard/add_image.png\n       :scale: 50 %\n\n</pre> In\u00a0[5]: Copied! <pre># \u5173\u95ed\nwriter.close()\n</pre> # \u5173\u95ed writer.close()"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/","title":"\u4e3b\u8981\u529f\u80fd\u548c\u7528\u9014\u00b6","text":"<p>TensorBoard \u63d0\u4f9b\u4e86\u4e00\u5957\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u66f4\u597d\u5730\u7406\u89e3\u3001\u8c03\u8bd5\u548c\u4f18\u5316\u4ed6\u4eec\u7684\u673a\u5668\u5b66\u4e60\u6a21\u578b\uff1a</p> <ul> <li><p>\ud83d\udcc8 \u8ddf\u8e2a\u548c\u53ef\u89c6\u5316\u6307\u6807\uff08Metrics\uff09\uff1a</p> <ul> <li>\u5b9e\u65f6\u663e\u793a\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u7684\u635f\u5931\u51fd\u6570 (Loss)\u3001\u51c6\u786e\u7387 (Accuracy)\u3001\u5b66\u4e60\u7387\u7b49\u5173\u952e\u6307\u6807\u968f\u65f6\u95f4\u53d8\u5316\u7684\u66f2\u7ebf\u3002</li> <li>\u53ef\u4ee5\u6bd4\u8f83\u4e0d\u540c\u5b9e\u9a8c\uff08\u4f8b\u5982\uff0c\u4e0d\u540c\u8d85\u53c2\u6570\u8bbe\u7f6e\uff09\u4e4b\u95f4\u7684\u7ed3\u679c\u3002</li> </ul> </li> <li><p>\ud83d\udd78\ufe0f \u53ef\u89c6\u5316\u6a21\u578b\u8ba1\u7b97\u56fe\uff08Graph\uff09\uff1a</p> <ul> <li>\u76f4\u89c2\u5730\u5c55\u73b0\u795e\u7ecf\u7f51\u7edc\u7684\u7ed3\u6784\u3001\u5c42\u4e4b\u95f4\u7684\u8fde\u63a5\u4ee5\u53ca\u6570\u636e\u7684\u6d41\u5411\u3002</li> <li>\u8fd9\u6709\u52a9\u4e8e\u7406\u89e3\u6a21\u578b\u7684\u6784\u5efa\u548c\u8c03\u8bd5\u7ed3\u6784\u95ee\u9898\u3002</li> </ul> </li> <li><p>\ud83d\udcca \u67e5\u770b\u5f20\u91cf\uff08Tensor\uff09\u7684\u76f4\u65b9\u56fe\uff1a</p> <ul> <li>\u663e\u793a\u6a21\u578b\u4e2d\u7684\u6743\u91cd\uff08Weights\uff09\u3001\u504f\u5dee\uff08Biases\uff09\u6216\u6fc0\u6d3b\u503c\uff08Activations\uff09\u7b49\u5f20\u91cf\u968f\u65f6\u95f4\u53d8\u5316\u7684\u5206\u5e03\u60c5\u51b5\u3002</li> <li>\u6709\u52a9\u4e8e\u68c0\u6d4b\u6f5c\u5728\u7684\u95ee\u9898\uff0c\u5982\u68af\u5ea6\u6d88\u5931\u6216\u68af\u5ea6\u7206\u70b8\u3002</li> </ul> </li> <li><p>\ud83d\uddbc\ufe0f \u663e\u793a\u56fe\u50cf\u3001\u6587\u672c\u548c\u97f3\u9891\u6570\u636e\uff1a</p> <ul> <li>\u53ef\u7528\u4e8e\u53ef\u89c6\u5316\u8f93\u5165\u6570\u636e\u3001\u6a21\u578b\u751f\u6210\u7684\u56fe\u50cf\uff0c\u6216\u5377\u79ef\u7f51\u7edc\u5c42\u8f93\u51fa\u7684\u7279\u5f81\u56fe\u3002</li> </ul> </li> <li><p>\ud83c\udf0c \u5d4c\u5165\u6295\u5c04\uff08Embedding Projector\uff09\uff1a</p> <ul> <li>\u5c06\u9ad8\u7ef4\u7684\u5d4c\u5165\u5411\u91cf\uff08Embeddings\uff09\u6295\u5f71\u5230\u8f83\u4f4e\u7ef4\u5ea6\u7684\u7a7a\u95f4\uff08\u5982 2D \u6216 3D\uff09\uff0c\u4ee5\u4fbf\u8fdb\u884c\u4ea4\u4e92\u5f0f\u63a2\u7d22\u548c\u5206\u6790\u6570\u636e\u7ed3\u6784\u53ca\u6837\u672c\u76f8\u4f3c\u6027\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/","title":"\u603b\u7ed3\u00b6","text":"<p>\u7b80\u800c\u8a00\u4e4b\uff0cTensorBoard \u5c31\u662f\u673a\u5668\u5b66\u4e60\u9886\u57df\u7684\u201c\u4eea\u8868\u76d8\u201d\u548c\u201c\u4fa6\u67e5\u5de5\u5177\u201d\uff0c\u5b83\u5c06\u590d\u6742\u7684\u8bad\u7ec3\u8fc7\u7a0b\u548c\u6a21\u578b\u5185\u90e8\u72b6\u6001\u4ee5\u53ef\u89c6\u5316\u7684\u65b9\u5f0f\u5448\u73b0\u51fa\u6765\uff0c\u8ba9\u5de5\u7a0b\u5e08\u80fd\u591f\uff1a</p> <ol> <li>\u76d1\u63a7\u8bad\u7ec3\u8fdb\u5ea6\u3002</li> <li>\u7406\u89e3\u6a21\u578b\u7ed3\u6784\u548c\u884c\u4e3a\u3002</li> <li>\u8c03\u8bd5\u548c\u4f18\u5316\u6a21\u578b\u6027\u80fd\u3002</li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/#summarywriter","title":"SummaryWriter\u7c7b\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/#tensorboard-summarywriter","title":"\u270d\ufe0f TensorBoard \u4e2d\u7684 SummaryWriter \u4ecb\u7ecd\u00b6","text":"<p><code>SummaryWriter</code> \u662f PyTorch (\u4ee5\u53ca\u5176\u4ed6\u4e00\u4e9b\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\uff0c\u5982 TensorFlow \u7684 Keras API) \u4e2d\u7528\u4e8e\u5c06\u6570\u636e\u5199\u5165 TensorBoard \u53ef\u89c6\u5316\u5de5\u5177\u7684\u6838\u5fc3\u7c7b\u3002</p> <p>\u4f60\u53ef\u4ee5\u628a TensorBoard \u770b\u4f5c\u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u201c\u6570\u636e\u8bb0\u5f55\u4eea\u201d\u548c\u201c\u5c55\u793a\u677f\u201d\uff0c\u800c <code>SummaryWriter</code> \u5c31\u662f\u4f60\u7528\u6765\u8bb0\u5f55\u548c\u7ec4\u7ec7\u8fd9\u4e9b\u6570\u636e\u7684\u7b14\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/","title":"\u6838\u5fc3\u529f\u80fd\u4e0e\u4f5c\u7528\u00b6","text":"<ul> <li>\u521b\u5efa\u4e8b\u4ef6\u6587\u4ef6 (Event Files): <code>SummaryWriter</code> \u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5728\u6307\u5b9a\u7684\u65e5\u5fd7\u76ee\u5f55 (<code>log_dir</code>) \u4e2d\u521b\u5efa TensorBoard \u9700\u8981\u8bfb\u53d6\u7684\u4e8b\u4ef6\u6587\u4ef6\u3002</li> <li>\u8bb0\u5f55\u6570\u636e: \u5b83\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217 <code>add_XXX()</code> \u65b9\u6cd5\uff0c\u5141\u8bb8\u4f60\u5728\u6a21\u578b\u8bad\u7ec3\u3001\u9a8c\u8bc1\u7b49\u8fc7\u7a0b\u4e2d\uff0c\u65b9\u4fbf\u5730\u8bb0\u5f55\u5404\u79cd\u7c7b\u578b\u7684\u6570\u636e\uff0c\u4f8b\u5982\uff1a<ul> <li>\u6807\u91cf (Scalars): \u8bb0\u5f55\u635f\u5931\u51fd\u6570 (<code>loss</code>)\u3001\u51c6\u786e\u7387 (<code>accuracy</code>)\u3001\u5b66\u4e60\u7387 (<code>learning rate</code>) \u7b49\u968f\u8bad\u7ec3\u6b65\u6570\u53d8\u5316\u7684\u6570\u503c\u3002</li> <li>\u76f4\u65b9\u56fe (Histograms): \u8bb0\u5f55\u6a21\u578b\u53c2\u6570\uff08\u5982\u6743\u91cd\u3001\u504f\u7f6e\uff09\u6216\u68af\u5ea6\u7b49\u5f20\u91cf\u7684\u5206\u5e03\u60c5\u51b5\u3002</li> <li>\u56fe\u50cf (Images): \u8bb0\u5f55\u8f93\u5165\u56fe\u50cf\u3001\u7279\u5f81\u56fe (feature maps) \u6216\u751f\u6210\u56fe\u50cf\u7b49\u3002</li> <li>\u56fe (Graph): \u8bb0\u5f55\u6a21\u578b\u7ed3\u6784\u3002</li> <li>\u6587\u672c (Text): \u8bb0\u5f55\u914d\u7f6e\u4fe1\u606f\u3001\u91cd\u8981\u7684\u65e5\u5fd7\u7b49\u3002</li> </ul> </li> <li>\u53ef\u89c6\u5316: TensorBoard \u4f1a\u8bfb\u53d6\u8fd9\u4e9b\u4e8b\u4ef6\u6587\u4ef6\uff0c\u5e76\u5c06\u8bb0\u5f55\u7684\u6570\u636e\u4ee5\u56fe\u8868\u3001\u56fe\u50cf\u7b49\u5f62\u5f0f\u5728\u7f51\u9875\u754c\u9762\u4e0a\u8fdb\u884c\u53ef\u89c6\u5316\uff0c\u5e2e\u52a9\u4f60\u66f4\u597d\u5730\u7406\u89e3\u548c\u8c03\u8bd5\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u3002</li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/#pytorch","title":"\u5e38\u89c1\u7528\u6cd5 (\u4ee5 PyTorch \u4e3a\u4f8b)\u00b6","text":"<ol> <li><p>\u5bfc\u5165\u4e0e\u521d\u59cb\u5316:</p> <p>\u5728 PyTorch \u4e2d\uff0c<code>SummaryWriter</code> \u901a\u5e38\u4ece <code>torch.utils.tensorboard</code> \u4e2d\u5bfc\u5165\uff08\u6216\u65e7\u7248\u4e2d\u4f7f\u7528 <code>tensorboardX</code> \u5e93\uff09\u3002</p> <pre>from torch.utils.tensorboard import SummaryWriter\n\n# \u521d\u59cb\u5316 SummaryWriter\uff0c\u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u5b58\u653e\u7684\u76ee\u5f55\nwriter = SummaryWriter(log_dir='runs/my_experiment_name') \n# 'runs/my_experiment_name' \u662f\u9ed8\u8ba4\u6216\u5e38\u7528\u7684\u65e5\u5fd7\u76ee\u5f55\n</pre> <ul> <li><code>log_dir</code>: TensorBoard \u4e8b\u4ef6\u6587\u4ef6\u7684\u5b58\u653e\u8def\u5f84\u3002</li> </ul> </li> <li><p>\u8bb0\u5f55\u6807\u91cf\u6570\u636e (\u6700\u5e38\u7528):</p> <p>\u5728\u8bad\u7ec3\u5faa\u73af\u4e2d\uff0c\u8bb0\u5f55\u635f\u5931\u6216\u51c6\u786e\u7387\u7b49\uff1a</p> <pre># \u5047\u8bbe loss \u548c step \u662f\u5f53\u524d\u8bad\u7ec3\u6b65\u7684\u635f\u5931\u503c\u548c\u6b65\u6570\nwriter.add_scalar('Training/Loss', loss, global_step=step)\nwriter.add_scalar('Training/Accuracy', accuracy, global_step=step)\n</pre> <ul> <li><code>'Training/Loss'</code>\uff1a\u6807\u7b7e (Tag)\uff0c\u7528\u4e8e\u5728 TensorBoard \u754c\u9762\u4e0a\u5206\u7ec4\u663e\u793a\u3002</li> <li><code>loss</code>\uff1a\u6807\u91cf\u503c (Scalar value)\u3002</li> <li><code>global_step</code>\uff1a\u6b65\u6570\uff0c\u5bf9\u5e94 TensorBoard \u56fe\u8868\u4e2d\u7684 X \u8f74\u3002</li> </ul> </li> <li><p>\u8bb0\u5f55\u56fe\u50cf\u6570\u636e:</p> <pre># \u5047\u8bbe img_tensor \u662f\u4e00\u4e2a\u56fe\u50cf\u5f20\u91cf\uff0cstep \u662f\u5f53\u524d\u6b65\u6570\nwriter.add_image('Input Image', img_tensor, global_step=step)\n</pre> </li> <li><p>\u5173\u95ed Writer:</p> <p>\u8bad\u7ec3\u7ed3\u675f\u540e\uff0c\u8bb0\u5f97\u5173\u95ed Writer \u4ee5\u786e\u4fdd\u6240\u6709\u6570\u636e\u90fd\u88ab\u5199\u5165\u6587\u4ef6\uff1a</p> <pre>writer.close()\n</pre> </li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/tensorboard/#tensorboard","title":"\u5982\u4f55\u67e5\u770b TensorBoard\u00b6","text":"<p>\u5728\u4f60\u7684\u7ec8\u7aef\u6216\u547d\u4ee4\u884c\u4e2d\uff0c\u5bfc\u822a\u5230\u4f60\u7684\u9879\u76ee\u6839\u76ee\u5f55\u6216\u5b58\u653e <code>log_dir</code> (\u4f8b\u5982 <code>runs</code>) \u7684\u76ee\u5f55\uff0c\u7136\u540e\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8 TensorBoard \u670d\u52a1\u5668\uff1a</p> <pre>tensorboard --logdir=runs\n</pre> <p>TensorBoard \u542f\u52a8\u540e\uff0c\u5b83\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u672c\u5730 URL\uff08\u901a\u5e38\u662f <code>http://localhost:6006</code>\uff09\uff0c\u4f60\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5 URL \u5373\u53ef\u770b\u5230\u53ef\u89c6\u5316\u7684\u7ed3\u679c\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensor/","title":"Tensor","text":"In\u00a0[\u00a0]: Copied!"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensor/#tensor","title":"Tensor\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensor/#tensor","title":"\ud83d\udcd0 \u5f20\u91cf (Tensor) \u8bb2\u89e3\u00b6","text":"<p>\u5f20\u91cf (Tensor) \u662f PyTorch\u3001TensorFlow \u7b49\u6df1\u5ea6\u5b66\u4e60\u6846\u67b6\u4e2d\u7684\u6838\u5fc3\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u5728\u6570\u5b66\u4e0a\u662f\u6807\u91cf\u3001\u5411\u91cf\u548c\u77e9\u9635\u6982\u5ff5\u7684\u6cdb\u5316\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5f20\u91cf\u5c31\u662f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684\u6570\u636e\u5bb9\u5668\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensor/#1-rank","title":"1. \u5f20\u91cf\u7684\u6570\u5b66\u6982\u5ff5\uff1a\u7ef4\u5ea6 (Rank)\u00b6","text":"<p>\u5f20\u91cf\u53ef\u4ee5\u88ab\u770b\u4f5c\u662f\u4e00\u4e2a\u591a\u7ef4\u6570\u7ec4\uff0c\u5b83\u7684\u201c\u7ef4\u5ea6\u201d\u6216\u201c\u9636\u201d\uff08\u5728\u6570\u5b66\u548c\u7269\u7406\u4e2d\u79f0\u4e3a Rank\uff09\u51b3\u5b9a\u4e86\u5b83\u80fd\u8868\u793a\u7684\u6570\u636e\u590d\u6742\u7a0b\u5ea6\u3002</p> \u9636/\u7ef4\u5ea6 (Rank) \u5f62\u72b6 (Shape) \u63cf\u8ff0 \u793a\u4f8b\u6570\u636e 0 \u9636 <code>()</code> \u6807\u91cf (Scalar)\uff1a\u4e00\u4e2a\u7eaf\u91cf\u3002 <code>5</code>, $\\pi$, \u635f\u5931\u51fd\u6570\u503c <code>loss</code> 1 \u9636 <code>(n,)</code> \u5411\u91cf (Vector)\uff1a\u4e00\u7ef4\u6570\u7ec4\u3002 \u8bcd\u5d4c\u5165 (Word Embedding)\uff0c$\\begin{bmatrix} 1 \\\\ 2 \\\\ 3 \\end{bmatrix}$ 2 \u9636 <code>(n, m)</code> \u77e9\u9635 (Matrix)\uff1a\u4e8c\u7ef4\u6570\u7ec4\u3002 \u56fe\u50cf\u7684\u7070\u5ea6\u503c\uff0c\u7ebf\u6027\u5c42\u6743\u91cd $\\mathbf{W}$ 3 \u9636 <code>(n, m, k)</code> \u4e09\u9636\u5f20\u91cf\uff1a\u4e09\u7ef4\u6570\u7ec4\u3002 \u5f69\u8272\u56fe\u50cf (\u9ad8 x \u5bbd x \u989c\u8272\u901a\u9053)\uff0c\u89c6\u9891\u5e27 4 \u9636 <code>(n, m, k, l)</code> \u56db\u9636\u5f20\u91cf\uff1a\u56db\u7ef4\u6570\u7ec4\u3002 \u6279\u91cf (Batch) \u7684\u5f69\u8272\u56fe\u50cf (\u6279\u91cf\u5927\u5c0f x \u989c\u8272\u901a\u9053 x \u9ad8 x \u5bbd)"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensor/#2","title":"2. \u5f20\u91cf\u7684\u4e3b\u8981\u5c5e\u6027\u00b6","text":"<p>\u5728 PyTorch \u7b49\u6846\u67b6\u4e2d\uff0c\u4e00\u4e2a\u5f20\u91cf\u5bf9\u8c61\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u5c5e\u6027\uff1a</p> \u5c5e\u6027 \u63cf\u8ff0 \u793a\u4f8b Data (\u6570\u636e) \u5b58\u50a8\u5728\u5f20\u91cf\u4e2d\u7684\u5b9e\u9645\u6570\u503c\u3002 <code>[[1, 2], [3, 4]]</code> Shape (\u5f62\u72b6) \u5b9a\u4e49\u4e86\u5f20\u91cf\u5728\u6bcf\u4e2a\u7ef4\u5ea6\u4e0a\u7684\u5927\u5c0f\u3002 2x2 \u77e9\u9635\u7684\u5f62\u72b6\u662f <code>(2, 2)</code> Dtype (\u6570\u636e\u7c7b\u578b) \u5b58\u50a8\u7684\u5143\u7d20\u7684\u6570\u636e\u7c7b\u578b\u3002 <code>torch.float32</code>, <code>torch.int64</code> \u7b49\u3002 Device (\u8bbe\u5907) \u5f20\u91cf\u5b58\u50a8\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u662f CPU \u6216 GPU\u3002 <code>cpu</code> \u6216 <code>cuda:0</code> <code>requires_grad</code> \u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u9700\u8981\u8ba1\u7b97\u8be5\u5f20\u91cf\u7684\u68af\u5ea6\uff08\u7528\u4e8e\u53cd\u5411\u4f20\u64ad\uff09\u3002 <code>True</code> \u6216 <code>False</code>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensor/#3","title":"3. \u5f20\u91cf\u5728\u6df1\u5ea6\u5b66\u4e60\u4e2d\u7684\u5e94\u7528\u00b6","text":"<p>\u5f20\u91cf\u662f\u8868\u793a\u6240\u6709\u6570\u636e\u7684\u901a\u7528\u8bed\u8a00\uff1a</p> \u6570\u636e\u7c7b\u578b \u5bf9\u5e94\u7684\u5f20\u91cf\u5f62\u72b6 (\u5e38\u89c1) \u63cf\u8ff0 \u56fe\u50cf <code>(C, H, W)</code> \u6216 <code>(H, W, C)</code> \u901a\u9053\u6570 (C)\u3001\u9ad8 (H)\u3001\u5bbd (W)\u3002 \u6587\u672c (\u6279\u91cf) <code>(Batch_size, Seq_len, Embedding_dim)</code> \u6279\u91cf\u5927\u5c0f\u3001\u5e8f\u5217\u957f\u5ea6\u3001\u8bcd\u5d4c\u5165\u7ef4\u5ea6\u3002 \u8bad\u7ec3\u6279\u91cf (Batch) <code>(Batch_size, C, H, W)</code> \u6df1\u5ea6\u5b66\u4e60\u4e2d\u5904\u7406\u6570\u636e\u7684\u4e3b\u6d41\u5f62\u5f0f\uff0c\u4e00\u6b21\u5904\u7406\u591a\u5f20\u56fe\u7247\u3002 \u6a21\u578b\u53c2\u6570 \u5404\u79cd\u5f62\u72b6 \u6a21\u578b\u7684\u6743\u91cd $\\mathbf{W}$ \u548c\u504f\u7f6e $\\mathbf{b}$ \u90fd\u662f\u5f20\u91cf\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensor/#4-pytorch","title":"4. PyTorch \u5f20\u91cf\u7684\u7279\u70b9\uff1a\u81ea\u52a8\u5fae\u5206\u00b6","text":"<p>PyTorch \u7684\u5f20\u91cf (<code>torch.Tensor</code>) \u6700\u5f3a\u5927\u7684\u7279\u6027\u662f\u5b83\u96c6\u6210\u4e86\u81ea\u52a8\u5fae\u5206 (Autograd) \u7cfb\u7edf\u3002</p> <ul> <li>\u5f53\u4f60\u521b\u5efa\u4e00\u4e2a\u5f20\u91cf\u5e76\u8bbe\u7f6e <code>requires_grad=True</code> \u65f6\uff0cPyTorch \u4f1a\u5f00\u59cb\u8ddf\u8e2a\u6240\u6709\u4f5c\u7528\u5728\u8fd9\u4e2a\u5f20\u91cf\u4e0a\u7684\u64cd\u4f5c\u3002</li> <li>\u8fd9\u4f7f\u5f97\u6a21\u578b\u5728\u8bad\u7ec3\u65f6\u53ef\u4ee5\u8f7b\u677e\u5730\u901a\u8fc7<code>.backward()</code> \u65b9\u6cd5\u81ea\u52a8\u8ba1\u7b97\u6240\u6709\u53c2\u6570\u7684\u68af\u5ea6\uff0c\u8fd9\u662f\u5b9e\u73b0\u53cd\u5411\u4f20\u64ad\u548c\u4f18\u5316\u6a21\u578b\u7684\u57fa\u7840\u3002</li> </ul> <pre>import torch\n\n# \u521b\u5efa\u4e00\u4e2a\u9700\u8981\u8ba1\u7b97\u68af\u5ea6\u7684 2 \u9636\u5f20\u91cf (\u77e9\u9635)\nx = torch.tensor([[1., 2.], [3., 4.]], requires_grad=True)\nprint(f\"\u5f20\u91cf\u7684\u5f62\u72b6: {x.shape}\")\nprint(f\"\u662f\u5426\u9700\u8981\u8ba1\u7b97\u68af\u5ea6: {x.requires_grad}\")\n\n# \u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\ny = x + 2\nz = y * y * 3\nout = z.mean()\n\n# out.backward()  # \u8c03\u7528 backward \u4f1a\u81ea\u52a8\u8ba1\u7b97\u6240\u6709 require_grad=True \u7684\u5f20\u91cf\u7684\u68af\u5ea6\n</pre> <p>\u603b\u7ed3: \u5f20\u91cf\u662f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u6570\u636e\u7684\u8f7d\u4f53\uff0c\u5b83\u4e0d\u4ec5\u80fd\u5b58\u50a8\u591a\u7ef4\u6570\u636e\uff0c\u8fd8\u96c6\u6210\u4e86\u81ea\u52a8\u5fae\u5206\u80fd\u529b\uff0c\u662f\u6784\u5efa\u548c\u8bad\u7ec3\u795e\u7ecf\u7f51\u7edc\u7684\u57fa\u77f3\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_tensorboard/","title":"Test tensorboard","text":"In\u00a0[\u00a0]: Copied! <pre>from torch.utils.tensorboard import SummaryWriter\n</pre> from torch.utils.tensorboard import SummaryWriter In\u00a0[\u00a0]: Copied! <pre>writer = SummaryWriter(\"logs\")\n</pre> writer = SummaryWriter(\"logs\") In\u00a0[\u00a0]: Copied! <pre># \u5b9e\u4f8b y = x\nfor i in range(100):\n    writer.add_scalar(tag='y=2x',scalar_value=2*i,global_step=i)\n</pre> # \u5b9e\u4f8b y = x for i in range(100):     writer.add_scalar(tag='y=2x',scalar_value=2*i,global_step=i) In\u00a0[\u00a0]: Copied! <pre>from PIL import Image\nimport numpy as np\nimage_path = 'hymenoptera_data/hymenoptera_data/train/ants/0013035.jpg'\nimg = Image.open(image_path)\nimg = np.array(img)\nprint(img.shape) # note : \u9ed8\u8ba4\u662f 3*H*W \u8fd9\u91cc3\u5374\u5728\u6700\u540e\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u989d\u5916\u8bbe\u7f6e\u683c\u5f0f\nwriter.add_image('image',img,global_step=2,dataformats='HWC')\n</pre> from PIL import Image import numpy as np image_path = 'hymenoptera_data/hymenoptera_data/train/ants/0013035.jpg' img = Image.open(image_path) img = np.array(img) print(img.shape) # note : \u9ed8\u8ba4\u662f 3*H*W \u8fd9\u91cc3\u5374\u5728\u6700\u540e\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u989d\u5916\u8bbe\u7f6e\u683c\u5f0f writer.add_image('image',img,global_step=2,dataformats='HWC') In\u00a0[\u00a0]: Copied! <pre>writer.close()\n</pre> writer.close()"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/","title":"transform","text":"In\u00a0[1]: Copied! <pre>from torchvision import transforms\n</pre> from torchvision import transforms In\u00a0[2]: Copied! <pre># \u8f6c\u6362\u56fe\u7247\nfrom PIL import Image\nfrom torchvision import transforms\n</pre> # \u8f6c\u6362\u56fe\u7247 from PIL import Image from torchvision import transforms In\u00a0[3]: Copied! <pre>img_path = 'dataset/train/ants/0013035.jpg'\nimg = Image.open(img_path)\nprint(type(img))\n</pre> img_path = 'dataset/train/ants/0013035.jpg' img = Image.open(img_path) print(type(img)) <pre>&lt;class 'PIL.JpegImagePlugin.JpegImageFile'&gt;\n</pre> In\u00a0[4]: Copied! <pre>tensor_trans = transforms.ToTensor() #\u5b9e\u4f8b\u5316\u7c7b\nimg_tensor = tensor_trans(img) #\u8c03\u7528\u7c7b(\u5c31\u662f\u8c03\u7528__call__\u51fd\u6570)\nprint(type(img_tensor))\n</pre> tensor_trans = transforms.ToTensor() #\u5b9e\u4f8b\u5316\u7c7b img_tensor = tensor_trans(img) #\u8c03\u7528\u7c7b(\u5c31\u662f\u8c03\u7528__call__\u51fd\u6570) print(type(img_tensor)) <pre>&lt;class 'torch.Tensor'&gt;\n</pre> In\u00a0[5]: Copied! <pre>print(img_tensor)\n</pre> print(img_tensor) <pre>tensor([[[0.3137, 0.3137, 0.3137,  ..., 0.3176, 0.3098, 0.2980],\n         [0.3176, 0.3176, 0.3176,  ..., 0.3176, 0.3098, 0.2980],\n         [0.3216, 0.3216, 0.3216,  ..., 0.3137, 0.3098, 0.3020],\n         ...,\n         [0.3412, 0.3412, 0.3373,  ..., 0.1725, 0.3725, 0.3529],\n         [0.3412, 0.3412, 0.3373,  ..., 0.3294, 0.3529, 0.3294],\n         [0.3412, 0.3412, 0.3373,  ..., 0.3098, 0.3059, 0.3294]],\n\n        [[0.5922, 0.5922, 0.5922,  ..., 0.5961, 0.5882, 0.5765],\n         [0.5961, 0.5961, 0.5961,  ..., 0.5961, 0.5882, 0.5765],\n         [0.6000, 0.6000, 0.6000,  ..., 0.5922, 0.5882, 0.5804],\n         ...,\n         [0.6275, 0.6275, 0.6235,  ..., 0.3608, 0.6196, 0.6157],\n         [0.6275, 0.6275, 0.6235,  ..., 0.5765, 0.6275, 0.5961],\n         [0.6275, 0.6275, 0.6235,  ..., 0.6275, 0.6235, 0.6314]],\n\n        [[0.9137, 0.9137, 0.9137,  ..., 0.9176, 0.9098, 0.8980],\n         [0.9176, 0.9176, 0.9176,  ..., 0.9176, 0.9098, 0.8980],\n         [0.9216, 0.9216, 0.9216,  ..., 0.9137, 0.9098, 0.9020],\n         ...,\n         [0.9294, 0.9294, 0.9255,  ..., 0.5529, 0.9216, 0.8941],\n         [0.9294, 0.9294, 0.9255,  ..., 0.8863, 1.0000, 0.9137],\n         [0.9294, 0.9294, 0.9255,  ..., 0.9490, 0.9804, 0.9137]]])\n</pre> In\u00a0[7]: Copied! <pre>print(img_tensor.shape)\n</pre> print(img_tensor.shape) <pre>torch.Size([3, 512, 768])\n</pre> <p>\u8bf4\u660e\uff1a\u7ef4\u5ea60 \u6df1\u5ea6\uff08\u901a\u9053\u6570\uff09\uff1b\u7ef4\u5ea61 \u884c\u6570\uff08\u9ad8\uff09\uff0c\u7ef4\u5ea62 \u5217\u6570\uff08\u5bbd\uff09</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#torchvision","title":"\ud83d\uddbc\ufe0f TorchVision \u4ecb\u7ecd\u00b6","text":"<p>TorchVision \u662f PyTorch \u5b98\u65b9\u652f\u6301\u7684\u3001\u4e13\u95e8\u7528\u4e8e\u8ba1\u7b97\u673a\u89c6\u89c9 (Computer Vision) \u4efb\u52a1\u7684\u5e93\u3002\u5b83\u662f PyTorch \u751f\u6001\u7cfb\u7edf\u4e2d\u4e0d\u53ef\u6216\u7f3a\u7684\u4e00\u90e8\u5206\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86\u8ba1\u7b97\u673a\u89c6\u89c9\u7814\u7a76\u548c\u5e94\u7528\u7684\u5f00\u53d1\u8fc7\u7a0b\u3002</p> <p>TorchVision \u4e3b\u8981\u7531\u4e09\u4e2a\u6838\u5fc3\u6a21\u5757\u6784\u6210\uff0c\u5171\u540c\u4e3a\u89c6\u89c9\u4efb\u52a1\u63d0\u4f9b\u9ad8\u6548\u7684\u652f\u6301\uff1a</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#1-torchvisiondatasets","title":"1. <code>torchvision.datasets</code> (\u6570\u636e\u96c6)\u00b6","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u5927\u91cf\u9884\u5148\u51c6\u5907\u597d\u7684\u3001\u5e38\u7528\u7684\u516c\u5171\u6570\u636e\u96c6\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u548c\u4f7f\u7528\uff0c\u65e0\u9700\u81ea\u5df1\u7f16\u5199\u590d\u6742\u7684\u6570\u636e\u52a0\u8f7d\u4ee3\u7801\u3002</p> <ul> <li>\u6838\u5fc3\u529f\u80fd: \u65b9\u4fbf\u5730\u52a0\u8f7d\u6807\u51c6\u6570\u636e\u96c6\u8fdb\u884c\u8bad\u7ec3\u548c\u6d4b\u8bd5\u3002</li> <li>\u5e38\u89c1\u6570\u636e\u96c6\u793a\u4f8b:<ul> <li>Image Classification (\u56fe\u50cf\u5206\u7c7b): <code>MNIST</code>, <code>CIFAR10</code>, <code>ImageNet</code> (\u9700\u8981\u624b\u52a8\u4e0b\u8f7d\u548c\u7ec4\u7ec7\u6587\u4ef6)\u3002</li> <li>Object Detection (\u76ee\u6807\u68c0\u6d4b): <code>CocoDetection</code>, <code>Kitti</code>.</li> <li>Semantic Segmentation (\u8bed\u4e49\u5206\u5272): <code>VOCSegmentation</code>.</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#2-torchvisionmodels","title":"2. <code>torchvision.models</code> (\u9884\u8bad\u7ec3\u6a21\u578b)\u00b6","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u5927\u91cf\u9884\u8bad\u7ec3\u7684\u3001\u9ad8\u6027\u80fd\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u3002\u8fd9\u4e9b\u6a21\u578b\u901a\u5e38\u5728\u5927\u578b\u6570\u636e\u96c6\uff08\u5982 ImageNet\uff09\u4e0a\u8bad\u7ec3\u8fc7\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u4e8e\u7279\u5f81\u63d0\u53d6\u6216\u4f5c\u4e3a\u8fc1\u79fb\u5b66\u4e60 (Transfer Learning) \u7684\u8d77\u70b9\u3002</p> <ul> <li>\u6838\u5fc3\u529f\u80fd: \u5feb\u901f\u83b7\u53d6\u548c\u4f7f\u7528\u7ecf\u8fc7\u9a8c\u8bc1\u7684\u7ecf\u5178\u6216\u5148\u8fdb\u6a21\u578b\u3002</li> <li>\u5e38\u89c1\u6a21\u578b\u67b6\u6784\u793a\u4f8b:<ul> <li>Classification (\u5206\u7c7b): <code>ResNet</code> (\u5982 <code>resnet50</code>), <code>VGG</code>, <code>MobileNet</code>, <code>EfficientNet</code>.</li> <li>Object Detection (\u76ee\u6807\u68c0\u6d4b): <code>Faster R-CNN</code>, <code>SSD</code>, <code>RetinaNet</code>.</li> <li>Segmentation (\u5206\u5272): <code>FCN</code>, <code>DeepLabV3</code>.</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#3-torchvisiontransforms","title":"3. <code>torchvision.transforms</code> (\u6570\u636e\u53d8\u6362/\u9884\u5904\u7406)\u00b6","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u5404\u79cd\u56fe\u50cf\u9884\u5904\u7406\u548c\u6570\u636e\u589e\u5f3a (Data Augmentation) \u64cd\u4f5c\u3002\u5728\u5c06\u539f\u59cb\u56fe\u50cf\u8f93\u5165\u5230\u795e\u7ecf\u7f51\u7edc\u4e4b\u524d\uff0c\u901a\u5e38\u9700\u8981\u8fdb\u884c\u8fd9\u4e9b\u5904\u7406\u3002</p> <ul> <li>\u6838\u5fc3\u529f\u80fd: \u5bf9 PIL Image \u6216 Tensor \u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u5982\u5c3a\u5bf8\u8c03\u6574\u3001\u88c1\u526a\u3001\u5f52\u4e00\u5316\u7b49\u3002</li> <li>\u5e38\u89c1\u64cd\u4f5c\u793a\u4f8b:<ul> <li><code>ToTensor()</code>: \u5c06 PIL Image \u6216 NumPy \u6570\u7ec4\u8f6c\u6362\u6210 PyTorch Tensor\u3002</li> <li><code>Normalize()</code>: \u5bf9 Tensor \u8fdb\u884c\u6807\u51c6\u5316\u5904\u7406 (\u51cf\u53bb\u5747\u503c\uff0c\u9664\u4ee5\u6807\u51c6\u5dee)\u3002</li> <li><code>Resize()</code>: \u6539\u53d8\u56fe\u50cf\u5c3a\u5bf8\u3002</li> <li><code>RandomCrop()</code>: \u968f\u673a\u88c1\u526a\uff0c\u7528\u4e8e\u6570\u636e\u589e\u5f3a\u3002</li> <li><code>Compose()</code>: \u5c06\u591a\u4e2a\u53d8\u6362\u64cd\u4f5c\u4e32\u8054\u8d77\u6765\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/","title":"\u603b\u7ed3\u00b6","text":"<p>TorchVision \u662f PyTorch \u7528\u6237\u8fdb\u884c\u8ba1\u7b97\u673a\u89c6\u89c9\u9879\u76ee\u65f6\u7684\u6807\u914d\u5de5\u5177\u7bb1\uff0c\u5b83\u901a\u8fc7\u63d0\u4f9b\u5373\u63d2\u5373\u7528\u7684\u6570\u636e\u96c6\u3001\u6a21\u578b\u548c\u9884\u5904\u7406\u5de5\u5177\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\uff1a</p> <ol> <li>\u5feb\u901f\u542f\u52a8\u9879\u76ee: \u5229\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u548c\u6807\u51c6\u6570\u636e\u96c6\u5feb\u901f\u6784\u5efa\u539f\u578b\u3002</li> <li>\u4fdd\u8bc1\u6570\u636e\u5904\u7406\u4e00\u81f4\u6027: \u4f7f\u7528\u7edf\u4e00\u7684 <code>transforms</code> API \u8fdb\u884c\u6570\u636e\u9884\u5904\u7406\u3002</li> <li>\u8282\u7701\u8d44\u6e90: \u907f\u514d\u91cd\u590d\u5b9e\u73b0\u5e38\u89c1\u6a21\u578b\u7684\u4ee3\u7801\u3002</li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#transform","title":"transform\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#torchvisiontransforms","title":"<code>torchvision.transforms</code> \u4ecb\u7ecd\u00b6","text":"<p><code>torchvision.transforms</code> \u662f TorchVision \u5e93\u4e2d\u4e13\u95e8\u7528\u4e8e\u56fe\u50cf\u9884\u5904\u7406 (Preprocessing) \u548c\u6570\u636e\u589e\u5f3a (Data Augmentation) \u7684\u6838\u5fc3\u6a21\u5757\u3002</p> <p>\u5728\u5c06\u539f\u59cb\u56fe\u50cf\u6570\u636e\u9001\u5165\u795e\u7ecf\u7f51\u7edc\u4e4b\u524d\uff0c\u6211\u4eec\u51e0\u4e4e\u603b\u662f\u9700\u8981\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u8f6c\u6362\u64cd\u4f5c\uff0c\u800c <code>transforms</code> \u6a21\u5757\u5c31\u662f\u4e3a\u6b64\u8bbe\u8ba1\u7684\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/","title":"\u6838\u5fc3\u76ee\u7684\u00b6","text":"<ol> <li>\u7edf\u4e00\u8f93\u5165\u683c\u5f0f: \u5c06\u4e0d\u540c\u683c\u5f0f\u7684\u8f93\u5165\uff08\u5982 PIL Image, NumPy Array\uff09\u8f6c\u6362\u4e3a PyTorch \u6a21\u578b\u6240\u9700\u7684 <code>Tensor</code> \u683c\u5f0f\u3002</li> <li>\u6807\u51c6\u5316: \u5bf9\u50cf\u7d20\u503c\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u4f7f\u5176\u5747\u503c\u63a5\u8fd1 0\u3001\u6807\u51c6\u5dee\u63a5\u8fd1 1\uff0c\u6709\u52a9\u4e8e\u6a21\u578b\u8bad\u7ec3\u6536\u655b\u3002</li> <li>\u6570\u636e\u589e\u5f3a: \u901a\u8fc7\u968f\u673a\u53d8\u6362\uff08\u5982\u88c1\u526a\u3001\u7ffb\u8f6c\u3001\u65cb\u8f6c\uff09\uff0c\u589e\u52a0\u8bad\u7ec3\u6570\u636e\u7684\u591a\u6837\u6027\uff0c\u4ece\u800c\u63d0\u9ad8\u6a21\u578b\u7684\u6cdb\u5316\u80fd\u529b\uff0c\u51cf\u5c11\u8fc7\u62df\u5408\u3002</li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/","title":"\u5e38\u89c1\u64cd\u4f5c\u5206\u7c7b\u53ca\u793a\u4f8b\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#1-normalization-format","title":"1. \u57fa\u7840\u8f6c\u6362 (Normalization &amp; Format)\u00b6","text":"\u8f6c\u6362\u65b9\u6cd5 \u4f5c\u7528 \u76ee\u7684 <code>ToTensor()</code> \u5c06 PIL Image \u6216 NumPy <code>ndarray</code> \u8f6c\u6362\u4e3a <code>FloatTensor</code>\u3002 \u5fc5\u987b\u7684\u64cd\u4f5c\uff0c\u5c06\u6570\u636e\u8f6c\u6362\u4e3a\u6a21\u578b\u80fd\u5904\u7406\u7684 PyTorch \u5f20\u91cf\u3002 <code>Normalize(mean, std)</code> \u6839\u636e\u7ed9\u5b9a\u7684\u5747\u503c\u548c\u6807\u51c6\u5dee\u5bf9 Tensor \u8fdb\u884c\u6807\u51c6\u5316\u3002 \u5c06\u50cf\u7d20\u503c\u7f29\u653e\u5230\u4e00\u4e2a\u5408\u9002\u7684\u8303\u56f4\uff0c\u52a0\u901f\u6a21\u578b\u6536\u655b\u3002 <code>Resize(size)</code> \u5c06\u8f93\u5165\u56fe\u50cf\u8c03\u6574\u5230\u6307\u5b9a\u7684\u5c3a\u5bf8\u3002 \u786e\u4fdd\u6240\u6709\u8f93\u5165\u56fe\u50cf\u5c3a\u5bf8\u7edf\u4e00\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#2-augmentation","title":"2. \u6570\u636e\u589e\u5f3a (Augmentation)\u00b6","text":"\u8f6c\u6362\u65b9\u6cd5 \u4f5c\u7528 \u76ee\u7684 <code>RandomCrop(size)</code> \u4ece\u56fe\u50cf\u4e2d\u968f\u673a\u88c1\u526a\u4e00\u5757\u6307\u5b9a\u5927\u5c0f\u7684\u533a\u57df\u3002 \u589e\u52a0\u8bad\u7ec3\u6837\u672c\u7684\u591a\u6837\u6027\u548c\u5e73\u79fb\u4e0d\u53d8\u6027\u3002 <code>RandomHorizontalFlip(p=0.5)</code> \u4ee5\u7ed9\u5b9a\u7684\u6982\u7387\u6c34\u5e73\u968f\u673a\u7ffb\u8f6c\u56fe\u50cf\u3002 \u589e\u52a0\u6570\u636e\u7684\u5bf9\u79f0\u6027\u3002 <code>RandomRotation(degrees)</code> \u968f\u673a\u65cb\u8f6c\u56fe\u50cf\u4e00\u4e2a\u89d2\u5ea6\u8303\u56f4\u3002 \u589e\u52a0\u6a21\u578b\u7684\u65cb\u8f6c\u4e0d\u53d8\u6027\u3002 <code>ColorJitter(brightness=0.2, ...)</code> \u968f\u673a\u6539\u53d8\u56fe\u50cf\u7684\u4eae\u5ea6\u3001\u5bf9\u6bd4\u5ea6\u3001\u9971\u548c\u5ea6\u548c\u8272\u8c03\u3002 \u4f7f\u6a21\u578b\u5bf9\u5149\u7167\u53d8\u5316\u66f4\u5177\u9c81\u68d2\u6027\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#3","title":"3. \u7ec4\u5408\u64cd\u4f5c\u00b6","text":"\u8f6c\u6362\u65b9\u6cd5 \u4f5c\u7528 \u76ee\u7684 <code>Compose([...])</code> \u5c06\u591a\u4e2a\u8f6c\u6362\u64cd\u4f5c\u6309\u987a\u5e8f\u4e32\u8054\u8d77\u6765\u3002 \u8fd9\u662f\u6700\u5e38\u7528\u7684\u65b9\u6cd5\uff0c\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u5b8c\u6574\u7684\u9884\u5904\u7406\u6d41\u7a0b\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/#compose","title":"<code>Compose</code> \u793a\u4f8b (\u6807\u51c6\u7684\u9884\u5904\u7406\u6d41\u7a0b)\u00b6","text":"<p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f7f\u7528 <code>transforms.Compose</code> \u5c06\u591a\u4e2a\u64cd\u4f5c\u7ec4\u5408\u6210\u4e00\u4e2a\u6d41\u7a0b\uff1a</p> <pre>from torchvision import transforms\n\n# \u5b9a\u4e49\u4e00\u4e2a\u6807\u51c6\u7684\u9884\u5904\u7406\u6d41\u7a0b\ntransform = transforms.Compose([\n    # 1. \u8c03\u6574\u56fe\u50cf\u5c3a\u5bf8\u5230 256x256\n    transforms.Resize(256),  \n    \n    # 2. \u4ece 256x256 \u7684\u56fe\u50cf\u4e2d\u968f\u673a\u88c1\u526a 224x224 \u7684\u533a\u57df (\u7528\u4e8e\u6570\u636e\u589e\u5f3a)\n    transforms.RandomCrop(224), \n    \n    # 3. \u4ee5 50% \u7684\u6982\u7387\u6c34\u5e73\u7ffb\u8f6c\u56fe\u50cf (\u7528\u4e8e\u6570\u636e\u589e\u5f3a)\n    transforms.RandomHorizontalFlip(),\n    \n    # 4. \u5fc5\u987b\u64cd\u4f5c\uff1a\u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a PyTorch Tensor\n    transforms.ToTensor(),      \n    \n    # 5. \u5fc5\u987b\u64cd\u4f5c\uff1a\u8fdb\u884c\u6807\u51c6\u5316 (\u4f7f\u7528 ImageNet \u7684\u5747\u503c\u548c\u6807\u51c6\u5dee\u4f5c\u4e3a\u793a\u4f8b)\n    transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]) \n])\n\n# \u5047\u8bbe image \u662f\u4e00\u4e2a PIL \u56fe\u50cf\u5bf9\u8c61\n# processed_tensor = transform(image)\n</pre>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/","title":"\u603b\u7ed3\u00b6","text":"<p><code>torchvision.transforms</code> \u6a21\u5757\u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a\u6e05\u6670\u3001\u7075\u6d3b\u7684 API\uff0c\u4f7f\u5f97\u6df1\u5ea6\u5b66\u4e60\u5de5\u7a0b\u5e08\u53ef\u4ee5\u65b9\u4fbf\u5730\uff1a</p> <ul> <li>\u6784\u5efa\u6a21\u578b\u6240\u9700\u7684\u8f93\u5165\u5f20\u91cf\u3002</li> <li>\u5e94\u7528\u5404\u79cd\u6570\u636e\u589e\u5f3a\u6280\u672f\u6765\u6539\u8fdb\u6a21\u578b\u6027\u80fd\u548c\u9c81\u68d2\u6027\u3002</li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/test_transfrom/","title":"Test transfrom","text":"In\u00a0[\u00a0]: Copied! <pre>from PIL import Image\nfrom torchvision import transforms\n</pre> from PIL import Image from torchvision import transforms In\u00a0[\u00a0]: Copied! <pre>img_path = 'dataset/train/ants/0013035.jpg'\nimg = Image.open(img_path)\nprint(type(img))\n</pre> img_path = 'dataset/train/ants/0013035.jpg' img = Image.open(img_path) print(type(img)) In\u00a0[\u00a0]: Copied! <pre>tensor_trans = transforms.ToTensor()\nimg_tensor = tensor_trans(img)\nprint(type(img_tensor))\n</pre> tensor_trans = transforms.ToTensor() img_tensor = tensor_trans(img) print(type(img_tensor))"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/","title":"transform","text":"<p>\u8be6\u89c1Pytorch\u5b98\u65b9Transformers</p> In\u00a0[1]: Copied! <pre>from torchvision import transforms\n</pre> from torchvision import transforms In\u00a0[2]: Copied! <pre># \u8f6c\u6362\u56fe\u7247\nfrom PIL import Image\nfrom torchvision import transforms\n</pre> # \u8f6c\u6362\u56fe\u7247 from PIL import Image from torchvision import transforms In\u00a0[3]: Copied! <pre>img_path = 'dataset/train/ants/0013035.jpg'\nimg = Image.open(img_path)\nprint(type(img))\n</pre> img_path = 'dataset/train/ants/0013035.jpg' img = Image.open(img_path) print(type(img)) <pre>&lt;class 'PIL.JpegImagePlugin.JpegImageFile'&gt;\n</pre> In\u00a0[4]: Copied! <pre>tensor_trans = transforms.ToTensor() #\u5b9e\u4f8b\u5316\u7c7b\nimg_tensor = tensor_trans(img) #\u8c03\u7528\u7c7b(\u5c31\u662f\u8c03\u7528__call__\u51fd\u6570)\nprint(type(img_tensor))\n</pre> tensor_trans = transforms.ToTensor() #\u5b9e\u4f8b\u5316\u7c7b img_tensor = tensor_trans(img) #\u8c03\u7528\u7c7b(\u5c31\u662f\u8c03\u7528__call__\u51fd\u6570) print(type(img_tensor)) <pre>&lt;class 'torch.Tensor'&gt;\n</pre> In\u00a0[5]: Copied! <pre>print(img_tensor)\n</pre> print(img_tensor) <pre>tensor([[[0.3137, 0.3137, 0.3137,  ..., 0.3176, 0.3098, 0.2980],\n         [0.3176, 0.3176, 0.3176,  ..., 0.3176, 0.3098, 0.2980],\n         [0.3216, 0.3216, 0.3216,  ..., 0.3137, 0.3098, 0.3020],\n         ...,\n         [0.3412, 0.3412, 0.3373,  ..., 0.1725, 0.3725, 0.3529],\n         [0.3412, 0.3412, 0.3373,  ..., 0.3294, 0.3529, 0.3294],\n         [0.3412, 0.3412, 0.3373,  ..., 0.3098, 0.3059, 0.3294]],\n\n        [[0.5922, 0.5922, 0.5922,  ..., 0.5961, 0.5882, 0.5765],\n         [0.5961, 0.5961, 0.5961,  ..., 0.5961, 0.5882, 0.5765],\n         [0.6000, 0.6000, 0.6000,  ..., 0.5922, 0.5882, 0.5804],\n         ...,\n         [0.6275, 0.6275, 0.6235,  ..., 0.3608, 0.6196, 0.6157],\n         [0.6275, 0.6275, 0.6235,  ..., 0.5765, 0.6275, 0.5961],\n         [0.6275, 0.6275, 0.6235,  ..., 0.6275, 0.6235, 0.6314]],\n\n        [[0.9137, 0.9137, 0.9137,  ..., 0.9176, 0.9098, 0.8980],\n         [0.9176, 0.9176, 0.9176,  ..., 0.9176, 0.9098, 0.8980],\n         [0.9216, 0.9216, 0.9216,  ..., 0.9137, 0.9098, 0.9020],\n         ...,\n         [0.9294, 0.9294, 0.9255,  ..., 0.5529, 0.9216, 0.8941],\n         [0.9294, 0.9294, 0.9255,  ..., 0.8863, 1.0000, 0.9137],\n         [0.9294, 0.9294, 0.9255,  ..., 0.9490, 0.9804, 0.9137]]])\n</pre> In\u00a0[1]: Copied! <pre>print(img_tensor.shape)\n</pre> print(img_tensor.shape) <pre>\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\nCell In[1], line 1\n----&gt; 1 print(img_tensor.shape)\n\nNameError: name 'img_tensor' is not defined</pre> <p>\u8bf4\u660e\uff1a\u7ef4\u5ea60 \u6df1\u5ea6\uff08\u901a\u9053\u6570\uff09\uff1b\u7ef4\u5ea61 \u884c\u6570\uff08\u9ad8\uff09\uff0c\u7ef4\u5ea62 \u5217\u6570\uff08\u5bbd\uff09</p> In\u00a0[4]: Copied! <pre>import torch\nfrom torchvision import datasets\nfrom torchvision.transforms import ToTensor, Lambda\n# \u5c06\u7279\u5f81\u8f6c\u6362\u4e3a\u5f52\u4e00\u5316\u7684\u5f20\u91cf\uff0c\u5e76\u5c06\u6807\u7b7e\u8f6c\u6362\u4e3a\u72ec\u70ed\u7f16\u7801\u7684\u5f20\u91cf\nds = datasets.FashionMNIST(\n    root=\"data\",\n    train=True,\n    download=True,\n    transform=ToTensor(),\n    # \u628a\u8f93\u5165\u7684y\u5217\u8868\u5bf9\u5e94\u7684\u4f4d\u7f6e\u90fd\u5199 1\uff0c\u5176\u4ed6\u5219\u4e3a 0\uff0c\u5e76\u7edf\u4e00\u957f\u5ea6\u4e3a 10\n    target_transform=Lambda(lambda y: torch.zeros(10, dtype=torch.float).scatter_(0, torch.tensor(y), value=1)) #y should be Python List\n)\n</pre> import torch from torchvision import datasets from torchvision.transforms import ToTensor, Lambda # \u5c06\u7279\u5f81\u8f6c\u6362\u4e3a\u5f52\u4e00\u5316\u7684\u5f20\u91cf\uff0c\u5e76\u5c06\u6807\u7b7e\u8f6c\u6362\u4e3a\u72ec\u70ed\u7f16\u7801\u7684\u5f20\u91cf ds = datasets.FashionMNIST(     root=\"data\",     train=True,     download=True,     transform=ToTensor(),     # \u628a\u8f93\u5165\u7684y\u5217\u8868\u5bf9\u5e94\u7684\u4f4d\u7f6e\u90fd\u5199 1\uff0c\u5176\u4ed6\u5219\u4e3a 0\uff0c\u5e76\u7edf\u4e00\u957f\u5ea6\u4e3a 10     target_transform=Lambda(lambda y: torch.zeros(10, dtype=torch.float).scatter_(0, torch.tensor(y), value=1)) #y should be Python List ) <p>\u8fd9\u6bb5\u4ee3\u7801\u4e2d\u7684 <code>target_transform</code> \u90e8\u5206\u662f PyTorch \u6570\u636e\u9884\u5904\u7406\u4e2d\u4e00\u4e2a\u7b80\u6d01\u4e14\u9ad8\u6548\u7684\u6280\u5de7\uff0c\u5b83\u5b9e\u73b0\u4e86\u5c06\u6807\u91cf\u6807\u7b7e\uff08\u7c7b\u522b ID\uff09\u8f6c\u6362\u4e3a\u72ec\u70ed\u7f16\u7801 (One-Hot Encoding)\u3002</p> <p>\u8ba9\u6211\u4eec\u628a\u8fd9\u6bb5\u4ee3\u7801\u62c6\u89e3\u5f00\u6765\uff0c\u4e00\u6b65\u6b65\u8be6\u7ec6\u89e3\u91ca\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#torchvision","title":"\ud83d\uddbc\ufe0f TorchVision \u4ecb\u7ecd\u00b6","text":"<p>TorchVision \u662f PyTorch \u5b98\u65b9\u652f\u6301\u7684\u3001\u4e13\u95e8\u7528\u4e8e\u8ba1\u7b97\u673a\u89c6\u89c9 (Computer Vision) \u4efb\u52a1\u7684\u5e93\u3002\u5b83\u662f PyTorch \u751f\u6001\u7cfb\u7edf\u4e2d\u4e0d\u53ef\u6216\u7f3a\u7684\u4e00\u90e8\u5206\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86\u8ba1\u7b97\u673a\u89c6\u89c9\u7814\u7a76\u548c\u5e94\u7528\u7684\u5f00\u53d1\u8fc7\u7a0b\u3002</p> <p>TorchVision \u4e3b\u8981\u7531\u4e09\u4e2a\u6838\u5fc3\u6a21\u5757\u6784\u6210\uff0c\u5171\u540c\u4e3a\u89c6\u89c9\u4efb\u52a1\u63d0\u4f9b\u9ad8\u6548\u7684\u652f\u6301\uff1a</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#1-torchvisiondatasets","title":"1. <code>torchvision.datasets</code> (\u6570\u636e\u96c6)\u00b6","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u5927\u91cf\u9884\u5148\u51c6\u5907\u597d\u7684\u3001\u5e38\u7528\u7684\u516c\u5171\u6570\u636e\u96c6\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u548c\u4f7f\u7528\uff0c\u65e0\u9700\u81ea\u5df1\u7f16\u5199\u590d\u6742\u7684\u6570\u636e\u52a0\u8f7d\u4ee3\u7801\u3002</p> <ul> <li>\u6838\u5fc3\u529f\u80fd: \u65b9\u4fbf\u5730\u52a0\u8f7d\u6807\u51c6\u6570\u636e\u96c6\u8fdb\u884c\u8bad\u7ec3\u548c\u6d4b\u8bd5\u3002</li> <li>\u5e38\u89c1\u6570\u636e\u96c6\u793a\u4f8b:<ul> <li>Image Classification (\u56fe\u50cf\u5206\u7c7b): <code>MNIST</code>, <code>CIFAR10</code>, <code>ImageNet</code> (\u9700\u8981\u624b\u52a8\u4e0b\u8f7d\u548c\u7ec4\u7ec7\u6587\u4ef6)\u3002</li> <li>Object Detection (\u76ee\u6807\u68c0\u6d4b): <code>CocoDetection</code>, <code>Kitti</code>.</li> <li>Semantic Segmentation (\u8bed\u4e49\u5206\u5272): <code>VOCSegmentation</code>.</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#2-torchvisionmodels","title":"2. <code>torchvision.models</code> (\u9884\u8bad\u7ec3\u6a21\u578b)\u00b6","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u5927\u91cf\u9884\u8bad\u7ec3\u7684\u3001\u9ad8\u6027\u80fd\u7684\u795e\u7ecf\u7f51\u7edc\u6a21\u578b\u3002\u8fd9\u4e9b\u6a21\u578b\u901a\u5e38\u5728\u5927\u578b\u6570\u636e\u96c6\uff08\u5982 ImageNet\uff09\u4e0a\u8bad\u7ec3\u8fc7\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u4e8e\u7279\u5f81\u63d0\u53d6\u6216\u4f5c\u4e3a\u8fc1\u79fb\u5b66\u4e60 (Transfer Learning) \u7684\u8d77\u70b9\u3002</p> <ul> <li>\u6838\u5fc3\u529f\u80fd: \u5feb\u901f\u83b7\u53d6\u548c\u4f7f\u7528\u7ecf\u8fc7\u9a8c\u8bc1\u7684\u7ecf\u5178\u6216\u5148\u8fdb\u6a21\u578b\u3002</li> <li>\u5e38\u89c1\u6a21\u578b\u67b6\u6784\u793a\u4f8b:<ul> <li>Classification (\u5206\u7c7b): <code>ResNet</code> (\u5982 <code>resnet50</code>), <code>VGG</code>, <code>MobileNet</code>, <code>EfficientNet</code>.</li> <li>Object Detection (\u76ee\u6807\u68c0\u6d4b): <code>Faster R-CNN</code>, <code>SSD</code>, <code>RetinaNet</code>.</li> <li>Segmentation (\u5206\u5272): <code>FCN</code>, <code>DeepLabV3</code>.</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#3-torchvisiontransforms","title":"3. <code>torchvision.transforms</code> (\u6570\u636e\u53d8\u6362/\u9884\u5904\u7406)\u00b6","text":"<p>\u8fd9\u4e2a\u6a21\u5757\u63d0\u4f9b\u4e86\u5404\u79cd\u56fe\u50cf\u9884\u5904\u7406\u548c\u6570\u636e\u589e\u5f3a (Data Augmentation) \u64cd\u4f5c\u3002\u5728\u5c06\u539f\u59cb\u56fe\u50cf\u8f93\u5165\u5230\u795e\u7ecf\u7f51\u7edc\u4e4b\u524d\uff0c\u901a\u5e38\u9700\u8981\u8fdb\u884c\u8fd9\u4e9b\u5904\u7406\u3002</p> <ul> <li>\u6838\u5fc3\u529f\u80fd: \u5bf9 PIL Image \u6216 Tensor \u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u5982\u5c3a\u5bf8\u8c03\u6574\u3001\u88c1\u526a\u3001\u5f52\u4e00\u5316\u7b49\u3002</li> <li>\u5e38\u89c1\u64cd\u4f5c\u793a\u4f8b:<ul> <li><code>ToTensor()</code>: \u5c06 PIL Image \u6216 NumPy \u6570\u7ec4\u8f6c\u6362\u6210 PyTorch Tensor\u3002</li> <li><code>Normalize()</code>: \u5bf9 Tensor \u8fdb\u884c\u6807\u51c6\u5316\u5904\u7406 (\u51cf\u53bb\u5747\u503c\uff0c\u9664\u4ee5\u6807\u51c6\u5dee)\u3002</li> <li><code>Resize()</code>: \u6539\u53d8\u56fe\u50cf\u5c3a\u5bf8\u3002</li> <li><code>RandomCrop()</code>: \u968f\u673a\u88c1\u526a\uff0c\u7528\u4e8e\u6570\u636e\u589e\u5f3a\u3002</li> <li><code>Compose()</code>: \u5c06\u591a\u4e2a\u53d8\u6362\u64cd\u4f5c\u4e32\u8054\u8d77\u6765\u3002</li> </ul> </li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/","title":"\u603b\u7ed3\u00b6","text":"<p>TorchVision \u662f PyTorch \u7528\u6237\u8fdb\u884c\u8ba1\u7b97\u673a\u89c6\u89c9\u9879\u76ee\u65f6\u7684\u6807\u914d\u5de5\u5177\u7bb1\uff0c\u5b83\u901a\u8fc7\u63d0\u4f9b\u5373\u63d2\u5373\u7528\u7684\u6570\u636e\u96c6\u3001\u6a21\u578b\u548c\u9884\u5904\u7406\u5de5\u5177\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\uff1a</p> <ol> <li>\u5feb\u901f\u542f\u52a8\u9879\u76ee: \u5229\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u548c\u6807\u51c6\u6570\u636e\u96c6\u5feb\u901f\u6784\u5efa\u539f\u578b\u3002</li> <li>\u4fdd\u8bc1\u6570\u636e\u5904\u7406\u4e00\u81f4\u6027: \u4f7f\u7528\u7edf\u4e00\u7684 <code>transforms</code> API \u8fdb\u884c\u6570\u636e\u9884\u5904\u7406\u3002</li> <li>\u8282\u7701\u8d44\u6e90: \u907f\u514d\u91cd\u590d\u5b9e\u73b0\u5e38\u89c1\u6a21\u578b\u7684\u4ee3\u7801\u3002</li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#transform","title":"transform\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#torchvisiontransforms","title":"<code>torchvision.transforms</code> \u4ecb\u7ecd\u00b6","text":"<p><code>torchvision.transforms</code> \u662f TorchVision \u5e93\u4e2d\u4e13\u95e8\u7528\u4e8e\u56fe\u50cf\u9884\u5904\u7406 (Preprocessing) \u548c\u6570\u636e\u589e\u5f3a (Data Augmentation) \u7684\u6838\u5fc3\u6a21\u5757\u3002</p> <p>\u5728\u5c06\u539f\u59cb\u56fe\u50cf\u6570\u636e\u9001\u5165\u795e\u7ecf\u7f51\u7edc\u4e4b\u524d\uff0c\u6211\u4eec\u51e0\u4e4e\u603b\u662f\u9700\u8981\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u8f6c\u6362\u64cd\u4f5c\uff0c\u800c <code>transforms</code> \u6a21\u5757\u5c31\u662f\u4e3a\u6b64\u8bbe\u8ba1\u7684\u3002</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/","title":"\u6838\u5fc3\u76ee\u7684\u00b6","text":"<ol> <li>\u7edf\u4e00\u8f93\u5165\u683c\u5f0f: \u5c06\u4e0d\u540c\u683c\u5f0f\u7684\u8f93\u5165\uff08\u5982 PIL Image, NumPy Array\uff09\u8f6c\u6362\u4e3a PyTorch \u6a21\u578b\u6240\u9700\u7684 <code>Tensor</code> \u683c\u5f0f\u3002</li> <li>\u6807\u51c6\u5316: \u5bf9\u50cf\u7d20\u503c\u8fdb\u884c\u5f52\u4e00\u5316\uff0c\u4f7f\u5176\u5747\u503c\u63a5\u8fd1 0\u3001\u6807\u51c6\u5dee\u63a5\u8fd1 1\uff0c\u6709\u52a9\u4e8e\u6a21\u578b\u8bad\u7ec3\u6536\u655b\u3002</li> <li>\u6570\u636e\u589e\u5f3a: \u901a\u8fc7\u968f\u673a\u53d8\u6362\uff08\u5982\u88c1\u526a\u3001\u7ffb\u8f6c\u3001\u65cb\u8f6c\uff09\uff0c\u589e\u52a0\u8bad\u7ec3\u6570\u636e\u7684\u591a\u6837\u6027\uff0c\u4ece\u800c\u63d0\u9ad8\u6a21\u578b\u7684\u6cdb\u5316\u80fd\u529b\uff0c\u51cf\u5c11\u8fc7\u62df\u5408\u3002</li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/","title":"\u5e38\u89c1\u64cd\u4f5c\u5206\u7c7b\u53ca\u793a\u4f8b\u00b6","text":""},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#1-normalization-format","title":"1. \u57fa\u7840\u8f6c\u6362 (Normalization &amp; Format)\u00b6","text":"\u8f6c\u6362\u65b9\u6cd5 \u4f5c\u7528 \u76ee\u7684 <code>ToTensor()</code> \u5c06 PIL Image \u6216 NumPy <code>ndarray</code> \u8f6c\u6362\u4e3a <code>FloatTensor</code>\u3002 \u5fc5\u987b\u7684\u64cd\u4f5c\uff0c\u5c06\u6570\u636e\u8f6c\u6362\u4e3a\u6a21\u578b\u80fd\u5904\u7406\u7684 PyTorch \u5f20\u91cf\u3002 <code>Normalize(mean, std)</code> \u6839\u636e\u7ed9\u5b9a\u7684\u5747\u503c\u548c\u6807\u51c6\u5dee\u5bf9 Tensor \u8fdb\u884c\u6807\u51c6\u5316\u3002 \u5c06\u50cf\u7d20\u503c\u7f29\u653e\u5230\u4e00\u4e2a\u5408\u9002\u7684\u8303\u56f4\uff0c\u52a0\u901f\u6a21\u578b\u6536\u655b\u3002 <code>Resize(size)</code> \u5c06\u8f93\u5165\u56fe\u50cf\u8c03\u6574\u5230\u6307\u5b9a\u7684\u5c3a\u5bf8\u3002 \u786e\u4fdd\u6240\u6709\u8f93\u5165\u56fe\u50cf\u5c3a\u5bf8\u7edf\u4e00\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#2-augmentation","title":"2. \u6570\u636e\u589e\u5f3a (Augmentation)\u00b6","text":"\u8f6c\u6362\u65b9\u6cd5 \u4f5c\u7528 \u76ee\u7684 <code>RandomCrop(size)</code> \u4ece\u56fe\u50cf\u4e2d\u968f\u673a\u88c1\u526a\u4e00\u5757\u6307\u5b9a\u5927\u5c0f\u7684\u533a\u57df\u3002 \u589e\u52a0\u8bad\u7ec3\u6837\u672c\u7684\u591a\u6837\u6027\u548c\u5e73\u79fb\u4e0d\u53d8\u6027\u3002 <code>RandomHorizontalFlip(p=0.5)</code> \u4ee5\u7ed9\u5b9a\u7684\u6982\u7387\u6c34\u5e73\u968f\u673a\u7ffb\u8f6c\u56fe\u50cf\u3002 \u589e\u52a0\u6570\u636e\u7684\u5bf9\u79f0\u6027\u3002 <code>RandomRotation(degrees)</code> \u968f\u673a\u65cb\u8f6c\u56fe\u50cf\u4e00\u4e2a\u89d2\u5ea6\u8303\u56f4\u3002 \u589e\u52a0\u6a21\u578b\u7684\u65cb\u8f6c\u4e0d\u53d8\u6027\u3002 <code>ColorJitter(brightness=0.2, ...)</code> \u968f\u673a\u6539\u53d8\u56fe\u50cf\u7684\u4eae\u5ea6\u3001\u5bf9\u6bd4\u5ea6\u3001\u9971\u548c\u5ea6\u548c\u8272\u8c03\u3002 \u4f7f\u6a21\u578b\u5bf9\u5149\u7167\u53d8\u5316\u66f4\u5177\u9c81\u68d2\u6027\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#3","title":"3. \u7ec4\u5408\u64cd\u4f5c\u00b6","text":"\u8f6c\u6362\u65b9\u6cd5 \u4f5c\u7528 \u76ee\u7684 <code>Compose([...])</code> \u5c06\u591a\u4e2a\u8f6c\u6362\u64cd\u4f5c\u6309\u987a\u5e8f\u4e32\u8054\u8d77\u6765\u3002 \u8fd9\u662f\u6700\u5e38\u7528\u7684\u65b9\u6cd5\uff0c\u7528\u4e8e\u5b9a\u4e49\u4e00\u4e2a\u5b8c\u6574\u7684\u9884\u5904\u7406\u6d41\u7a0b\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#compose","title":"<code>Compose</code> \u793a\u4f8b (\u6807\u51c6\u7684\u9884\u5904\u7406\u6d41\u7a0b)\u00b6","text":"<p>\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f7f\u7528 <code>transforms.Compose</code> \u5c06\u591a\u4e2a\u64cd\u4f5c\u7ec4\u5408\u6210\u4e00\u4e2a\u6d41\u7a0b\uff1a</p> <pre>from torchvision import transforms\n\n# \u5b9a\u4e49\u4e00\u4e2a\u6807\u51c6\u7684\u9884\u5904\u7406\u6d41\u7a0b\ntransform = transforms.Compose([\n    # 1. \u8c03\u6574\u56fe\u50cf\u5c3a\u5bf8\u5230 256x256\n    transforms.Resize(256),  \n    \n    # 2. \u4ece 256x256 \u7684\u56fe\u50cf\u4e2d\u968f\u673a\u88c1\u526a 224x224 \u7684\u533a\u57df (\u7528\u4e8e\u6570\u636e\u589e\u5f3a)\n    transforms.RandomCrop(224), \n    \n    # 3. \u4ee5 50% \u7684\u6982\u7387\u6c34\u5e73\u7ffb\u8f6c\u56fe\u50cf (\u7528\u4e8e\u6570\u636e\u589e\u5f3a)\n    transforms.RandomHorizontalFlip(),\n    \n    # 4. \u5fc5\u987b\u64cd\u4f5c\uff1a\u5c06\u56fe\u50cf\u8f6c\u6362\u4e3a PyTorch Tensor\n    transforms.ToTensor(),      \n    \n    # 5. \u5fc5\u987b\u64cd\u4f5c\uff1a\u8fdb\u884c\u6807\u51c6\u5316 (\u4f7f\u7528 ImageNet \u7684\u5747\u503c\u548c\u6807\u51c6\u5dee\u4f5c\u4e3a\u793a\u4f8b)\n    transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]) \n])\n\n# \u5047\u8bbe image \u662f\u4e00\u4e2a PIL \u56fe\u50cf\u5bf9\u8c61\n# processed_tensor = transform(image)\n</pre>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/","title":"\u603b\u7ed3\u00b6","text":"<p><code>torchvision.transforms</code> \u6a21\u5757\u901a\u8fc7\u63d0\u4f9b\u4e00\u4e2a\u6e05\u6670\u3001\u7075\u6d3b\u7684 API\uff0c\u4f7f\u5f97\u6df1\u5ea6\u5b66\u4e60\u5de5\u7a0b\u5e08\u53ef\u4ee5\u65b9\u4fbf\u5730\uff1a</p> <ul> <li>\u6784\u5efa\u6a21\u578b\u6240\u9700\u7684\u8f93\u5165\u5f20\u91cf\u3002</li> <li>\u5e94\u7528\u5404\u79cd\u6570\u636e\u589e\u5f3a\u6280\u672f\u6765\u6539\u8fdb\u6a21\u578b\u6027\u80fd\u548c\u9c81\u68d2\u6027\u3002</li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#target-transform","title":"\u4ee3\u7801\u89e3\u6790\uff1a\u76ee\u6807\u8f6c\u6362 (Target Transform)\u00b6","text":"<pre>target_transform=Lambda(lambda y: torch.zeros(10, dtype=torch.float).scatter_(0, torch.tensor(y), value=1))\n</pre>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#1-lambda","title":"1. <code>Lambda(...)</code> \u7684\u4f5c\u7528\u00b6","text":"<ul> <li>\u56de\u987e\uff1a <code>Lambda</code> \u662f <code>torchvision.transforms</code> \u6a21\u5757\u4e2d\u7684\u4e00\u4e2a\u7c7b\uff0c\u5b83\u5141\u8bb8\u60a8\u5c06\u4efb\u4f55 \u81ea\u5b9a\u4e49\u7684\u3001\u5355\u884c\u53ef\u6267\u884c\u7684\u51fd\u6570 \u5c01\u88c5\u6210\u4e00\u4e2a\u8f6c\u6362\u64cd\u4f5c\u3002</li> <li>\u8f93\u5165\uff1a \u8fd9\u91cc\u7684 <code>Lambda</code> \u63a5\u6536\u4e00\u4e2a\u533f\u540d\u51fd\u6570 <code>lambda y: ...</code>\u3002</li> <li><code>y</code>\uff1a \u5728 FashionMNIST \u6570\u636e\u96c6\u4e2d\uff0c<code>y</code> \u5c31\u662f\u5f53\u524d\u7684\u76ee\u6807\u6807\u7b7e (Target Label)\uff0c\u5b83\u662f\u4e00\u4e2a\u8868\u793a\u7c7b\u522b\u7d22\u5f15\u7684 \u6574\u6570\u6807\u91cf\uff08\u4f8b\u5982\uff1aT\u6064\u886b\u662f <code>0</code>\uff0c\u88e4\u5b50\u662f <code>1</code>\uff0c\u978b\u5b50\u662f <code>9</code>\uff09\u3002</li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#2-lambda","title":"2. Lambda \u51fd\u6570\u4f53\uff1a\u6838\u5fc3\u7684\u72ec\u70ed\u7f16\u7801\u903b\u8f91\u00b6","text":"<p>Lambda \u51fd\u6570\u4f53\u6267\u884c\u4e86\u4e09\u4e2a\u6b65\u9aa4\u6765\u5b8c\u6210\u72ec\u70ed\u7f16\u7801\uff1a</p>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#a","title":"A. \u521b\u5efa\u4e00\u4e2a\u5168\u96f6\u5411\u91cf (\u5bb9\u5668)\u00b6","text":"<pre>torch.zeros(10, dtype=torch.float)\n</pre> <ul> <li><code>torch.zeros(10, ...)</code>\uff1a \u521b\u5efa\u4e00\u4e2a\u5305\u542b 10 \u4e2a\u5143\u7d20\u7684 \u4e00\u7ef4\u96f6\u5f20\u91cf\u3002<ul> <li>\u4e3a\u4ec0\u4e48\u662f 10\uff1f\u56e0\u4e3a FashionMNIST \u6570\u636e\u96c6\u6709 10 \u4e2a\u7c7b\u522b\u3002</li> <li>\u8fd9\u4e2a\u5f20\u91cf\u5c31\u662f\u6211\u4eec\u6700\u7ec8\u7684\u72ec\u70ed\u7f16\u7801\u5bb9\u5668\uff0c\u5f62\u72b6\u662f <code>(10,)</code>\u3002</li> </ul> </li> <li><code>dtype=torch.float</code>\uff1a \u786e\u4fdd\u5f20\u91cf\u7684\u6570\u636e\u7c7b\u578b\u662f\u6d6e\u70b9\u6570\uff0c\u8fd9\u901a\u5e38\u662f\u6df1\u5ea6\u5b66\u4e60\u4e2d\u635f\u5931\u51fd\u6570\uff08\u5982\u4ea4\u53c9\u71b5\u635f\u5931\uff09\u6240\u8981\u6c42\u7684\u8f93\u5165\u683c\u5f0f\u3002</li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#b-scatter_","title":"B. \u6838\u5fc3\u64cd\u4f5c\uff1a<code>.scatter_()</code>\u00b6","text":"<p>\u8fd9\u4e2a\u64cd\u4f5c\u662f\u5b9e\u73b0\u72ec\u70ed\u7f16\u7801\u7684\u5173\u952e\u3002\u5b83\u5c06\u4e00\u4e2a\u6570\u503c \u5206\u6563 (scatter) \u5199\u5165\u76ee\u6807\u5f20\u91cf\u7684\u6307\u5b9a\u7d22\u5f15\u4f4d\u7f6e\u3002</p> <ul> <li>\u64cd\u4f5c\u5bf9\u8c61\uff1a \u521a\u624d\u521b\u5efa\u7684\u90a3\u4e2a\u5168\u96f6\u5f20\u91cf\u3002</li> <li>\u8bed\u6cd5\u56de\u987e\uff1a <code>target.scatter_(dim, index, value)</code></li> </ul>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#c-scatter_","title":"C. \u7406\u89e3 <code>.scatter_()</code> \u7684\u53c2\u6570\u00b6","text":"\u53c2\u6570 \u8868\u8fbe\u5f0f \u5b9e\u9645\u503c (\u5047\u8bbe $y=3$) \u4f5c\u7528 <code>dim</code> <code>0</code> <code>0</code> \u5206\u6563\u7ef4\u5ea6\uff1a \u56e0\u4e3a\u76ee\u6807\u5f20\u91cf\u662f 1 \u7ef4\u7684 <code>(10,)</code>\uff0c\u6240\u4ee5\u53ea\u6709 <code>dim=0</code> \u53ef\u9009\u3002\u64cd\u4f5c\u5c06\u6cbf\u7740\u8fd9\u4e2a\u552f\u4e00\u7684\u7ef4\u5ea6\u8fdb\u884c\u3002 <code>index</code> <code>torch.tensor(y)</code> <code>torch.tensor(3)</code> \u7d22\u5f15\u5f20\u91cf\uff1a <code>y</code> \u662f\u4e00\u4e2a Python \u6574\u6570\uff08\u5982 3\uff09\uff0c\u4f46 <code>.scatter_</code> \u8981\u6c42\u7d22\u5f15\u5fc5\u987b\u662f PyTorch \u5f20\u91cf\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5c06\u5176\u5305\u88c5\u6210\u4e00\u4e2a\u5355\u5143\u7d20\u5f20\u91cf\u3002 <code>value</code> <code>value=1</code> <code>1</code> \u5199\u5165\u503c\uff1a \u8981\u5199\u5165\u5230\u76ee\u6807\u5f20\u91cf\u6307\u5b9a\u4f4d\u7f6e\u7684\u503c\u3002\u72ec\u70ed\u7f16\u7801\u8981\u6c42\u5c06\u5bf9\u5e94\u7c7b\u522b\u4f4d\u7f6e\u7684\u503c\u8bbe\u7f6e\u4e3a 1\u3002"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/#3-y3","title":"3. \u5b8c\u6574\u8fc7\u7a0b\u6f14\u793a\uff08\u5047\u8bbe $y=3$\uff09\u00b6","text":"<p>\u5047\u8bbe\u5f53\u524d\u6837\u672c\u7684\u6807\u7b7e $y=3$\uff08\u5373\u7b2c 4 \u4e2a\u7c7b\u522b\uff09\uff1a</p> <ol> <li><p>\u521d\u59cb\u96f6\u5f20\u91cf (Target): $$T = [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]$$ (\u5f62\u72b6 $(10$, $)$)</p> </li> <li><p>\u7d22\u5f15\u5f20\u91cf (Index): $$I = [3]$$ (\u5f62\u72b6 $(1$, $)$)</p> </li> <li><p>\u6267\u884c <code>.scatter_(0, I, value=1)</code>: \u8fd9\u4e2a\u64cd\u4f5c\u610f\u5473\u7740\uff1a\u5c06\u503c <code>1</code> \u5199\u5165\u5230 $T$ \u4e2d\uff0c\u4f4d\u7f6e\u7531 $I$ \u6307\u5b9a\uff0c\u6cbf\u7740 $dim=0$\u3002</p> <ul> <li>$T[I[0]] = 1$</li> <li>$T[3] = 1$</li> </ul> </li> <li><p>\u6700\u7ec8\u72ec\u70ed\u7f16\u7801\u7ed3\u679c: $$T_{final} = [0., 0., 0., 1., 0., 0., 0., 0., 0., 0.]$$</p> </li> </ol>"},{"location":"%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/Pytorch_Learning/transfrom/","title":"\u603b\u7ed3\uff1a\u8fd9\u6bb5\u4ee3\u7801\u7684\u610f\u4e49\u00b6","text":"<p>\u8fd9\u6bb5 <code>target_transform</code> \u4ee3\u7801\u7684\u76ee\u7684\u662f\u5c06\u539f\u59cb\u7684 \u6574\u6570\u7c7b\u522b\u6807\u7b7e\uff08\u5982 <code>3</code>\uff09\u8f6c\u6362\u6210 \u957f\u5ea6\u4e3a\u7c7b\u522b\u603b\u6570 (10) \u7684\u5411\u91cf\uff0c\u5176\u4e2d\u53ea\u6709\u5bf9\u5e94\u7c7b\u522b\u7684\u7d22\u5f15\u4f4d\u7f6e\u4e3a <code>1</code>\uff0c\u5176\u4ed6\u4f4d\u7f6e\u4e3a <code>0</code>\u3002</p> <p>\u4e3a\u4ec0\u4e48\u9700\u8981\u8fd9\u6837\u505a\uff1f</p> <ul> <li>\u4ea4\u53c9\u71b5\u635f\u5931 (Cross-Entropy Loss)\uff1a \u5728 PyTorch \u4e2d\uff0c\u867d\u7136 <code>nn.CrossEntropyLoss</code> \u4f18\u5316\u5668\u53ef\u4ee5\u76f4\u63a5\u63a5\u6536\u6574\u6570 ID \u6807\u7b7e\uff0c\u4f46\u5f53\u6d89\u53ca\u5230\u5176\u4ed6\u7c7b\u578b\u7684\u635f\u5931\u51fd\u6570\u3001\u81ea\u5b9a\u4e49\u6fc0\u6d3b\u51fd\u6570\uff08\u5982 Sigmoid \u8f93\u51fa\uff09\u6216\u6267\u884c\u67d0\u4e9b\u7279\u6b8a\u7684\u68af\u5ea6\u8ba1\u7b97\u65f6\uff0c\u72ec\u70ed\u7f16\u7801 \u7684\u683c\u5f0f\uff08One-Hot Vector\uff09\u662f\u66f4\u901a\u7528\u548c\u6807\u51c6\u7684\u6807\u7b7e\u683c\u5f0f\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/","title":"\u7b80\u4ecb","text":"<p>\u672c\u7b14\u8bb0\u8bb0\u5f55\u5d4c\u5165\u5f0f\u5f00\u53d1\u65b9\u5411\u7684\u76f8\u5173\u5185\u5bb9\uff0c\u5927\u6982\u662f\u8f6f\u4ef6\u65b9\u5411\u5427\u3002\u5982\u679c\u4ee5\u540e\u6211\u6709\u5b66\u4e60\u786c\u4ef6\u518d\u6dfb\u52a0\u8fdb\u6765\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/#_1","title":"\u76ee\u5f55","text":"<p>\u672c\u5730\u4f7f\u7528\uff0c\u7f51\u7ad9\u4e0a\u4e0d\u8981\u7528\u6b64\u94fe\u63a5\u70b9\u3002 - ARM\u67b6\u6784/ARM\u67b6\u6784|ARM\u67b6\u6784\u7b80\u4ecb - STM32 HAL\u5e93/STM32 HAL\u5e93 - \u7535\u63a7\u7b97\u6cd5/\u7535\u63a7\u7b97\u6cd5 - \u901a\u4fe1\u534f\u8bae/\u901a\u4fe1\u534f\u8bae - \u89c6\u89c9/\u89c6\u89c9 - \u6c47\u7f16\u5165\u95e8/\u6c47\u7f16\u5165\u95e8|\u6c47\u7f16\u5165\u95e8 - RTOS/FreeRTOS/FreeRTOS|FreeRTOS</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/","title":"Cortex-M \u5904\u7406\u5668\u6838\u5fc3\u67b6\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_1","title":"\u6574\u4f53\u67b6\u6784\u6846\u56fe","text":"<pre><code>ARM Cortex-M \u5904\u7406\u5668\u6838\u5fc3\u67b6\u6784\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Cortex-M Processor Core                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Register Bank  \u2502     Pipeline Stages      \u2502  Memory Interface \u2502\n\u2502                 \u2502                         \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502    R0-R12   \u2502 \u2502 \u2502 Fetch\u2502\u2502Decode\u2502\u2502Execute\u2502 \u2502    AHB-Lite \u2502 \u2502\n\u2502 \u2502   General   \u2502 \u2502 \u2502     \u2502 \u2502     \u2502 \u2502     \u2502 \u2502      Bus IF   \u2502 \u2502\n\u2502 \u2502  Purpose    \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2502               \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502                         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                 \u2502\n\u2502 \u2502    R13      \u2502 \u2502 \u2502    NVIC             \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502   (SP)      \u2502 \u2502 \u2502  Nested Vectored    \u2502 \u2502 \u2502   MPU       \u2502 \u2502\n\u2502 \u2502  MSP/PSP    \u2502 \u2502 \u2502  Interrupt Ctrl     \u2502 \u2502 \u2502(Memory Prot \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502  Unit)      \u2502 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u2502    R14      \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                 \u2502\n\u2502 \u2502    (LR)     \u2502 \u2502 \u2502     SysTick Timer   \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502  Debug      \u2502 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                         \u2502 \u2502  Interface  \u2502 \u2502\n\u2502 \u2502    R15      \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u2502    (PC)     \u2502 \u2502 \u2502     FPU             \u2502 \u2502                 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 (Cortex-M4/M7 etc.) \u2502 \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502                 \u2502\n\u2502 \u2502   xPSR      \u2502 \u2502                         \u2502                 \u2502\n\u2502 \u2502(APSR+IPSR+  \u2502 \u2502                         \u2502                 \u2502\n\u2502 \u2502 EPSR)       \u2502 \u2502                         \u2502                 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_2","title":"\u5bc4\u5b58\u5668\u7ec4\u8be6\u7ec6\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_3","title":"\u5b8c\u6574\u7684\u5bc4\u5b58\u5668\u4f53\u7cfb","text":"<pre><code>Cortex-M \u5b8c\u6574\u5bc4\u5b58\u5668\u96c6\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     \u5bc4\u5b58\u5668\u7ec4 (Register Bank)                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502    \u901a\u7528\u5bc4\u5b58\u5668           \u2502        \u7279\u6b8a\u529f\u80fd\u5bc4\u5b58\u5668               \u2502\n\u2502   (16 \u00d7 32-bit)         \u2502      (Special Registers)          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 R0  - \u53c2\u6570/\u7ed3\u679c/\u4e34\u65f6    \u2502 xPSR - \u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668              \u2502\n\u2502 R1  - \u53c2\u6570/\u7ed3\u679c/\u4e34\u65f6    \u2502   \u251c\u2500 APSR (\u5e94\u7528\u72b6\u6001)              \u2502\n\u2502 R2  - \u53c2\u6570/\u7ed3\u679c/\u4e34\u65f6    \u2502   \u251c\u2500 IPSR (\u4e2d\u65ad\u72b6\u6001)              \u2502\n\u2502 R3  - \u53c2\u6570/\u7ed3\u679c/\u4e34\u65f6    \u2502   \u2514\u2500 EPSR (\u6267\u884c\u72b6\u6001)              \u2502\n\u2502 R4  - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502                                   \u2502\n\u2502 R5  - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502 PRIMASK   - \u4e2d\u65ad\u5c4f\u853d              \u2502\n\u2502 R6  - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502 FAULTMASK - \u6545\u969c\u5c4f\u853d              \u2502\n\u2502 R7  - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502 BASEPRI   - \u57fa\u672c\u4f18\u5148\u7ea7            \u2502\n\u2502 R8  - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502 CONTROL   - \u63a7\u5236\u5bc4\u5b58\u5668            \u2502\n\u2502 R9  - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502                                   \u2502\n\u2502 R10 - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502 MSP       - \u4e3b\u6808\u6307\u9488              \u2502\n\u2502 R11 - \u53d8\u91cf\u5bc4\u5b58\u5668        \u2502 PSP       - \u8fdb\u7a0b\u6808\u6307\u9488            \u2502\n\u2502 R12 - \u4e34\u65f6\u5bc4\u5b58\u5668        \u2502                                   \u2502\n\u2502 R13 - \u6808\u6307\u9488 (SP)       \u2502 NVIC\u5bc4\u5b58\u5668 - \u4e2d\u65ad\u63a7\u5236              \u2502\n\u2502 R14 - \u94fe\u63a5\u5bc4\u5b58\u5668 (LR)   \u2502 SCB\u5bc4\u5b58\u5668 - \u7cfb\u7edf\u63a7\u5236               \u2502\n\u2502 R15 - \u7a0b\u5e8f\u8ba1\u6570\u5668 (PC)   \u2502 MPU\u5bc4\u5b58\u5668 - \u5185\u5b58\u4fdd\u62a4               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_4","title":"\u5904\u7406\u5668\u6d41\u6c34\u7ebf\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_5","title":"\u4e09\u7ea7\u6d41\u6c34\u7ebf\u7ec6\u8282","text":"<pre><code>Cortex-M \u4e09\u7ea7\u6d41\u6c34\u7ebf\u8be6\u7ec6\u7ed3\u6784\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       3-Stage Pipeline                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u53d6\u6307\u9636\u6bb5   \u2502   \u8bd1\u7801\u9636\u6bb5   \u2502   \u6267\u884c\u9636\u6bb5   \u2502     \u5199\u56de\u9636\u6bb5     \u2502\n\u2502  (Fetch)    \u2502   (Decode)   \u2502  (Execute)   \u2502    (Write-back)  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                  \u2502\n\u2502 \u2502Instruction\u2502 \u2502 \u2502Register \u2502 \u2502 \u2502  ALU    \u2502 \u2502 \u5bc4\u5b58\u5668\u5199\u5165       \u2502\n\u2502 \u2502  Memory  \u2502 \u2502 \u2502  Read   \u2502 \u2502 \u2502(Arithmetic\u2502 \u2502 \u5185\u5b58\u5199\u5165        \u2502\n\u2502 \u2502          \u2502 \u2502 \u2502         \u2502 \u2502 \u2502 Logic Unit)\u2502 \u2502 \u5206\u652f\u89e3\u6790        \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502                  \u2502\n\u2502             \u2502              \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                  \u2502\n\u2502 PC \u2192 \u5730\u5740   \u2502 \u6307\u4ee4\u89e3\u7801     \u2502 \u2502 Address  \u2502 \u2502 \u7ed3\u679c\u5199\u56de\u5bc4\u5b58\u5668   \u2502\n\u2502 \u6307\u4ee4\u8bfb\u53d6    \u2502 \u5bc4\u5b58\u5668\u8bfb\u53d6   \u2502 \u2502Calculation\u2502 \u2502 \u6216\u5185\u5b58          \u2502\n\u2502 \u9884\u53d6\u6307\u7f13\u51b2  \u2502 \u4ea7\u751f\u63a7\u5236\u4fe1\u53f7 \u2502 \u2502  \u5355\u5143     \u2502 \u2502                  \u2502\n\u2502             \u2502              \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502                  \u2502\n\u2502 \u66f4\u65b0PC      \u2502              \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                  \u2502\n\u2502             \u2502              \u2502 \u2502 Memory   \u2502 \u2502                  \u2502\n\u2502             \u2502              \u2502 \u2502 Access   \u2502 \u2502                  \u2502\n\u2502             \u2502              \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_6","title":"\u5185\u5b58\u7cfb\u7edf\u67b6\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_7","title":"\u603b\u7ebf\u77e9\u9635\u548c\u5185\u5b58\u6620\u5c04","text":"<pre><code>Cortex-M \u5185\u5b58\u7cfb\u7edf\u67b6\u6784\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Cortex-M Memory System                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502    Code Memory  \u2502      SRAM/Data Memory    \u2502   Peripherals   \u2502\n\u2502   (Flash/ROM)   \u2502        (Internal)        \u2502    (AHB/APB)    \u2502\n\u2502                 \u2502                         \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502  Vector     \u2502 \u2502 \u2502  Stack      \u2502         \u2502 \u2502 GPIO        \u2502 \u2502\n\u2502 \u2502  Table      \u2502 \u2502 \u2502  Area       \u2502         \u2502 \u2502 UART        \u2502 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502             \u2502         \u2502 \u2502 SPI         \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2502 I2C         \u2502 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u2502 Timer       \u2502 \u2502\n\u2502 \u2502  Program    \u2502 \u2502 \u2502  Heap       \u2502         \u2502 \u2502 ADC/DAC     \u2502 \u2502\n\u2502 \u2502  Code       \u2502 \u2502 \u2502             \u2502         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502                 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502                 \u2502 \u2502  .data      \u2502         \u2502 \u2502 System      \u2502 \u2502\n\u2502                 \u2502 \u2502  Section    \u2502         \u2502 \u2502 Peripherals \u2502 \u2502\n\u2502                 \u2502 \u2502             \u2502         \u2502 \u2502 NVIC, SCB,  \u2502 \u2502\n\u2502                 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502         \u2502 \u2502 SysTick,    \u2502 \u2502\n\u2502                 \u2502 \u2502 \u2502 .bss    \u2502 \u2502         \u2502 \u2502 MPU, etc.   \u2502 \u2502\n\u2502                 \u2502 \u2502 \u2502 Section \u2502 \u2502         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502         \u2502                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   AHB-Lite      \u2502\n                    \u2502   Bus Matrix    \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   Cortex-M      \u2502\n                    \u2502   Processor     \u2502\n                    \u2502     Core        \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#nvic","title":"\u5d4c\u5957\u5411\u91cf\u4e2d\u65ad\u63a7\u5236\u5668 (NVIC)","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#nvic_1","title":"NVIC \u67b6\u6784","text":"<pre><code>NVIC (Nested Vectored Interrupt Controller) \u67b6\u6784\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         NVIC \u7ed3\u6784                           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u4e2d\u65ad\u4f18\u5148\u7ea7\u7ba1\u7406  \u2502     \u4e2d\u65ad\u60ac\u6302\u4e0e\u63a7\u5236       \u2502   \u5f02\u5e38\u5904\u7406       \u2502\n\u2502                 \u2502                         \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 \u4f18\u5148\u7ea7\u5bc4\u5b58\u5668 \u2502 \u2502 \u2502 \u60ac\u6302\u5bc4\u5b58\u5668  \u2502         \u2502 \u2502 \u5411\u91cf\u8868\u504f\u79fb  \u2502 \u2502\n\u2502 \u2502 PRIO0-PRIOx \u2502 \u2502 \u2502 PEND0-PENDx \u2502         \u2502 \u2502  \u5bc4\u5b58\u5668     \u2502 \u2502\n\u2502 \u2502   (8-bit    \u2502 \u2502 \u2502             \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502 \u2502  per IRQ)   \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u4f7f\u80fd\u5bc4\u5b58\u5668  \u2502         \u2502 \u2502 \u5f53\u524d\u4f18\u5148\u7ea7  \u2502 \u2502\n\u2502 \u2502 \u4f18\u5148\u7ea7\u5206\u7ec4  \u2502 \u2502 \u2502 EN0-ENx     \u2502         \u2502 \u2502  \u5bc4\u5b58\u5668     \u2502 \u2502\n\u2502 \u2502  \u5bc4\u5b58\u5668      \u2502 \u2502 \u2502             \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502                 \u2502\n\u2502                 \u2502 \u2502 \u6d3b\u52a8\u5bc4\u5b58\u5668  \u2502         \u2502                 \u2502\n\u2502                 \u2502 \u2502 ACT0-ACTx   \u2502         \u2502                 \u2502\n\u2502                 \u2502 \u2502             \u2502         \u2502                 \u2502\n\u2502                 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#scb-systick","title":"\u7cfb\u7edf\u63a7\u5236\u5757 (SCB) \u548c SysTick","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_8","title":"\u7cfb\u7edf\u63a7\u5236\u67b6\u6784","text":"<pre><code>\u7cfb\u7edf\u63a7\u5236\u5757 (SCB) \u548c SysTick \u5b9a\u65f6\u5668\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   System Control Block                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   CPUID\u5bc4\u5b58\u5668   \u2502     \u5f02\u5e38\u63a7\u5236\u5bc4\u5b58\u5668        \u2502   SysTick\u5b9a\u65f6\u5668  \u2502\n\u2502                 \u2502                         \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 \u5904\u7406\u5668\u8bc6\u522b   \u2502 \u2502 \u2502  SHPR2-3    \u2502         \u2502 \u2502 \u63a7\u5236\u548c\u72b6\u6001  \u2502 \u2502\n\u2502 \u2502  \u4fe1\u606f        \u2502 \u2502 \u2502 (\u7cfb\u7edf\u5904\u7406\u7a0b \u2502         \u2502 \u2502   \u5bc4\u5b58\u5668    \u2502 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502  \u5e8f\u4f18\u5148\u7ea7)  \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502   ICSR      \u2502 \u2502 \u2502  CCR        \u2502         \u2502 \u2502  \u91cd\u8f7d\u503c     \u2502 \u2502\n\u2502 \u2502(\u4e2d\u65ad\u63a7\u5236\u72b6\u6001)\u2502 \u2502 \u2502(\u914d\u7f6e\u548c\u63a7\u5236) \u2502         \u2502 \u2502  \u5bc4\u5b58\u5668     \u2502 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502             \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502  VTOR       \u2502 \u2502 \u2502  SHCSR      \u2502         \u2502 \u2502  \u5f53\u524d\u503c     \u2502 \u2502\n\u2502 \u2502(\u5411\u91cf\u8868\u504f\u79fb) \u2502 \u2502 \u2502(\u7cfb\u7edf\u5904\u7406\u7a0b \u2502         \u2502 \u2502  \u5bc4\u5b58\u5668     \u2502 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502 \u5e8f\u63a7\u5236\u72b6\u6001) \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#mpu","title":"\u5185\u5b58\u4fdd\u62a4\u5355\u5143 (MPU)","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#mpu_1","title":"MPU \u67b6\u6784","text":"<pre><code>MPU (Memory Protection Unit) \u5185\u5b58\u4fdd\u62a4\u67b6\u6784\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      MPU \u7ed3\u6784                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u533a\u57df\u5bc4\u5b58\u5668    \u2502      \u5c5e\u6027\u63a7\u5236            \u2502   \u6545\u969c\u68c0\u6d4b       \u2502\n\u2502   (8-16 regions)\u2502                         \u2502                 \u2502\n\u2502                 \u2502                         \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502  RBAR0-15   \u2502 \u2502 \u2502  MPU_CTRL   \u2502         \u2502 \u2502  MMAR       \u2502 \u2502\n\u2502 \u2502 (\u533a\u57df\u57fa\u5730\u5740) \u2502 \u2502 \u2502  (\u63a7\u5236)     \u2502         \u2502 \u2502(\u5185\u5b58\u7ba1\u7406\u5730\u5740)\u2502 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502             \u2502         \u2502 \u2502  \u5bc4\u5b58\u5668     \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502  RLAR0-15   \u2502 \u2502 \u2502  MPU_RNR    \u2502         \u2502 \u2502  BFAR       \u2502 \u2502\n\u2502 \u2502 (\u533a\u57df\u5c5e\u6027)   \u2502 \u2502 \u2502 (\u533a\u57df\u7f16\u53f7)  \u2502         \u2502 \u2502(\u603b\u7ebf\u6545\u969c\u5730\u5740)\u2502 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502             \u2502         \u2502 \u2502  \u5bc4\u5b58\u5668     \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502                 \u2502\n\u2502 \u2502 \u533a\u57df\u5927\u5c0f     \u2502 \u2502 \u2502  MPU_RASR  \u2502         \u2502                 \u2502\n\u2502 \u2502  \u548c\u5c5e\u6027      \u2502 \u2502 \u2502 (\u533a\u57df\u5c5e\u6027)  \u2502         \u2502                 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502             \u2502         \u2502                 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_9","title":"\u8c03\u8bd5\u7cfb\u7edf\u67b6\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#_10","title":"\u8c03\u8bd5\u63a5\u53e3\u548c\u7ec4\u4ef6","text":"<pre><code>Cortex-M \u8c03\u8bd5\u7cfb\u7edf\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Debug System                           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u8c03\u8bd5\u63a5\u53e3       \u2502      \u8c03\u8bd5\u7ec4\u4ef6            \u2502   \u8ddf\u8e2a\u5355\u5143       \u2502\n\u2502                 \u2502                         \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502   SWD       \u2502 \u2502 \u2502 \u65ad\u70b9\u5355\u5143     \u2502         \u2502 \u2502   ITM       \u2502 \u2502\n\u2502 \u2502 (Serial Wire\u2502 \u2502 \u2502 (FPB)       \u2502         \u2502 \u2502(\u6307\u4ee4\u8ddf\u8e2a)    \u2502 \u2502\n\u2502 \u2502   Debug)    \u2502 \u2502 \u2502             \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502   JTAG      \u2502 \u2502 \u2502 \u6570\u636e\u89c2\u5bdf\u70b9  \u2502         \u2502 \u2502   DWT       \u2502 \u2502\n\u2502 \u2502 (\u53ef\u9009)      \u2502 \u2502 \u2502  (DWT)      \u2502         \u2502 \u2502(\u6570\u636e\u8ddf\u8e2a)    \u2502 \u2502\n\u2502 \u2502             \u2502 \u2502 \u2502             \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502                 \u2502 \u2502 ROM\u8868       \u2502         \u2502 \u2502   ETM       \u2502 \u2502\n\u2502                 \u2502 \u2502 (\u8c03\u8bd5\u8bc6\u522b)  \u2502         \u2502 \u2502(\u5d4c\u5165\u5f0f\u8ddf\u8e2a)  \u2502 \u2502\n\u2502                 \u2502 \u2502             \u2502         \u2502 \u2502             \u2502 \u2502\n\u2502                 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#fpu-cortex-m4m7","title":"\u6d6e\u70b9\u5355\u5143 (FPU) - Cortex-M4/M7","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%20Cortex-M%20CPU%20%E6%9E%B6%E6%9E%84/#fpu","title":"FPU \u67b6\u6784","text":"<pre><code>\u6d6e\u70b9\u5355\u5143 (FPU) - \u53ef\u9009\u7ec4\u4ef6\uff1a\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Floating Point Unit (FPU)                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u6d6e\u70b9\u5bc4\u5b58\u5668\u6587\u4ef6  \u2502     \u6d6e\u70b9\u8fd0\u7b97\u5355\u5143          \u2502  \u6d6e\u70b9\u72b6\u6001\u548c\u63a7\u5236   \u2502\n\u2502                 \u2502                         \u2502                 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502   S0-S31    \u2502 \u2502 \u2502  \u6d6e\u70b9\u52a0\u6cd5\u5668  \u2502         \u2502 \u2502  FPSCR      \u2502 \u2502\n\u2502 \u2502 (32-bit     \u2502 \u2502 \u2502             \u2502         \u2502 \u2502(\u6d6e\u70b9\u72b6\u6001\u63a7\u5236)\u2502 \u2502\n\u2502 \u2502 \u5355\u7cbe\u5ea6)      \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502 \u2502  \u5bc4\u5b58\u5668     \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502  \u6d6e\u70b9\u4e58\u6cd5\u5668  \u2502         \u2502                 \u2502\n\u2502 \u2502  D0-D15     \u2502 \u2502 \u2502             \u2502         \u2502                 \u2502\n\u2502 \u2502 (64-bit     \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502                 \u2502\n\u2502 \u2502 \u53cc\u7cbe\u5ea6)      \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502                 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u6d6e\u70b9\u9664\u6cd5/    \u2502         \u2502                 \u2502\n\u2502                 \u2502 \u2502 \u5e73\u65b9\u6839\u5355\u5143   \u2502         \u2502                 \u2502\n\u2502                 \u2502 \u2502             \u2502         \u2502                 \u2502\n\u2502                 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/","title":"ARM \u67b6\u6784\u6982\u8ff0","text":"<ul> <li>\u4ec0\u4e48\u662fARM\uff1f<ul> <li>\u6838\u5fc3\u7279\u70b9</li> </ul> </li> <li>RISC\u67b6\u6784\u7b80\u4ecb<ul> <li>\u4ec0\u4e48\u662fRISC\uff1f</li> <li>RISC\u7684\u6838\u5fc3\u601d\u60f3</li> <li>RISC vs CISC \u5bf9\u6bd4</li> </ul> </li> <li>\u6838\u5fc3\u90e8\u4ef6\uff1a\u4e3b\u63a7\u3001\u5185\u5b58\u3001FLASH<ul> <li>1. \u4e3b\u63a7\u82af\u7247\uff08CPU\uff09 - \"\u5927\u8111\"</li> <li>2. \u5185\u5b58\uff08RAM\uff09 - \"\u5de5\u4f5c\u53f0\"</li> <li>3. FLASH\u5b58\u50a8 - \"\u6587\u4ef6\u67dc\"</li> </ul> </li> <li>\u4e09\u8005\u5982\u4f55\u534f\u540c\u5de5\u4f5c\uff1f<ul> <li>\u7b80\u5355\u6bd4\u55bb</li> <li>\u5b9e\u9645\u5de5\u4f5c\u6d41\u7a0b</li> </ul> </li> <li>\u8fd0\u7b97\u7684\u57fa\u672c\u539f\u7406<ul> <li>1. \u4e8c\u8fdb\u5236\u4e16\u754c</li> <li>2. \u57fa\u672c\u8fd0\u7b97\u8fc7\u7a0b</li> <li>3. \u6307\u4ee4\u6267\u884c\u6d41\u7a0b</li> <li>\u6307\u5411\u6307\u4ee4</li> </ul> </li> <li>\u4eceC\u4ee3\u7801\u5230CPU\u6267\u884c\u7684\u5b8c\u6574\u6d41\u7a0b<ul> <li>\u5b9e\u9645\u5e94\u7528\u4e3e\u4f8b<ul> <li>\u624b\u673a\u62cd\u7167\u8fc7\u7a0b</li> <li>\u6e38\u620f\u8fd0\u884c</li> </ul> </li> </ul> </li> <li>\u91cd\u8981\u6982\u5ff5\u603b\u7ed3</li> <li>\u5b66\u4e60</li> </ul> <p>\u53c2\u8003\uff1aCortex-M3\u6743\u5a01\u6307\u5357.pdf</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#arm","title":"\u4ec0\u4e48\u662fARM\uff1f","text":"<p>ARM\u662f\u4e00\u79cd\u5904\u7406\u5668\u67b6\u6784\uff0c\u5c31\u50cf\u6c7d\u8f66\u7684\u53d1\u52a8\u673a\u8bbe\u8ba1\u56fe\u3002ARM\u516c\u53f8\u53ea\u8bbe\u8ba1\"\u84dd\u56fe\"\uff0c\u5176\u4ed6\u516c\u53f8\uff08\u5982\u82f9\u679c\u3001\u9ad8\u901a\u3001\u4e09\u661f\uff09\u6839\u636e\u8fd9\u4e2a\u84dd\u56fe\u5236\u9020\u5b9e\u9645\u7684\u82af\u7247\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_1","title":"\u6838\u5fc3\u7279\u70b9","text":"<ul> <li>\u4f4e\u529f\u8017\uff1a\u975e\u5e38\u7701\u7535\uff0c\u9002\u5408\u624b\u673a\u3001\u5e73\u677f\u7b49\u79fb\u52a8\u8bbe\u5907</li> <li>\u9ad8\u6027\u4ef7\u6bd4\uff1a\u6027\u80fd\u8db3\u591f\u5f3a\uff0c\u6210\u672c\u76f8\u5bf9\u8f83\u4f4e</li> <li>\u5e7f\u6cdb\u5e94\u7528\uff1a\u4ece\u667a\u80fd\u624b\u8868\u5230\u670d\u52a1\u5668\u90fd\u5728\u4f7f\u7528</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#risc","title":"RISC\u67b6\u6784\u7b80\u4ecb","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#risc_1","title":"\u4ec0\u4e48\u662fRISC\uff1f","text":"<p>RISC\uff08\u7cbe\u7b80\u6307\u4ee4\u96c6\u8ba1\u7b97\u673a\uff09\u662f\u4e00\u79cd\u5904\u7406\u5668\u8bbe\u8ba1\u54f2\u5b66\uff0c\u4e0eCISC\uff08\u590d\u6742\u6307\u4ee4\u96c6\uff09\u76f8\u5bf9\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#risc_2","title":"RISC\u7684\u6838\u5fc3\u601d\u60f3","text":"<ul> <li>\u7b80\u5355\u6307\u4ee4\uff1a\u6bcf\u6761\u6307\u4ee4\u53ea\u5b8c\u6210\u4e00\u4e2a\u57fa\u672c\u64cd\u4f5c</li> <li>\u56fa\u5b9a\u957f\u5ea6\uff1a\u6307\u4ee4\u957f\u5ea6\u4e00\u81f4\uff0c\u89e3\u7801\u7b80\u5355</li> <li>Load-Store\u67b6\u6784\uff1a\u53ea\u6709\u4e13\u95e8\u7684\u52a0\u8f7d/\u5b58\u50a8\u6307\u4ee4\u53ef\u4ee5\u8bbf\u95ee\u5185\u5b58</li> <li>\u591a\u7528\u5bc4\u5b58\u5668\uff1a\u5927\u91cf\u901a\u7528\u5bc4\u5b58\u5668\u63d0\u9ad8\u6548\u7387</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#risc-vs-cisc","title":"RISC vs CISC \u5bf9\u6bd4","text":"\u7279\u6027 RISC (ARM) CISC (x86) \u6307\u4ee4\u6570\u91cf \u8f83\u5c11\uff0c\u7b80\u5355 \u5f88\u591a\uff0c\u590d\u6742 \u6307\u4ee4\u957f\u5ea6 \u56fa\u5b9a \u53ef\u53d8 \u5185\u5b58\u8bbf\u95ee \u53ea\u80fd\u901a\u8fc7Load/Store \u6307\u4ee4\u53ef\u76f4\u63a5\u64cd\u4f5c\u5185\u5b58 \u8bbe\u8ba1\u54f2\u5b66 \u786c\u4ef6\u7b80\u5355\uff0c\u7f16\u8bd1\u5668\u590d\u6742 \u786c\u4ef6\u590d\u6742\uff0c\u7f16\u8bd1\u5668\u7b80\u5355 \u529f\u8017 \u4f4e \u9ad8"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#flash","title":"\u6838\u5fc3\u90e8\u4ef6\uff1a\u4e3b\u63a7\u3001\u5185\u5b58\u3001FLASH","text":"<p>\u8be6\u89c1\uff1a - ARM Cortex-M CPU \u67b6\u6784</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#1-cpu-","title":"1. \u4e3b\u63a7\u82af\u7247\uff08CPU\uff09 - \"\u5927\u8111\"","text":"<p>\u4e3b\u63a7\u82af\u7247\u662f\u8bbe\u5907\u7684\"\u5927\u8111\"\uff0c\u8d1f\u8d23\u6240\u6709\u7684\u8ba1\u7b97\u548c\u63a7\u5236\u5de5\u4f5c\u3002</p> <p>\u4e3b\u8981\u529f\u80fd\uff1a - \u6267\u884c\u6570\u5b66\u8fd0\u7b97\uff081+1=2\uff09 - \u903b\u8f91\u5224\u65ad\uff08\u5982\u679c...\u90a3\u4e48...\uff09 - \u63a7\u5236\u5176\u4ed6\u90e8\u4ef6\uff08\u8ba9\u5c4f\u5e55\u663e\u793a\u3001\u8ba9\u5587\u53ed\u53d1\u58f0\uff09</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#2-ram-","title":"2. \u5185\u5b58\uff08RAM\uff09 - \"\u5de5\u4f5c\u53f0\"","text":"<p>\u5185\u5b58\u5c31\u50cf\u662f\u5de5\u4f5c\u65f6\u7684\"\u4e34\u65f6\u5de5\u4f5c\u53f0\"\u3002</p> <p>\u7279\u70b9\uff1a - \u901f\u5ea6\u5feb\uff1aCPU\u53ef\u4ee5\u5feb\u901f\u8bfb\u5199 - \u4e34\u65f6\u5b58\u50a8\uff1a\u65ad\u7535\u540e\u6570\u636e\u6d88\u5931 - \u7a7a\u95f4\u6709\u9650\uff1a\u540c\u65f6\u53ea\u80fd\u5904\u7406\u4e00\u5b9a\u91cf\u7684\u6570\u636e</p> <p>\u5de5\u4f5c\u65b9\u5f0f\uff1a</p> <pre><code>CPU \u4ece FLASH \u52a0\u8f7d\u7a0b\u5e8f \u2192 \u5728 \u5185\u5b58 \u4e2d\u8fd0\u884c\u7a0b\u5e8f \u2192 \u5904\u7406\u5b8c\u6210\u540e\u4fdd\u5b58\u7ed3\u679c\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#3-flash-","title":"3. FLASH\u5b58\u50a8 - \"\u6587\u4ef6\u67dc\"","text":"<p>FLASH\u5c31\u50cf\u662f\"\u6587\u4ef6\u67dc\"\uff0c\u7528\u4e8e\u957f\u671f\u4fdd\u5b58\u6570\u636e\u3002</p> <p>\u7279\u70b9\uff1a - \u6c38\u4e45\u5b58\u50a8\uff1a\u65ad\u7535\u540e\u6570\u636e\u4e0d\u4e22\u5931 - \u5bb9\u91cf\u8f83\u5927\uff1a\u53ef\u4ee5\u5b58\u50a8\u5f88\u591a\u7a0b\u5e8f\u548c\u6570\u636e - \u901f\u5ea6\u8f83\u6162\uff1a\u6bd4\u5185\u5b58\u8bfb\u5199\u6162</p> <p>\u5b58\u50a8\u5185\u5bb9\uff1a - \u64cd\u4f5c\u7cfb\u7edf\uff08\u5982Android\u3001iOS\uff09 - \u5e94\u7528\u7a0b\u5e8f\uff08\u5fae\u4fe1\u3001\u6e38\u620f\uff09 - \u7528\u6237\u6570\u636e\uff08\u7167\u7247\u3001\u6587\u6863\uff09</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_2","title":"\u4e09\u8005\u5982\u4f55\u534f\u540c\u5de5\u4f5c\uff1f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_3","title":"\u7b80\u5355\u6bd4\u55bb","text":"<p>\u60f3\u8c61\u4f60\u5728\u529e\u516c\u5ba4\u5de5\u4f5c\uff1a - \u4e3b\u63a7\uff08CPU\uff09 = \u4f60\u672c\u4eba\uff08\u601d\u8003\u548c\u5de5\u4f5c\uff09 - \u5185\u5b58\uff08RAM\uff09 = \u529e\u516c\u684c\uff08\u4e34\u65f6\u653e\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6\uff09 - FLASH = \u6587\u4ef6\u67dc\uff08\u957f\u671f\u5b58\u653e\u6240\u6709\u6587\u4ef6\uff09</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_4","title":"\u5b9e\u9645\u5de5\u4f5c\u6d41\u7a0b","text":"<ol> <li>\u5f00\u673a\u542f\u52a8\uff1a\u4eceFLASH\u52a0\u8f7d\u64cd\u4f5c\u7cfb\u7edf\u5230\u5185\u5b58</li> <li>\u8fd0\u884c\u7a0b\u5e8f\uff1a\u4eceFLASH\u52a0\u8f7dApp\u5230\u5185\u5b58\u8fd0\u884c</li> <li>\u6570\u636e\u5904\u7406\uff1aCPU\u5728\u5185\u5b58\u4e2d\u8ba1\u7b97\u548c\u5904\u7406</li> <li>\u4fdd\u5b58\u7ed3\u679c\uff1a\u5c06\u91cd\u8981\u6570\u636e\u5199\u56deFLASH\u4fdd\u5b58</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_5","title":"\u8fd0\u7b97\u7684\u57fa\u672c\u539f\u7406","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#1","title":"1. \u4e8c\u8fdb\u5236\u4e16\u754c","text":"<p>\u8ba1\u7b97\u673a\u53ea\u8ba4\u8bc60\u548c1\uff0c\u6240\u6709\u6570\u636e\u90fd\u7528\u4e8c\u8fdb\u5236\u8868\u793a\uff1a - \u6570\u5b57\uff1a5 = \u4e8c\u8fdb\u5236 101 - \u6587\u5b57\uff1aA = \u4e8c\u8fdb\u5236 01000001 - \u56fe\u7247\uff1a\u7531\u65e0\u6570\u4e2a\u5f69\u8272\u70b9\u7ec4\u6210\uff0c\u6bcf\u4e2a\u70b9\u7528\u6570\u5b57\u8868\u793a</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#2","title":"2. \u57fa\u672c\u8fd0\u7b97\u8fc7\u7a0b","text":"<p>\u52a0\u6cd5\u793a\u4f8b\uff1a</p> <pre><code>\u8ba1\u7b97\uff1a3 + 2\n\n\u4e8c\u8fdb\u5236\uff1a011 + 010\n\u6b65\u9aa4\uff1a\n  011\n+ 010\n------\n  101  \uff08\u5341\u8fdb\u52365\uff09\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#3","title":"3. \u6307\u4ee4\u6267\u884c\u6d41\u7a0b","text":"<p>CPU\u7684\u5de5\u4f5c\u5c31\u662f\u4e0d\u65ad\u91cd\u590d\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u53d6\u6307\u4ee4\uff1a\u4ece\u5185\u5b58\u8bfb\u53d6\u4e0b\u4e00\u6761\u8981\u6267\u884c\u7684\u547d\u4ee4</li> <li>\u89e3\u7801\uff1a\u7406\u89e3\u8fd9\u4e2a\u547d\u4ee4\u8981\u505a\u4ec0\u4e48</li> <li>\u6267\u884c\uff1a\u5b9e\u9645\u8fdb\u884c\u8fd0\u7b97</li> <li>\u5b58\u50a8\uff1a\u5c06\u7ed3\u679c\u4fdd\u5b58\u5230\u5185\u5b58\u6216\u5bc4\u5b58\u5668</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_6","title":"\u6307\u5411\u6307\u4ee4","text":"<p>CPU\u662f\u9760\u673a\u5668\u7801\u548c\u5bc4\u5b58\u5668\u64cd\u4f5c\u6765\u8fd0\u884c\u7684\uff0c\u89c1\uff1a - \u901a\u7528\u5bc4\u5b58\u5668 - \u7279\u6b8a\u5bc4\u5b58\u5668xPSR</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#ccpu","title":"\u4eceC\u4ee3\u7801\u5230CPU\u6267\u884c\u7684\u5b8c\u6574\u6d41\u7a0b","text":"<pre><code>C\u6e90\u4ee3\u7801 \u2192 \u7f16\u8bd1\u5668 \u2192 \u6c47\u7f16\u4ee3\u7801 \u2192 \u6c47\u7f16\u5668 \u2192 \u673a\u5668\u7801 \u2192 \u5b58\u50a8\u5728FLASH\n                                              \u2193\n                                       \u5f00\u673a\u52a0\u8f7d\u5230\u5185\u5b58\n                                              \u2193\n                                        CPU\u9010\u6761\u6267\u884c\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_7","title":"\u5b9e\u9645\u5e94\u7528\u4e3e\u4f8b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_8","title":"\u624b\u673a\u62cd\u7167\u8fc7\u7a0b","text":"<ol> <li>\u542f\u52a8\u76f8\u673a\uff1a\u4eceFLASH\u52a0\u8f7d\u76f8\u673a\u7a0b\u5e8f\u5230\u5185\u5b58</li> <li>\u53d6\u666f\u9884\u89c8\uff1aCPU\u5904\u7406\u6444\u50cf\u5934\u6570\u636e\uff0c\u5728\u5185\u5b58\u4e2d\u751f\u6210\u9884\u89c8\u753b\u9762</li> <li>\u6309\u4e0b\u5feb\u95e8\uff1aCPU\u8fdb\u884c\u56fe\u50cf\u5904\u7406\u3001\u538b\u7f29</li> <li>\u4fdd\u5b58\u7167\u7247\uff1a\u5c06\u5904\u7406\u597d\u7684\u56fe\u7247\u4ece\u5185\u5b58\u5199\u5165FLASH\u5b58\u50a8</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_9","title":"\u6e38\u620f\u8fd0\u884c","text":"<ol> <li>\u6e38\u620f\u7a0b\u5e8f\u5b58\u50a8\u5728FLASH\u4e2d</li> <li>\u8fd0\u884c\u65f6\u52a0\u8f7d\u5230\u5185\u5b58</li> <li>CPU\u548cGPU\uff08\u56fe\u5f62\u5904\u7406\u5668\uff09\u5728\u5185\u5b58\u4e2d\u8fdb\u884c\u8ba1\u7b97</li> <li>\u751f\u6210\u753b\u9762\u8f93\u51fa\u5230\u5c4f\u5e55</li> <li>\u6e38\u620f\u8fdb\u5ea6\u4fdd\u5b58\u5230FLASH</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_10","title":"\u91cd\u8981\u6982\u5ff5\u603b\u7ed3","text":"\u90e8\u4ef6 \u6bd4\u55bb \u7279\u70b9 \u4f5c\u7528 \u4e3b\u63a7(CPU) \u5927\u8111 \u8fd0\u7b97\u3001\u63a7\u5236 \u6267\u884c\u6240\u6709\u8ba1\u7b97\u4efb\u52a1 \u5185\u5b58(RAM) \u5de5\u4f5c\u53f0 \u901f\u5ea6\u5feb\u3001\u4e34\u65f6\u6027 \u63d0\u4f9b\u8fd0\u884c\u7a7a\u95f4 FLASH \u6587\u4ef6\u67dc \u6c38\u4e45\u5b58\u50a8\u3001\u5bb9\u91cf\u5927 \u957f\u671f\u4fdd\u5b58\u6570\u636e"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/ARM%E6%9E%B6%E6%9E%84/#_11","title":"\u5b66\u4e60","text":"<ol> <li>\u7406\u89e3\u5c42\u6b21\u5173\u7cfb\uff1aC\u8bed\u8a00 \u2192 \u6c47\u7f16 \u2192 \u673a\u5668\u7801 \u2192 \u786c\u4ef6\u6267\u884c</li> <li>\u52a8\u624b\u5b9e\u9a8c\uff1a\u5c1d\u8bd5\u5199\u7b80\u5355C\u7a0b\u5e8f\uff0c\u67e5\u770b\u751f\u6210\u7684\u6c47\u7f16\u4ee3\u7801</li> <li>\u5173\u6ce8\u6570\u636e\u6d41\uff1a\u89c2\u5bdf\u6570\u636e\u5982\u4f55\u5728\u5bc4\u5b58\u5668\u3001\u5185\u5b58\u3001FLASH\u4e4b\u95f4\u6d41\u52a8</li> <li>\u7406\u89e3RISC\u4f18\u52bf\uff1a\u7b80\u5355\u6307\u4ee4\u5982\u4f55\u901a\u8fc7\u6d41\u6c34\u7ebf\u63d0\u9ad8\u6548\u7387</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/","title":"xPSR\u7684\u57fa\u672c\u6982\u5ff5","text":"<p>xPSR\u662fARM Cortex-M\u5904\u7406\u5668\u4e2d\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668\uff08Program Status Register\uff09\u7684\u7ec4\u5408\u540d\u79f0\uff0c\u5b83\u5b9e\u9645\u4e0a\u5305\u542b\u4e86\u4e09\u4e2a\u72ec\u7acb\u7684\u72b6\u6001\u5bc4\u5b58\u5668\uff1a</p> <ul> <li>APSR (Application PSR)\uff1a\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668</li> <li>IPSR (Interrupt PSR)\uff1a\u4e2d\u65ad\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668  </li> <li>EPSR (Execution PSR)\uff1a\u6267\u884c\u72b6\u6001\u5bc4\u5b58\u5668</li> </ul> <p>\u5728\u5f02\u5e38\u5904\u7406\u65f6\uff0c\u8fd9\u4e09\u4e2a\u5bc4\u5b58\u5668\u88ab\u6253\u5305\u6210\u4e00\u4e2a32\u4f4d\u7684xPSR\u503c\u4fdd\u5b58\u5230\u6808\u4e2d\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_1","title":"xPSR\u7684\u4f4d\u57df\u7ed3\u6784","text":"<p>xPSR\u7684\u5b8c\u657432\u4f4d\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>xPSR\u5bc4\u5b58\u5668\u4f4d\u57df\u5e03\u5c40\uff1a\n31 30 29 28 27 26 25 24 23 20 19 16 15 10 9     8     7     6     5     0\n+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+-----+-----+-----+-----+-----+\n|N |Z |C |V |Q |  |  |  |  |  |  |  |  |  |  |ICI/IT|T |  |  |  |  |Exception|\n|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |     |   |  |  |  |  | Number  |\n+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+-----+-----+-----+-----+-----+\n\n\u4f4d\u57df\u8bf4\u660e\uff1a\n[31:27] \u6761\u4ef6\u6807\u5fd7\u4f4d\n[26:25] \u4fdd\u7559\n[24]    Q\u6807\u5fd7 (\u9971\u548c\u8fd0\u7b97\u6807\u5fd7)\n[23:20] \u4fdd\u7559  \n[19:16] GE[3:0] (\u5728\u67d0\u4e9bCortex-M\u5904\u7406\u5668\u4e2d\u7528\u4e8eSIMD)\n[15:10] ICI/IT (\u4e2d\u65ad\u8fde\u7eed\u6307\u4ee4/IF-THEN\u6307\u4ee4\u72b6\u6001)\n[9]     T\u6807\u5fd7 (\u59cb\u7ec8\u4e3a1\uff0c\u8868\u793aThumb\u72b6\u6001)\n[8:0]   \u5f02\u5e38\u7f16\u53f7 (IPSR\u90e8\u5206)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#_1","title":"\u5404\u72b6\u6001\u5bc4\u5b58\u5668\u7684\u5177\u4f53\u5185\u5bb9","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#apsr-","title":"APSR - \u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668","text":"<p>APSR\u5305\u542b\u7b97\u672f\u548c\u903b\u8f91\u8fd0\u7b97\u7684\u6761\u4ef6\u6807\u5fd7\uff1a</p> <pre><code>APSR\u4f4d\u57df (xPSR[31:27] + xPSR[24]):\n31 30 29 28 27 24\n+--+--+--+--+--+\n|N |Z |C |V |Q |\n+--+--+--+--+--+\n\n\u6807\u5fd7\u4f4d\u542b\u4e49\uff1a\n- N (Negative): \u7ed3\u679c\u4e3a\u8d1f\u65f6\u7f6e1\n- Z (Zero):    \u7ed3\u679c\u4e3a\u96f6\u65f6\u7f6e1  \n- C (Carry):   \u8fdb\u4f4d\u6216\u501f\u4f4d\u65f6\u7f6e1\n- V (Overflow): \u6709\u7b26\u53f7\u6ea2\u51fa\u65f6\u7f6e1\n- Q (Saturation): \u9971\u548c\u8fd0\u7b97\u53d1\u751f\u65f6\u7f6e1\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#ipsr-","title":"IPSR - \u4e2d\u65ad\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668","text":"<p>IPSR\u5305\u542b\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u5f02\u5e38\u7f16\u53f7\uff1a</p> <pre><code>IPSR\u4f4d\u57df (xPSR[8:0]):\n8     0\n+-----+\n|Exception|\n| Number  |\n+-----+\n\n\u5e38\u89c1\u5f02\u5e38\u7f16\u53f7\uff1a\n0: \u7ebf\u7a0b\u6a21\u5f0f (\u65e0\u5f02\u5e38)\n1: \u590d\u4f4d\n2: NMI (\u4e0d\u53ef\u5c4f\u853d\u4e2d\u65ad)\n3: \u786c\u6545\u969c\n4: \u5185\u5b58\u7ba1\u7406\u6545\u969c\n5: \u603b\u7ebf\u6545\u969c\n6: \u4f7f\u7528\u6545\u969c\n7-10: \u4fdd\u7559\n11: SVCall\n12: \u8c03\u8bd5\u76d1\u63a7\n13: \u4fdd\u7559\n14: PendSV\n15: SysTick\n16-255: \u5916\u90e8\u4e2d\u65ad\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#epsr-","title":"EPSR - \u6267\u884c\u72b6\u6001\u5bc4\u5b58\u5668","text":"<p>EPSR\u5305\u542b\u5904\u7406\u5668\u7684\u6267\u884c\u72b6\u6001\u4fe1\u606f\uff1a</p> <pre><code>EPSR\u4f4d\u57df (xPSR[15:10] + xPSR[9]):\n15     10 9\n+-----+--+\n|ICI/IT |T|\n+-----+--+\n\n\u4f4d\u57df\u542b\u4e49\uff1a\n- T (Thumb state): \u59cb\u7ec8\u4e3a1\uff0cCortex-M\u53ea\u652f\u6301Thumb\u6307\u4ee4\u96c6\n- ICI/IT: \n  * \u5728\u4e2d\u65ad\u8fde\u7eed\u6307\u4ee4\u65f6\u5305\u542b\u540e\u7eed\u6307\u4ee4\u4fe1\u606f\n  * \u5728IT (If-Then) \u5757\u4e2d\u5305\u542b\u6761\u4ef6\u6267\u884c\u72b6\u6001\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_2","title":"xPSR\u5728\u4efb\u52a1\u5207\u6362\u4e2d\u7684\u4f5c\u7528","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_3","title":"\u4e0a\u4e0b\u6587\u4fdd\u5b58\u65f6\u7684xPSR","text":"<p>\u5f53\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u786c\u4ef6\u81ea\u52a8\u5c06xPSR\u4fdd\u5b58\u5230\u6808\u4e2d\uff1a</p> <pre><code>\u5f02\u5e38\u5165\u53e3\u65f6\u7684\u6808\u5e27\uff1a\n+------------------+\n|      xPSR        | \u2190 \u5305\u542b\u5b8c\u6574\u7684\u5904\u7406\u5668\u72b6\u6001\n+------------------+\n|       PC         | \u2190 \u8fd4\u56de\u5730\u5740\n+------------------+\n|       LR         | \u2190 \u5f02\u5e38\u8fd4\u56de\u4fe1\u606f\n+------------------+\n|       R12        |\n+------------------+\n|       R3         |\n+------------------+\n|       R2         |\n+------------------+\n|       R1         |\n+------------------+\n|       R0         |\n+------------------+ \u2190 \u5f02\u5e38\u540e\u7684\u6808\u9876\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_4","title":"xPSR\u5728\u4efb\u52a1\u6062\u590d\u4e2d\u7684\u91cd\u8981\u6027","text":"<p>\u4efb\u52a1\u6062\u590d\u65f6\uff0cxPSR\u786e\u4fdd\u5904\u7406\u5668\u72b6\u6001\u5b8c\u5168\u8fd8\u539f\uff1a</p> <ol> <li>\u6761\u4ef6\u6807\u5fd7\u6062\u590d\uff1aAPSR\u90e8\u5206\u786e\u4fdd\u7b97\u672f\u8fd0\u7b97\u72b6\u6001\u4e00\u81f4</li> <li>\u6267\u884c\u72b6\u6001\u6062\u590d\uff1aEPSR\u90e8\u5206\u7ef4\u6301\u6b63\u786e\u7684\u6307\u4ee4\u6267\u884c\u72b6\u6001</li> <li>\u5f02\u5e38\u72b6\u6001\u6e05\u7406\uff1aIPSR\u90e8\u5206\u5728\u5f02\u5e38\u8fd4\u56de\u65f6\u88ab\u6e05\u9664\uff08\u56de\u5230\u7ebf\u7a0b\u6a21\u5f0f\uff09</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsrrtos","title":"xPSR\u5728RTOS\u4e2d\u7684\u5177\u4f53\u5e94\u7528","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#_2","title":"\u4efb\u52a1\u7b2c\u4e00\u6b21\u542f\u52a8\u7684\u7279\u6b8a\u5904\u7406","text":"<p>\u5bf9\u4e8e\u65b0\u521b\u5efa\u7684\u4efb\u52a1\uff0c\u9700\u8981\u624b\u52a8\u6784\u9020\u521d\u59cbxPSR\uff1a</p> <pre><code>// \u65b0\u4efb\u52a1\u6808\u5e27\u521d\u59cb\u5316\nvoid init_task_stack(uint32_t *stack_top, void (*task_entry)(void *), void *arg) {\n    // \u6784\u9020\u521d\u59cb\u4e0a\u4e0b\u6587\u6808\u5e27\n    *(--stack_top) = 0x01000000;    // xPSR: Thumb\u72b6\u6001\uff0c\u9ed8\u8ba4\u6761\u4ef6\u6807\u5fd7\n    *(--stack_top) = (uint32_t)task_entry;  // PC: \u4efb\u52a1\u5165\u53e3\u70b9\n    *(--stack_top) = 0xFFFFFFFD;    // LR: \u5f02\u5e38\u8fd4\u56de\u4f7f\u7528PSP\n    // ... \u5176\u4ed6\u5bc4\u5b58\u5668\u521d\u59cb\u5316\n}\n</code></pre> <p>\u521d\u59cbxPSR\u503c <code>0x01000000</code> \u7684\u542b\u4e49\uff1a - T\u4f4d(bit24) = 1\uff1aThumb\u72b6\u6001 - \u9ed8\u8ba4\u6761\u4ef6\u6807\u5fd7\uff1aN=0, Z=0, C=0, V=0</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_5","title":"\u5f02\u5e38\u8fd4\u56de\u65f6\u7684xPSR\u5904\u7406","text":"<p>\u5f02\u5e38\u8fd4\u56de\u6307\u4ee4\u81ea\u52a8\u4ece\u6808\u4e2d\u6062\u590dxPSR\uff1a</p> <pre><code>; \u5f02\u5e38\u8fd4\u56de\u65f6\uff0c\u786c\u4ef6\u81ea\u52a8\u6267\u884c\uff1a\n; - \u4ece\u6808\u4e2d\u5f39\u51faxPSR, PC, LR, R12, R0-R3\n; - \u6839\u636exPSR\u6062\u590d\u5904\u7406\u5668\u72b6\u6001\n; - \u6839\u636eLR\u7684\u503c\u786e\u5b9a\u8fd4\u56de\u6a21\u5f0f\u548c\u6808\u6307\u9488\n\nBX LR    ; \u5f02\u5e38\u8fd4\u56de\uff0cLR\u901a\u5e38\u4e3a0xFFFFFFFD\uff08\u8fd4\u56de\u5230\u7ebf\u7a0b\u6a21\u5f0f\u4f7f\u7528PSP\uff09\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_6","title":"xPSR\u4e0e\u4efb\u52a1\u8c03\u8bd5","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_7","title":"\u8c03\u8bd5\u4fe1\u606f\u4e2d\u7684xPSR","text":"<p>\u5728\u8c03\u8bd5\u5668\u4e2d\u53ef\u4ee5\u67e5\u770bxPSR\u7684\u503c\u6765\u5206\u6790\u4efb\u52a1\u72b6\u6001\uff1a</p> <pre><code>\u8c03\u8bd5\u5668\u4e2d\u7684xPSR\u663e\u793a\u793a\u4f8b\uff1a\nxPSR = 0x61000013\n\u5206\u89e3\uff1a\n- N=0, Z=1, C=0, V=0, Q=0  (APSR: 0x60000000)\n- T=1, ICI/IT=0            (EPSR: 0x01000000)  \n- \u5f02\u5e38\u53f7=19                (IPSR: 0x00000013)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_8","title":"\u5e38\u89c1xPSR\u72b6\u6001\u5206\u6790","text":"xPSR\u503c \u72b6\u6001\u8bf4\u660e \u5e38\u89c1\u573a\u666f 0x01000000 \u6b63\u5e38\u7ebf\u7a0b\u6a21\u5f0f \u4efb\u52a1\u6b63\u5e38\u8fd0\u884c 0x01000001 \u5904\u7406\u5668\u590d\u4f4d \u7cfb\u7edf\u542f\u52a8 0x01000003 \u786c\u6545\u969c\u5904\u7406 \u4e25\u91cd\u9519\u8bef 0x0100000B SVCall\u5904\u7406 \u7cfb\u7edf\u8c03\u7528\u6267\u884c\u4e2d 0x0100000E PendSV\u5904\u7406 \u4efb\u52a1\u5207\u6362\u4e2d"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_9","title":"xPSR\u76f8\u5173\u7684\u5e38\u89c1\u95ee\u9898","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#xpsr_10","title":"\u6808\u5e27\u635f\u574f\u5bfc\u81f4\u7684xPSR\u9519\u8bef","text":"<p>\u5982\u679c\u4efb\u52a1\u6808\u88ab\u7834\u574f\uff0c\u6062\u590d\u7684xPSR\u503c\u53ef\u80fd\u65e0\u6548\uff1a</p> <pre><code>\u6808\u635f\u574f\u5bfc\u81f4\u7684\u95ee\u9898\uff1a\n+------------------+\n|  \u635f\u574f\u7684xPSR\u503c    | \u2190 \u65e0\u6548\u7684\u5904\u7406\u5668\u72b6\u6001\n+------------------+\n|  \u65e0\u6548\u7684PC\u5730\u5740    | \u2190 \u53ef\u80fd\u5bfc\u81f4\u786c\u6545\u969c\n+------------------+\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E7%89%B9%E6%AE%8A%E5%AF%84%E5%AD%98%E5%99%A8xPSR/#_3","title":"\u4efb\u52a1\u8bbe\u8ba1\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u907f\u514d\u4fee\u6539xPSR\uff1a\u5e94\u7528\u7a0b\u5e8f\u4e0d\u5e94\u76f4\u63a5\u4fee\u6539xPSR</li> <li>\u6b63\u786e\u6784\u9020\u521d\u59cb\u6808\uff1a\u65b0\u4efb\u52a1\u7684\u521d\u59cbxPSR\u5fc5\u987b\u6b63\u786e\u8bbe\u7f6e</li> <li>\u6808\u6ea2\u51fa\u4fdd\u62a4\uff1a\u9632\u6b62\u6808\u635f\u574f\u5bfc\u81f4\u7684xPSR\u7834\u574f</li> </ol> <p>xPSR\u5728RTOS\u4efb\u52a1\u5207\u6362\u4e2d\u8d77\u7740\u81f3\u5173\u91cd\u8981\u7684\u4f5c\u7528\uff0c\u5b83\u786e\u4fdd\u4e86\u4efb\u52a1\u72b6\u6001\u7684\u5b8c\u6574\u4fdd\u5b58\u548c\u7cbe\u786e\u6062\u590d\uff0c\u662f\u4efb\u52a1\u4e0a\u4e0b\u6587\u7ba1\u7406\u7684\u6838\u5fc3\u7ec4\u6210\u90e8\u5206\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/","title":"\u901a\u7528\u5bc4\u5b58\u5668","text":"<ul> <li>\u5165\u95e8\u6c47\u7f16\u6307\u4ee4</li> <li>ARM64\u5bc4\u5b58\u5668<ul> <li>\u4ec0\u4e48\u662f\u5bc4\u5b58\u5668\uff1f</li> <li>ARM64\u5bc4\u5b58\u5668\u5206\u7c7b\uff08AArch64\uff09<ul> <li>1. \u901a\u7528\u5bc4\u5b58\u5668\uff08X0-X30\uff09</li> <li>2. \u7279\u6b8a\u529f\u80fd\u5bc4\u5b58\u5668</li> </ul> </li> <li>\u5bc4\u5b58\u5668\u5927\u5c0f\u8bbf\u95ee</li> <li>\u5173\u952e\u5bc4\u5b58\u5668\u8be6\u89e3<ul> <li>1. \u53c2\u6570\u548c\u8fd4\u56de\u503c\u5bc4\u5b58\u5668\uff08X0-X7\uff09</li> <li>2. \u94fe\u63a5\u5bc4\u5b58\u5668 LR\uff08X30\uff09</li> <li>3. \u6808\u6307\u9488 SP</li> <li>4. \u96f6\u5bc4\u5b58\u5668 XZR</li> </ul> </li> <li>\u5b9e\u9645\u7f16\u7a0b\u4e2d\u7684\u5bc4\u5b58\u5668\u4f7f\u7528<ul> <li>\u51fd\u6570\u8c03\u7528\u7ea6\u5b9a</li> <li>\u7b80\u5355\u8ba1\u7b97\u793a\u4f8b</li> </ul> </li> <li>\u5bc4\u5b58\u5668\u4f7f\u7528\u89c4\u5219<ul> <li>\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\uff08\u4e34\u65f6\u5bc4\u5b58\u5668\uff09</li> <li>\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668</li> </ul> </li> <li>\u4e0eC\u8bed\u8a00\u7684\u5bf9\u5e94\u5173\u7cfb<ul> <li>C\u51fd\u6570 \u2194 \u6c47\u7f16\u5bc4\u5b58\u5668</li> </ul> </li> <li>\u91cd\u8981\u63d0\u793a</li> </ul> </li> <li>ARM32\u5bc4\u5b58\u5668<ul> <li>\u5bc4\u5b58\u5668\u5206\u914d\u7ed9\u51fd\u6570\u7684\u89c4\u5219\uff08AAPCS\u8c03\u7528\u7ea6\u5b9a\uff09<ul> <li>\u6240\u6709\u51fd\u6570\u5171\u7528\u5bc4\u5b58\u5668\uff0c\u4f46\u901a\u8fc7\u660e\u786e\u89c4\u5219\u534f\u4f5c\uff1a</li> </ul> </li> <li>\u53c2\u6570\u6570\u91cf\u4e0d\u540c\u7684\u5904\u7406\u65b9\u5f0f<ul> <li>\u60c5\u51b51\uff1a4\u4e2a\u53ca\u4ee5\u4e0b\u53c2\u6570\uff08\u5168\u90e8\u7528\u5bc4\u5b58\u5668\uff09</li> <li>\u60c5\u51b52\uff1a\u8d85\u8fc74\u4e2a\u53c2\u6570\uff08\u6df7\u5408\u4f7f\u7528\u5bc4\u5b58\u5668\u548c\u6808\uff09</li> </ul> </li> <li>\u51fd\u6570\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u5171\u4eab\u5bc4\u5b58\u5668<ul> <li>\u51fd\u6570\u5f00\u573a\u5178\u578b\u6a21\u5f0f\uff1a</li> <li>\u5bc4\u5b58\u5668\u4f7f\u7528\u7b56\u7565\uff1a</li> </ul> </li> <li>\u5404\u4e2a\u51fd\u6570\u5982\u4f55\u901a\u8fc7\u5171\u4eab\u5bc4\u5b58\u5668\u8054\u7cfb<ul> <li>1. \u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u4f20\u9012\uff08\u8003\u8651\u591a\u53c2\u6570\u60c5\u51b5\uff09</li> <li>2. \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff08R0-R3, R12\uff09\u7684\u534f\u4f5c</li> <li>3. \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff08R4-R11\uff09\u7684\u534f\u4f5c</li> </ul> </li> <li>\u5b8c\u6574\u7684\u534f\u4f5c\u793a\u4f8b\uff08\u5305\u542b\u591a\u53c2\u6570\uff09</li> <li>\u5173\u952e\u7406\u89e3\u70b9</li> </ul> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_1","title":"\u5165\u95e8\u6c47\u7f16\u6307\u4ee4","text":"<p>\u89c1../\u6c47\u7f16\u5165\u95e8/\u6c47\u7f16\u5165\u95e8|\u6c47\u7f16\u5165\u95e8</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#arm64","title":"ARM64\u5bc4\u5b58\u5668","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_2","title":"\u4ec0\u4e48\u662f\u5bc4\u5b58\u5668\uff1f","text":"<p>\u5bc4\u5b58\u5668\u662fCPU\u5185\u90e8\u7684\u5c0f\u578b\u3001\u8d85\u9ad8\u901f\u5b58\u50a8\u5355\u5143\uff0c\u7528\u4e8e\u4e34\u65f6\u5b58\u653e\u6570\u636e\u548c\u6307\u4ee4\u3002\u53ef\u4ee5\u628a\u5b83\u60f3\u8c61\u6210\u5de5\u4f5c\u53f0\u2014\u2014CPU\u76f4\u63a5\u5728\u5bc4\u5b58\u5668\u4e0a\u8fdb\u884c\u8ba1\u7b97\uff0c\u6bd4\u8bbf\u95ee\u5185\u5b58\u5feb\u5f97\u591a\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#arm64aarch64","title":"ARM64\u5bc4\u5b58\u5668\u5206\u7c7b\uff08AArch64\uff09","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#1-x0-x30","title":"1. \u901a\u7528\u5bc4\u5b58\u5668\uff08X0-X30\uff09","text":"<p>ARM64\u670931\u4e2a64\u4f4d\u901a\u7528\u5bc4\u5b58\u5668\uff0c\u7f16\u53f7X0\u5230X30\uff1a</p> \u5bc4\u5b58\u5668 \u522b\u540d \u4e3b\u8981\u7528\u9014 \u8bf4\u660e X0 - \u51fd\u6570\u53c2\u65701 / \u8fd4\u56de\u503c \u7b2c\u4e00\u4e2a\u53c2\u6570\u548c\u51fd\u6570\u8fd4\u56de\u503c X1-X7 - \u51fd\u6570\u53c2\u65702-8 \u989d\u5916\u7684\u51fd\u6570\u53c2\u6570 X8 - \u95f4\u63a5\u7ed3\u679c\u5bc4\u5b58\u5668 \u7279\u6b8a\u7528\u9014 X9-X15 - \u4e34\u65f6\u5bc4\u5b58\u5668 \u8c03\u7528\u65f6\u4e0d\u4fdd\u5b58\uff0c\u968f\u610f\u4f7f\u7528 X16-X17 - \u5185\u90e8\u4e34\u65f6\u5bc4\u5b58\u5668 \u7cfb\u7edf\u4f7f\u7528\uff0c\u907f\u514d\u4f7f\u7528 X18 - \u5e73\u53f0\u5bc4\u5b58\u5668 \u4fdd\u7559\u7ed9\u5e73\u53f0 X19-X28 - \u88ab\u4fdd\u5b58\u5bc4\u5b58\u5668 \u8c03\u7528\u65f6\u5fc5\u987b\u4fdd\u5b58\u539f\u503c X29 FP \u5e27\u6307\u9488 \u6307\u5411\u5f53\u524d\u6808\u5e27\u5e95\u90e8 X30 LR \u94fe\u63a5\u5bc4\u5b58\u5668 \u5b58\u50a8\u51fd\u6570\u8fd4\u56de\u5730\u5740\uff08\u4fdd\u62a4\u73b0\u573a\uff09"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#2","title":"2. \u7279\u6b8a\u529f\u80fd\u5bc4\u5b58\u5668","text":"\u5bc4\u5b58\u5668 \u540d\u79f0 \u4f5c\u7528 XZR \u96f6\u5bc4\u5b58\u5668 \u8bfb\u53d6\u603b\u662f0\uff0c\u5199\u5165\u65e0\u6548\u679c SP \u6808\u6307\u9488 \u6307\u5411\u5f53\u524d\u6808\u9876 PC \u7a0b\u5e8f\u8ba1\u6570\u5668 \u6307\u5411\u4e0b\u4e00\u6761\u8981\u6267\u884c\u7684\u6307\u4ee4"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_3","title":"\u5bc4\u5b58\u5668\u5927\u5c0f\u8bbf\u95ee","text":"<p>\u6bcf\u4e2a64\u4f4d\u5bc4\u5b58\u5668\u90fd\u53ef\u4ee5\u6309\u4e0d\u540c\u5927\u5c0f\u8bbf\u95ee\uff1a</p> <pre><code>X0  // \u8bbf\u95ee\u5b8c\u6574\u768464\u4f4d\u5bc4\u5b58\u5668\nW0  // \u53ea\u8bbf\u95ee\u4f4e32\u4f4d\uff08\u9ad832\u4f4d\u6e05\u96f6\uff09\n</code></pre> <p>\u793a\u4f8b\uff1a</p> <pre><code>MOV X0, 0x123456789ABCDEF0  @ X0 = 0x123456789ABCDEF0\nMOV W1, 0x12345678          @ W1 = 0x0000000012345678\nADD W0, W1, W1              @ X0 = 0x000000002468ACF0\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_4","title":"\u5173\u952e\u5bc4\u5b58\u5668\u8be6\u89e3","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#1-x0-x7","title":"1. \u53c2\u6570\u548c\u8fd4\u56de\u503c\u5bc4\u5b58\u5668\uff08X0-X7\uff09","text":"<p>\u51fd\u6570\u8c03\u7528\u793a\u4f8b\uff1a</p> <pre><code>// C\u4ee3\u7801\nint result = add(10, 20, 30);\n\n// \u5bf9\u5e94\u7684\u5bc4\u5b58\u5668\u4f7f\u7528\uff1a\n// X0 = 10 (\u7b2c\u4e00\u4e2a\u53c2\u6570)\n// X1 = 20 (\u7b2c\u4e8c\u4e2a\u53c2\u6570) \n// X2 = 30 (\u7b2c\u4e09\u4e2a\u53c2\u6570)\n// \u8fd4\u56de\u503c\u901a\u8fc7 X0 \u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#2-lrx30","title":"2. \u94fe\u63a5\u5bc4\u5b58\u5668 LR\uff08X30\uff09","text":"<p>\u5b58\u50a8\u51fd\u6570\u8c03\u7528\u7684\u8fd4\u56de\u5730\u5740\uff1a</p> <pre><code>BL my_function    @ \u8df3\u8f6c\u5230my_function\uff0c\u540c\u65f6\u5c06\u8fd4\u56de\u5730\u5740\u4fdd\u5b58\u5230LR\n                  @ \u5728my_function\u4e2d\uff1a\nRET               @ \u7b49\u540c\u4e8e MOV PC, LR\uff0c\u8df3\u56de\u5230\u8c03\u7528\u5904\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#3-sp","title":"3. \u6808\u6307\u9488 SP","text":"<p>\u7ba1\u7406\u51fd\u6570\u8c03\u7528\u7684\u6808\u7a7a\u95f4\uff1a</p> <pre><code>SUB SP, SP, #16   @ \u5728\u6808\u4e0a\u5206\u914d16\u5b57\u8282\u7a7a\u95f4\nADD SP, SP, #16   @ \u91ca\u653e\u6808\u7a7a\u95f4\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#4-xzr","title":"4. \u96f6\u5bc4\u5b58\u5668 XZR","text":"<p>\u63d0\u4f9b\u5e38\u6570\u503c0\uff0c\u5f88\u6709\u7528\uff1a</p> <pre><code>MOV X0, XZR       @ X0 = 0\nCMP X1, XZR       @ \u6bd4\u8f83X1\u662f\u5426\u7b49\u4e8e0\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_5","title":"\u5b9e\u9645\u7f16\u7a0b\u4e2d\u7684\u5bc4\u5b58\u5668\u4f7f\u7528","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_6","title":"\u51fd\u6570\u8c03\u7528\u7ea6\u5b9a","text":"<pre><code>@ \u51fd\u6570\u5b9a\u4e49\nmy_function:\n    SUB SP, SP, #16       @ 1. \u5728\u6808\u4e0a\u5206\u914d\u7a7a\u95f4\n    STR X30, [SP, #8]     @ 2. \u4fdd\u5b58\u8fd4\u56de\u5730\u5740(LR)\n    STR X29, [SP, #0]     @ 3. \u4fdd\u5b58\u5e27\u6307\u9488(FP)\n\n    @ \u51fd\u6570\u4f53...\n    ADD X0, X0, X1        @ \u4f7f\u7528X0,X1(\u53c2\u6570\u5bc4\u5b58\u5668)\n\n    LDR X29, [SP, #0]     @ \u6062\u590dFP\n    LDR X30, [SP, #8]     @ \u6062\u590dLR  \n    ADD SP, SP, #16       @ \u91ca\u653e\u6808\u7a7a\u95f4\n    RET                   @ \u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_7","title":"\u7b80\u5355\u8ba1\u7b97\u793a\u4f8b","text":"<pre><code>@ \u8ba1\u7b97 (a + b) * c\n@ \u5047\u8bbe: a\u5728X0, b\u5728X1, c\u5728X2\n\nADD X3, X0, X1    @ X3 = a + b (\u4f7f\u7528\u4e34\u65f6\u5bc4\u5b58\u5668X3)\nMUL X0, X3, X2    @ X0 = (a+b) * c\uff0c\u7ed3\u679c\u653e\u5728X0\u8fd4\u56de\nRET\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_8","title":"\u5bc4\u5b58\u5668\u4f7f\u7528\u89c4\u5219","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_9","title":"\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\uff08\u4e34\u65f6\u5bc4\u5b58\u5668\uff09","text":"<ul> <li>X0-X18\uff1a\u5728\u51fd\u6570\u8c03\u7528\u4e2d\u53ef\u80fd\u88ab\u4fee\u6539\uff0c\u8c03\u7528\u8005\u9700\u8981\u4fdd\u5b58\u91cd\u8981\u6570\u636e</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_10","title":"\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668","text":"<ul> <li>X19-X28\uff1a\u5982\u679c\u51fd\u6570\u8981\u4f7f\u7528\u8fd9\u4e9b\u5bc4\u5b58\u5668\uff0c\u5fc5\u987b\u5148\u5728\u6808\u4e0a\u4fdd\u5b58\u539f\u503c\uff0c\u8fd4\u56de\u524d\u6062\u590d</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#c","title":"\u4e0eC\u8bed\u8a00\u7684\u5bf9\u5e94\u5173\u7cfb","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#c_1","title":"C\u51fd\u6570 \u2194 \u6c47\u7f16\u5bc4\u5b58\u5668","text":"<pre><code>// C\u4ee3\u7801\nint calculate(int a, int b, int c) {\n    int temp = a + b;\n    return temp * c;\n}\n</code></pre> <p>\u5bf9\u5e94\u7684\u6c47\u7f16\u5bc4\u5b58\u5668\u4f7f\u7528\uff1a - <code>a</code> \u2192 X0 - <code>b</code> \u2192 X1  - <code>c</code> \u2192 X2 - <code>temp</code> \u2192 X3\uff08\u4e34\u65f6\u5bc4\u5b58\u5668\uff09 - \u8fd4\u56de\u503c \u2192 X0</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_11","title":"\u91cd\u8981\u63d0\u793a","text":"<ol> <li>\u5bc4\u5b58\u5668\u662f\u7a00\u7f3a\u8d44\u6e90\uff1a\u53ea\u670931\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\uff0c\u8981\u9ad8\u6548\u4f7f\u7528</li> <li>\u7406\u89e3\u6570\u636e\u6d41\uff1a\u89c2\u5bdf\u6570\u636e\u5982\u4f55\u5728\u5bc4\u5b58\u5668\u95f4\u6d41\u52a8</li> <li>\u6808\u7684\u91cd\u8981\u6027\uff1a\u5f53\u5bc4\u5b58\u5668\u4e0d\u591f\u65f6\uff0c\u4f7f\u7528\u6808\u6765\u5b58\u50a8\u4e34\u65f6\u6570\u636e</li> <li>\u8c03\u7528\u7ea6\u5b9a\uff1a\u9075\u5faa\u5bc4\u5b58\u5668\u4f7f\u7528\u89c4\u5219\uff0c\u786e\u4fdd\u51fd\u6570\u95f4\u6b63\u786e\u534f\u4f5c</li> </ol> <p>\u8bb0\u4f4f\uff1a\u5bc4\u5b58\u5668\u662fCPU\u7684\u5de5\u4f5c\u53f0\uff0c\u6240\u6709\u8ba1\u7b97\u90fd\u5728\u8fd9\u91cc\u53d1\u751f\uff01</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#arm32","title":"ARM32\u5bc4\u5b58\u5668","text":"<p>ARM32\u67b6\u6784\u670916\u4e2a32\u4f4d\u6838\u5fc3\u5bc4\u5b58\u5668\uff0c\u6240\u6709\u51fd\u6570\u90fd\u5171\u4eab\u8fd9\u540c\u4e00\u7ec4\u5bc4\u5b58\u5668\uff1a</p> <p>\u901a\u7528\u5bc4\u5b58\u5668\uff1a</p> <ul> <li>R0-R3\uff1a\u53c2\u6570/\u7ed3\u679c\u5bc4\u5b58\u5668\uff08\u8c03\u7528\u8005\u4fdd\u5b58\uff09- \u50cf\"\u4e34\u65f6\u5de5\u4f5c\u53f0\"\uff0c\u7528\u4e8e\u4f20\u9012\u524d4\u4e2a\u53c2\u6570</li> <li>R4-R11\uff1a\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668 - \u50cf\"\u4e2a\u4eba\u5de5\u4f5c\u53f0\"\uff0c\u7528\u5b8c\u540e\u5fc5\u987b\u6062\u590d\u539f\u6837</li> <li>R12\uff1a\u5185\u90e8\u8c03\u7528\u6682\u5b58\u5bc4\u5b58\u5668</li> </ul> <p>\u7279\u6b8a\u529f\u80fd\u5bc4\u5b58\u5668\uff1a</p> <ul> <li>R13 (SP)\uff1a\u6808\u6307\u9488 - \u603b\u7ba1\u7406\u5458\u5ea7\u4f4d\uff0c\u4e5f\u7528\u4e8e\u4f20\u9012\u7b2c5\u4e2a\u53ca\u4ee5\u540e\u7684\u53c2\u6570</li> <li>R14 (LR)\uff1a\u94fe\u63a5\u5bc4\u5b58\u5668 - \u7535\u8bdd\u673a\uff0c\u8bb0\u5f55\u8fd4\u56de\u5730\u5740</li> <li>R15 (PC)\uff1a\u7a0b\u5e8f\u8ba1\u6570\u5668 - \u5f53\u524d\u4efb\u52a1\u6307\u793a\u724c</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#aapcs","title":"\u5bc4\u5b58\u5668\u5206\u914d\u7ed9\u51fd\u6570\u7684\u89c4\u5219\uff08AAPCS\u8c03\u7528\u7ea6\u5b9a\uff09","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_12","title":"\u6240\u6709\u51fd\u6570\u5171\u7528\u5bc4\u5b58\u5668\uff0c\u4f46\u901a\u8fc7\u660e\u786e\u89c4\u5219\u534f\u4f5c\uff1a","text":"<p>\u53c2\u6570\u4f20\u9012\u89c4\u5219\uff1a</p> <pre><code>// \u6240\u6709\u51fd\u6570\u90fd\u9075\u5b88\u7edf\u4e00\u7684\u53c2\u6570\u4f20\u9012\u89c4\u5219\nvoid func(int a, int b, int c, int d, int e, int f);\n// \u8c03\u7528\u65f6\uff1a\n// R0 = a, R1 = b, R2 = c, R3 = d (\u524d4\u4e2a\u53c2\u6570)\n// [SP+0] = e, [SP+4] = f (\u7b2c5\u30016\u4e2a\u53c2\u6570\u901a\u8fc7\u6808\u4f20\u9012)\n</code></pre> <p>\u8fd4\u56de\u503c\u89c4\u5219\uff1a - \u6240\u6709\u51fd\u6570\u90fd\u901a\u8fc7R0\u8fd4\u56de\u7ed3\u679c</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_13","title":"\u53c2\u6570\u6570\u91cf\u4e0d\u540c\u7684\u5904\u7406\u65b9\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#14","title":"\u60c5\u51b51\uff1a4\u4e2a\u53ca\u4ee5\u4e0b\u53c2\u6570\uff08\u5168\u90e8\u7528\u5bc4\u5b58\u5668\uff09","text":"<pre><code>; \u8c03\u7528 func(1, 2, 3, 4)\nMOV R0, #1      ; \u53c2\u65701 \u2192 R0\nMOV R1, #2      ; \u53c2\u65702 \u2192 R1  \nMOV R2, #3      ; \u53c2\u65703 \u2192 R2\nMOV R3, #4      ; \u53c2\u65704 \u2192 R3\nBL func         ; \u8c03\u7528\u51fd\u6570\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#24","title":"\u60c5\u51b52\uff1a\u8d85\u8fc74\u4e2a\u53c2\u6570\uff08\u6df7\u5408\u4f7f\u7528\u5bc4\u5b58\u5668\u548c\u6808\uff09","text":"<pre><code>; \u8c03\u7528 func(1, 2, 3, 4, 5, 6)\nMOV R0, #1      ; \u53c2\u65701 \u2192 R0\nMOV R1, #2      ; \u53c2\u65702 \u2192 R1\nMOV R2, #3      ; \u53c2\u65703 \u2192 R2  \nMOV R3, #4      ; \u53c2\u65704 \u2192 R3\nSUB SP, SP, #8  ; \u4e3a\u989d\u5916\u53c2\u6570\u5206\u914d\u6808\u7a7a\u95f4\nMOV R4, #5\nSTR R4, [SP, #0] ; \u53c2\u65705 \u2192 [SP+0]\nMOV R4, #6\nSTR R4, [SP, #4] ; \u53c2\u65706 \u2192 [SP+4]\nBL func         ; \u8c03\u7528\u51fd\u6570\nADD SP, SP, #8  ; \u6e05\u7406\u6808\u7a7a\u95f4\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_14","title":"\u51fd\u6570\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u5171\u4eab\u5bc4\u5b58\u5668","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_15","title":"\u51fd\u6570\u5f00\u573a\u5178\u578b\u6a21\u5f0f\uff1a","text":"<pre><code>func:\n    PUSH {R4-R6, LR}    ; \u5982\u679c\u8981\u4f7f\u7528R4-R11\uff0c\u5fc5\u987b\u5148\u4fdd\u5b58\n\n    ; \u8bbf\u95ee\u53c2\u6570\uff1a\n    ; \u524d4\u4e2a\u53c2\u6570\u76f4\u63a5\u5728R0-R3\u4e2d\n    MOV R4, R0          ; \u53c2\u65701\u4fdd\u5b58\u5230R4\n    MOV R5, R1          ; \u53c2\u65702\u4fdd\u5b58\u5230R5\n\n    ; \u8bbf\u95ee\u7b2c5\u4e2a\u53ca\u4ee5\u540e\u7684\u53c2\u6570\uff08\u9700\u8981\u8ba1\u7b97\u6808\u504f\u79fb\uff09\n    LDR R6, [SP, #16]   ; \u53c2\u65705\u5728[SP+16]\uff08\u8df3\u8fc7PUSH\u7684\u5bc4\u5b58\u5668\uff09\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_16","title":"\u5bc4\u5b58\u5668\u4f7f\u7528\u7b56\u7565\uff1a","text":"<ul> <li>R0-R3\uff1a\u4e34\u65f6\u8ba1\u7b97\uff0c\u4efb\u4f55\u51fd\u6570\u90fd\u53ef\u4ee5\u76f4\u63a5\u7528\uff0c\u4e5f\u7528\u4e8e\u53c2\u6570\u4f20\u9012</li> <li>R4-R11\uff1a\u4efb\u4f55\u51fd\u6570\u60f3\u7528\u5c31\u5fc5\u987b\u5148\u4fdd\u5b58\u518d\u6062\u590d</li> <li>\u6808\uff1a\u7528\u4e8e\u4f20\u9012\u989d\u5916\u53c2\u6570\u548c\u4fdd\u5b58\u5c40\u90e8\u53d8\u91cf</li> <li>\u6240\u6709\u51fd\u6570\u90fd\u9075\u5b88\u540c\u6837\u7684\u89c4\u5219</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_17","title":"\u5404\u4e2a\u51fd\u6570\u5982\u4f55\u901a\u8fc7\u5171\u4eab\u5bc4\u5b58\u5668\u8054\u7cfb","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#1","title":"1. \u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u4f20\u9012\uff08\u8003\u8651\u591a\u53c2\u6570\u60c5\u51b5\uff09","text":"<pre><code>; main\u51fd\u6570\u51c6\u5907\u53c2\u6570\uff086\u4e2a\u53c2\u6570\uff09\nmain:\n    MOV R0, #10         ; \u53c2\u65701 \u2192 R0\n    MOV R1, #20         ; \u53c2\u65702 \u2192 R1\n    MOV R2, #30         ; \u53c2\u65703 \u2192 R2\n    MOV R3, #40         ; \u53c2\u65704 \u2192 R3\n    SUB SP, SP, #8      ; \u4e3a\u989d\u5916\u53c2\u6570\u5206\u914d\u7a7a\u95f4\n    MOV R4, #50\n    STR R4, [SP, #0]    ; \u53c2\u65705 \u2192 [SP+0]\n    MOV R4, #60         \n    STR R4, [SP, #4]    ; \u53c2\u65706 \u2192 [SP+4]\n    BL complex_calc     ; \u8c03\u7528\u51fd\u6570\n\n; complex_calc\u51fd\u6570\u63a5\u6536\u6240\u6709\u53c2\u6570\ncomplex_calc:\n    PUSH {R4-R6, LR}\n    ; \u63a5\u6536\u5bc4\u5b58\u5668\u4e2d\u7684\u53c2\u6570\n    MOV R4, R0          ; \u53c2\u65701 = 10\n    MOV R5, R1          ; \u53c2\u65702 = 20\n    ; \u63a5\u6536\u6808\u4e2d\u7684\u53c2\u6570\n    LDR R6, [SP, #16]   ; \u53c2\u65705 = 50\n    ; ... \u8ba1\u7b97 ...\n    MOV R0, R4          ; \u7ed3\u679c\u901a\u8fc7R0\u8fd4\u56de\n    POP {R4-R6, PC}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#2-r0-r3-r12","title":"2. \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff08R0-R3, R12\uff09\u7684\u534f\u4f5c","text":"<pre><code>main:\n    MOV R4, R0              ; \u5982\u679cR0\u6709\u91cd\u8981\u6570\u636e\uff0c\u5148\u4fdd\u5b58\u5230R4\n    BL other_func           ; \u8c03\u7528\u5176\u4ed6\u51fd\u6570\n    ; \u6211\u77e5\u9053other_func\u53ef\u80fd\u4f1a\u6539\u52a8R0-R3\uff0c\u6240\u4ee5\u4e0d\u4f9d\u8d56\u5b83\u4eec\n    MOV R0, R4              ; \u6062\u590d\u6211\u539f\u6765\u7684\u6570\u636e\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#3-r4-r11","title":"3. \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668\uff08R4-R11\uff09\u7684\u534f\u4f5c","text":"<pre><code>; \u4efb\u4f55\u51fd\u6570\u5982\u679c\u60f3\u7528R4-R11\uff0c\u90fd\u5fc5\u987b\uff1a\nmy_func:\n    PUSH {R4-R6}        ; \u5148\u4fdd\u5b58\u539f\u6765\u7684\u503c\n    ; ... \u4f7f\u7528R4-R6 ...  ; \u968f\u4fbf\u4f7f\u7528\n    POP {R4-R6}         ; \u6062\u590d\u539f\u6837\uff0c\u4e0d\u5f71\u54cd\u5176\u4ed6\u51fd\u6570\n    BX LR\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_18","title":"\u5b8c\u6574\u7684\u534f\u4f5c\u793a\u4f8b\uff08\u5305\u542b\u591a\u53c2\u6570\uff09","text":"<pre><code>// \u6240\u6709\u51fd\u6570\u5171\u4eab\u540c\u4e00\u5957\u5bc4\u5b58\u5668\uff0c\u4f46\u901a\u8fc7\u89c4\u5219\u534f\u4f5c\nint add(int a, int b) {\n    return a + b;       // \u7528R0,R1\u63a5\u6536\u53c2\u6570\uff0cR0\u8fd4\u56de\u7ed3\u679c\n}\n\nint complex_calc(int a, int b, int c, int d, int e, int f) {\n    // \u524d4\u4e2a\u53c2\u6570\u5728\u5bc4\u5b58\u5668\uff0c\u540e2\u4e2a\u5728\u6808\u4e2d\n    int sum = a + b + c + d + e + f;\n    return add(sum, 100); // \u7ee7\u7eed\u8c03\u7528\u5176\u4ed6\u51fd\u6570\n}\n</code></pre> <pre><code>; \u6240\u6709\u51fd\u6570\u5171\u7528\u5bc4\u5b58\u5668\uff0c\u4f46\u5404\u53f8\u5176\u804c\nadd:\n    ; \u6211\u77e5\u9053\uff1aR0=a, R1=b\u6765\u81ea\u8c03\u7528\u8005\n    ADD R0, R0, R1      ; \u8ba1\u7b97a+b\n    ; \u6211\u77e5\u9053\uff1a\u8c03\u7528\u8005\u671f\u671b\u7ed3\u679c\u5728R0\n    BX LR               ; \u8fd4\u56de\n\ncomplex_calc:\n    PUSH {R4-R6, LR}    ; \u6211\u8981\u7528R4-R6\uff0c\u6240\u4ee5\u5148\u4fdd\u5b58\n    ; \u63a5\u6536\u524d4\u4e2a\u53c2\u6570\uff1aR0=a, R1=b, R2=c, R3=d\n    MOV R4, R0\n    MOV R5, R1\n    ADD R4, R4, R5      ; a + b\n    ADD R4, R4, R2      ; + c\n    ADD R4, R4, R3      ; + d\n\n    ; \u63a5\u6536\u6808\u4e2d\u7684\u7b2c5\u30016\u4e2a\u53c2\u6570\n    LDR R5, [SP, #16]   ; \u53c2\u6570e (\u8df3\u8fc7PUSH\u76844\u4e2a\u5bc4\u5b58\u5668)\n    LDR R6, [SP, #20]   ; \u53c2\u6570f\n    ADD R4, R4, R5      ; + e\n    ADD R4, R4, R6      ; + f\n\n    ; \u8c03\u7528add\u51fd\u6570\n    MOV R0, R4          ; \u7b2c\u4e00\u4e2a\u53c2\u6570 = sum\n    MOV R1, #100        ; \u7b2c\u4e8c\u4e2a\u53c2\u6570 = 100\n    BL add\n\n    ; \u6211\u77e5\u9053\uff1aadd\u7684\u7ed3\u679c\u5728R0\u4e2d\n    POP {R4-R6, PC}     ; \u6062\u590d\u5bc4\u5b58\u5668\uff0c\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/ARM%E6%9E%B6%E6%9E%84/%E9%80%9A%E7%94%A8%E5%AF%84%E5%AD%98%E5%99%A8/#_19","title":"\u5173\u952e\u7406\u89e3\u70b9","text":"<ol> <li>\u4e0d\u662f\u6bcf\u4e2a\u51fd\u6570\u6709\u4e13\u5c5e\u5bc4\u5b58\u5668\uff0c\u800c\u662f\u6240\u6709\u51fd\u6570\u5171\u752816\u4e2a\u5bc4\u5b58\u5668</li> <li>\u901a\u8fc7\u660e\u786e\u7684\u4f7f\u7528\u89c4\u5219\u6765\u907f\u514d\u51b2\u7a81</li> <li>\u53c2\u6570\u4f20\u9012\uff1a</li> <li>\u524d4\u4e2a\uff1aR0-R3\u5bc4\u5b58\u5668\uff08\u6700\u5feb\uff09</li> <li>\u7b2c5\u4e2a\u53ca\u4ee5\u540e\uff1a\u6808\u7a7a\u95f4\uff08\u7a0d\u6162\uff09</li> <li>\u8fd4\u56de\u503c\uff1a\u59cb\u7ec8\u901a\u8fc7R0\u8fd4\u56de</li> <li>\u957f\u671f\u6570\u636e\u8981\u4e48\u7528R4-R11\uff08\u4f46\u8981\u4fdd\u5b58\u6062\u590d\uff09\uff0c\u8981\u4e48\u7528\u6808</li> </ol> <p>\u8fd9\u79cd\u8bbe\u8ba1\u65e2\u9ad8\u6548\uff08\u5927\u591a\u6570\u8c03\u7528\u7528\u5bc4\u5b58\u5668\uff09\u53c8\u7075\u6d3b\uff08\u652f\u6301\u4efb\u610f\u591a\u53c2\u6570\uff09\uff0c\u5728\u6027\u80fd\u548c\u5b9e\u7528\u6027\u95f4\u5b8c\u7f8e\u5e73\u8861\uff01</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/","title":"RTOS\u7b80\u4ecb","text":"<p>\u4e0e\u4e4b\u5bf9\u5e94\u7684\u6982\u5ff5\u662f\u88f8\u673a\u3002RTOS\u5168\u79f0Real Time OS \u5373\u5b9e\u65f6\u64cd\u4f5c\u7cfb\u7edf\u3002\u901a\u5e38\u7528\u4e8e\u9700\u8981\u5728\u4e25\u683c\u65f6\u95f4\u9650\u5236\u5185\u5bf9\u5916\u90e8\u4e8b\u4ef6\u505a\u51fa\u53cd\u5e94\u7684\u5d4c\u5165\u5f0f\u7cfb\u7edf\uff0c\u6709\u591a\u4efb\u52a1\u5904\u7406\u3001\u8c03\u5ea6\u3001\u5b9e\u65f6\u8c03\u5ea6\u7b49\u529f\u80fd\u3002\u7279\u70b9\uff1a\u5206\u800c\u6cbb\u4e4b\u3001\u5ef6\u65f6\u4e0b\u653e\u3001\u62a2\u5360\u5f0f\u3001\u4efb\u52a1\u5806\u6808\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_1","title":"\u524d\u7f6e\u77e5\u8bc6","text":"<p>\u89c1../ARM\u67b6\u6784/ARM\u67b6\u6784|ARM\u67b6\u6784</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_2","title":"\u57fa\u7840\u77e5\u8bc6","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_3","title":"\u4efb\u52a1\u8c03\u5ea6","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_4","title":"\u65b9\u5f0f","text":"<ol> <li>\u62a2\u5360\u5f0f\uff1a\u9ad8\u7684\u62a2\u5360\u4f4e\u7684\uff0c\u9ad8\u4f18\u5148\u7ea7\u963b\u585e\u65f6\uff08\u6bd4\u5982delay\u51fd\u6570\uff09\u4f1a\u628aCPU\u63a7\u5236\u6743\u4e0b\u653e\u3002</li> <li>\u65f6\u95f4\u7247\uff1a\u540c\u7b49\u4f18\u5148\u7ea7\u6709\u65f6\u949f\u8282\u62cd\u8d1f\u8d23\u5207\u6362\u4efb\u52a1\uff08\u4e00\u4e2a\u65f6\u95f4\u7247\u4e3aSysTick\u4e2d\u65ad\u5468\u671f\uff09\u3002\u6ca1\u6709\u7528\u5b8c\u7684\u65f6\u95f4\u7247\uff08\u4e2d\u95f4\u6709\u963b\u585e\u4f1a\u76f4\u63a5\u8df3\u8fc7\uff0c\u6267\u884c\u4e0d\u5230\u4e00\u4e2a\u65f6\u95f4\u7247\uff09\u76f4\u63a5\u4e22\u5f03\u3002</li> <li>\u534f\u7a0b\u5f0f\u8c03\u5ea6\uff1a\u4e0d\u88ab\u62a2\u5360\uff08\u5df2\u7ecf\u8fc7\u65f6\uff09</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_5","title":"\u4efb\u52a1\u72b6\u6001","text":"<ol> <li>\u8fd0\u884c\u6001</li> <li>\u5c31\u7eea\u6001</li> <li>\u963b\u585e\u6001\uff1a\u63a7\u5236\u6743\u4e0b\u653e\u7ed9\u4e0b\u7ea7\u5c31\u7eea\u6001</li> <li>\u6302\u8d77\u6001\uff1a\u8c03\u7528<code>vTaskSuspend()</code>\u6682\u505c\uff0c\u89e3\u9664(<code>vTaskResume()</code>)\u540e\u56de\u5230\u5c31\u7eea\u6001\u3002</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_6","title":"* \u4efb\u52a1\u72b6\u6001\u5217\u8868","text":"<ol> <li>\u5c31\u7eea\u5217\u8868\uff1a<code>pxReadyTasksLists[x]</code>\uff0cx\u4ee3\u8868\u4f18\u5148\u7ea7\u6570\u76ee\uff0832\u4e2d\u4e3a31\uff0c\u6700\u4f4e\u4f18\u5148\u7ea7\u4fdd\u7559\u7ed9\u7a7a\u95f2\u4efb\u52a1\uff09\u3002\u540c\u65f6\u670932\u4f4d\u6570\u503c\u5b58\u50a8\u4efb\u52a1\u5b58\u5728\u6807\u5fd7\u4f4d\u3002</li> <li>\u963b\u585e\u5217\u8868\uff1a<code>pxDelayedTaskList</code></li> <li>\u6302\u8d77\u5217\u8868\uff1a<code>xSuspendedTaskList</code></li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_7","title":"\u4efb\u52a1\u5806\u6808","text":"<ul> <li>\u4efb\u52a1\u5806\u6808</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/RTOS/#_8","title":"\u76ee\u5f55","text":"<ul> <li>\u4efb\u52a1\u5207\u6362</li> <li>FreeRTOS/FreeRTOS|FreeRTOS</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/","title":"\u4efb\u52a1\u6808\u7684\u57fa\u672c\u7ed3\u6784","text":"<p>RTOS\u4e2d\u6bcf\u4e2a\u4efb\u52a1\u90fd\u6709\u72ec\u7acb\u7684\u6808\u7a7a\u95f4\uff0c\u6808\u5e95\u4f4d\u4e8e\u9ad8\u5730\u5740\uff0c\u6808\u5411\u4f4e\u5730\u5740\u589e\u957f\uff1a</p> <pre><code>\u5178\u578b\u4efb\u52a1\u6808\u5185\u5b58\u5e03\u5c40\uff1a\n+------------------+ \u2190 \u6808\u8d77\u59cb\u5730\u5740 (\u9ad8\u5730\u5740)\n|   \u6808\u4fdd\u62a4\u533a\u57df     |\n|   (\u9b54\u6570\u586b\u5145)     |\n+------------------+\n|   \u672a\u4f7f\u7528\u6808\u7a7a\u95f4   |\n|                 |\n+------------------+\n|   \u51fd\u6570\u8c03\u7528\u5e27     |\n|   \u5c40\u90e8\u53d8\u91cf       |\n+------------------+\n|   \u4efb\u52a1\u4e0a\u4e0b\u6587     |\n|   (\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668) |\n+------------------+ \u2190 \u5f53\u524d\u6808\u6307\u9488SP\u4f4d\u7f6e (\u4f4e\u5730\u5740)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_2","title":"\u4efb\u52a1\u4e0a\u4e0b\u6587","text":"<p>\u4efb\u52a1\u4e0a\u4e0b\u6587\u5305\u542b\u5904\u7406\u5668\u5b8c\u6574\u72b6\u6001\uff0c\u5206\u4e3a\u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u548c\u8f6f\u4ef6\u624b\u52a8\u4fdd\u5b58\u4e24\u90e8\u5206\uff1a</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_3","title":"\u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668","text":"<ul> <li>R0-R3\uff1a\u53c2\u6570\u5bc4\u5b58\u5668</li> <li>R12\uff1a\u4e34\u65f6\u5bc4\u5b58\u5668  </li> <li>LR\uff08R14\uff09\uff1a\u94fe\u63a5\u5bc4\u5b58\u5668</li> <li>PC\uff08R15\uff09\uff1a\u7a0b\u5e8f\u8ba1\u6570\u5668</li> <li>xPSR\uff1a\u7a0b\u5e8f\u72b6\u6001\u5bc4\u5b58\u5668</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_4","title":"\u8f6f\u4ef6\u624b\u52a8\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668","text":"<ul> <li>R4-R11\uff1a\u901a\u7528\u5bc4\u5b58\u5668</li> <li>\u53ef\u9009\uff1a\u6d6e\u70b9\u5bc4\u5b58\u5668\u3001\u7279\u6b8a\u529f\u80fd\u5bc4\u5b58\u5668</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_5","title":"\u4efb\u52a1\u5207\u6362\u89e6\u53d1\u673a\u5236","text":"<p>\u4efb\u52a1\u5207\u6362\u7531\u591a\u79cd\u6761\u4ef6\u89e6\u53d1\uff0c\u5b8c\u6574\u7684\u5207\u6362\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <pre><code>\u4efb\u52a1\u5207\u6362\u5b8c\u6574\u6d41\u7a0b\uff1a\n+------------------+\n|  \u4efb\u52a1A\u6b63\u5e38\u8fd0\u884c   |\n|  SP_A\u6307\u5411\u4efb\u52a1A\u6808 |\n+------------------+\n         |\n         \u2193 (\u4e2d\u65ad/\u7cfb\u7edf\u8c03\u7528\u89e6\u53d1)\n+------------------+\n|  \u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58    |\n|  R0-R3, R12,     |\n|  LR, PC, xPSR    |\n+------------------+\n         |\n         \u2193 (\u8fdb\u5165PendSV\u5f02\u5e38)\n+------------------+\n|  \u8f6f\u4ef6\u624b\u52a8\u4fdd\u5b58    |\n|  R4-R11\u5230\u4efb\u52a1A\u6808 |\n+------------------+\n         |\n         \u2193\n+------------------+\n|  \u66f4\u65b0TCB_A\u4e2d\u7684   |\n|  \u6808\u6307\u9488SP_A      |\n+------------------+\n         |\n         \u2193\n+------------------+\n|  \u8c03\u5ea6\u5668\u9009\u62e9      |\n|  \u4e0b\u4e00\u4e2a\u4efb\u52a1B     |\n+------------------+\n         |\n         \u2193\n+------------------+\n|  \u4eceTCB_B\u52a0\u8f7d     |\n|  \u6808\u6307\u9488SP_B      |\n+------------------+\n         |\n         \u2193\n+------------------+\n|  \u8f6f\u4ef6\u624b\u52a8\u6062\u590d    |\n|  R4-R11\u4ece\u4efb\u52a1B\u6808 |\n+------------------+\n         |\n         \u2193\n+------------------+\n|  \u66f4\u65b0PSP\u4e3aSP_B   |\n+------------------+\n         |\n         \u2193 (\u5f02\u5e38\u8fd4\u56de)\n+------------------+\n|  \u786c\u4ef6\u81ea\u52a8\u6062\u590d    |\n|  R0-R3, R12,     |\n|  LR, PC, xPSR    |\n+------------------+\n         |\n         \u2193\n+------------------+\n|  \u4efb\u52a1B\u7ee7\u7eed\u8fd0\u884c   |\n|  SP_B\u6307\u5411\u4efb\u52a1B\u6808 |\n+------------------+\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_6","title":"\u5b8c\u6574\u7684\u6808\u5e27\u7ed3\u6784","text":"<p>\u4efb\u52a1\u5207\u6362\u65f6\u7684\u5b8c\u6574\u6808\u5e27\u7ed3\u6784\uff1a</p> <pre><code>\u5b8c\u6574\u4efb\u52a1\u6808\u5e27\u5e03\u5c40\uff1a\n+------------------+ \u2190 \u6808\u5e95 (\u9ad8\u5730\u5740)\n|   \u6808\u4fdd\u62a4\u533a\u57df     |\n|   (0xDEADBEEF\u7b49) |\n+------------------+\n|   \u5386\u53f2\u6808\u6570\u636e     |\n|   \u51fd\u6570\u8c03\u7528\u5e27     |\n|   \u5c40\u90e8\u53d8\u91cf\u7b49      |\n+------------------+\n|  \u624b\u52a8\u4fdd\u5b58\u5bc4\u5b58\u5668   | \u2190 \u8f6f\u4ef6\u4fdd\u5b58\u533a\u57df\u5f00\u59cb\n|      R11        |\n+------------------+\n|      R10        |\n+------------------+\n|      R9         |\n+------------------+\n|      R8         |\n+------------------+\n|      R7         |\n+------------------+\n|      R6         |\n+------------------+\n|      R5         |\n+------------------+\n|      R4         |\n+------------------+ \u2190 \u624b\u52a8\u4fdd\u5b58\u7ed3\u675f\n|  \u81ea\u52a8\u4fdd\u5b58\u5bc4\u5b58\u5668   | \u2190 \u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u533a\u57df\u5f00\u59cb\n|      R0         |\n+------------------+\n|      R1         |\n+------------------+\n|      R2         |\n+------------------+\n|      R3         |\n+------------------+\n|      R12        |\n+------------------+\n|      LR         |\n+------------------+\n|      PC         |\n+------------------+\n|      xPSR       |\n+------------------+ \u2190 \u5f53\u524dPSP\u6307\u5411\u7684\u4f4d\u7f6e (\u6808\u9876)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_7","title":"\u4e0a\u4e0b\u6587\u4fdd\u5b58\u8fc7\u7a0b\u8be6\u89e3","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_8","title":"\u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u9636\u6bb5","text":"<p>\u5f53\u4e2d\u65ad\u6216\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u90e8\u5206\u5bc4\u5b58\u5668\uff1a</p> <pre><code>\u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u8fc7\u7a0b\uff1a\n\u539f\u59cb\u6808\u72b6\u6001\uff1a\n+------------------+ \u2190 PSP\n|   \u4efb\u52a1\u6b63\u5e38\u6570\u636e   |\n|                 |\n+------------------+\n\n\u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u540e\uff1a\n+------------------+ \u2190 \u539f\u59cbPSP\n|   \u4efb\u52a1\u6b63\u5e38\u6570\u636e   |\n|                 |\n+------------------+\n|      xPSR       | \u2190 \u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u5f00\u59cb\n+------------------+\n|       PC        |\n+------------------+\n|       LR        |\n+------------------+\n|      R12        |\n+------------------+\n|       R3        |\n+------------------+\n|       R2        |\n+------------------+\n|       R1        |\n+------------------+\n|       R0        |\n+------------------+ \u2190 \u65b0\u7684PSP (\u786c\u4ef6\u4fdd\u5b58\u540e\u6808\u9876)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_9","title":"\u8f6f\u4ef6\u624b\u52a8\u4fdd\u5b58\u9636\u6bb5","text":"<p>\u5728PendSV\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u4e2d\u624b\u52a8\u4fdd\u5b58\u5269\u4f59\u5bc4\u5b58\u5668\uff1a</p> <pre><code>PendSV_Handler:\n    ; \u83b7\u53d6\u5f53\u524d\u4efb\u52a1\u6808\u6307\u9488\n    MRS R0, PSP                   ; R0 = \u5f53\u524dPSP\u503c\n\n    ; \u68c0\u67e5\u662f\u5426\u662f\u7b2c\u4e00\u6b21\u4efb\u52a1\u5207\u6362\n    CBZ R0, skip_save             ; \u5982\u679cPSP\u4e3a0\uff0c\u8df3\u8fc7\u4fdd\u5b58\n\n    ; \u624b\u52a8\u4fdd\u5b58R4-R11\u5230\u4efb\u52a1\u6808\n    STMDB R0!, {R4-R11}           ; \u9012\u51cf\u5b58\u50a8\uff0c\u5411\u4f4e\u5730\u5740\u4fdd\u5b58\n\n    ; \u66f4\u65b0TCB\u4e2d\u7684\u6808\u6307\u9488\n    LDR R1, =CurrentTCB\n    LDR R2, [R1]\n    STR R0, [R2]                  ; \u4fdd\u5b58\u65b0PSP\u5230TCB\n\nskip_save:\n    ; \u7ee7\u7eed\u6267\u884c\u4efb\u52a1\u5207\u6362...\n</code></pre> <p>\u4fdd\u5b58\u540e\u7684\u6808\u72b6\u6001\u53d8\u5316\uff1a</p> <pre><code>\u8f6f\u4ef6\u624b\u52a8\u4fdd\u5b58\u540e\u7684\u6808\uff1a\n+------------------+ \u2190 \u539f\u59cbPSP\n|   \u4efb\u52a1\u6b63\u5e38\u6570\u636e   |\n|                 |\n+------------------+\n|      xPSR       |\n+------------------+\n|       PC        |\n+------------------+\n|       LR        |\n+------------------+\n|      R12        |\n+------------------+\n|       R3        |\n+------------------+\n|       R2        |\n+------------------+\n|       R1        |\n+------------------+\n|       R0        |\n+------------------+ \u2190 \u786c\u4ef6\u4fdd\u5b58\u540e\u4f4d\u7f6e\n|       R4        | \u2190 \u8f6f\u4ef6\u624b\u52a8\u4fdd\u5b58\u5f00\u59cb\n+------------------+\n|       R5        |\n+------------------+\n|       R6        |\n+------------------+\n|       R7        |\n+------------------+\n|       R8        |\n+------------------+\n|       R9        |\n+------------------+\n|      R10        |\n+------------------+\n|      R11        |\n+------------------+ \u2190 \u65b0\u7684PSP (\u8f6f\u4ef6\u4fdd\u5b58\u540e\u6808\u9876)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_10","title":"\u4e0a\u4e0b\u6587\u6062\u590d\u8fc7\u7a0b\u8be6\u89e3","text":"<p>\u4e0a\u4e0b\u6587\u6062\u590d\u662f\u4fdd\u5b58\u8fc7\u7a0b\u7684\u7cbe\u786e\u9006\u5e8f\uff1a</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_11","title":"\u8f6f\u4ef6\u624b\u52a8\u6062\u590d\u9636\u6bb5","text":"<pre><code>PendSV_Handler_Restore:\n    ; \u5207\u6362\u5230\u65b0\u4efb\u52a1\n    LDR R1, =NextTCB\n    LDR R2, [R1]\n    LDR R0, [R2]                 ; \u83b7\u53d6\u65b0\u4efb\u52a1\u7684\u6808\u6307\u9488\n\n    ; \u624b\u52a8\u6062\u590dR4-R11\n    LDMIA R0!, {R4-R11}          ; \u9012\u589e\u52a0\u8f7d\uff0c\u4ece\u6808\u4e2d\u6062\u590d\u5bc4\u5b58\u5668\n\n    ; \u66f4\u65b0PSP\u6307\u5411\u786c\u4ef6\u81ea\u52a8\u4fdd\u5b58\u533a\u57df\n    MSR PSP, R0\n\n    ; \u51c6\u5907\u5f02\u5e38\u8fd4\u56de\n    ORR LR, LR, #0x04           ; \u786e\u4fdd\u8fd4\u56de\u65f6\u4f7f\u7528PSP\n    BX LR                        ; \u5f02\u5e38\u8fd4\u56de\uff0c\u89e6\u53d1\u786c\u4ef6\u81ea\u52a8\u6062\u590d\n</code></pre> <p>\u6062\u590d\u8fc7\u7a0b\u4e2d\u7684\u6808\u72b6\u6001\u53d8\u5316\uff1a</p> <pre><code>\u4e0a\u4e0b\u6587\u6062\u590d\u8fc7\u7a0b\uff1a\n\u6062\u590d\u524d\u7684\u6808\u72b6\u6001\uff1a\n+------------------+ \u2190 \u6808\u5e95\n|   \u4efb\u52a1B\u5386\u53f2\u6570\u636e   |\n|                 |\n+------------------+\n|      xPSR       |\n+------------------+\n|       PC        |\n+------------------+\n|       LR        |\n+------------------+\n|      R12        |\n+------------------+\n|       R3        |\n+------------------+\n|       R2        |\n+------------------+\n|       R1        |\n+------------------+\n|       R0        |\n+------------------+\n|       R4        |\n+------------------+\n|       R5        |\n+------------------+\n|       R6        |\n+------------------+\n|       R7        |\n+------------------+\n|       R8        |\n+------------------+\n|       R9        |\n+------------------+\n|      R10        |\n+------------------+\n|      R11        |\n+------------------+ \u2190 \u6062\u590d\u524dPSP\u6307\u5411\u7684\u4f4d\u7f6e\n\n\u6062\u590dR4-R11\u540e\uff1a\n+------------------+ \u2190 \u6808\u5e95\n|   \u4efb\u52a1B\u5386\u53f2\u6570\u636e   |\n|                 |\n+------------------+\n|      xPSR       |\n+------------------+\n|       PC        |\n+------------------+\n|       LR        |\n+------------------+\n|      R12        |\n+------------------+\n|       R3        |\n+------------------+\n|       R2        |\n+------------------+\n|       R1        |\n+------------------+\n|       R0        |\n+------------------+ \u2190 \u6062\u590d\u540ePSP\u6307\u5411\u7684\u4f4d\u7f6e\n|   \u5df2\u5f39\u51fa\u7684R4-R11  | (\u6570\u636e\u4ecd\u5728\u6808\u4e2d\uff0c\u4f46\u5bc4\u5b58\u5668\u5df2\u6062\u590d)\n+------------------+\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_12","title":"\u786c\u4ef6\u81ea\u52a8\u6062\u590d\u9636\u6bb5","text":"<p>\u5f02\u5e38\u8fd4\u56de\u65f6\uff0c\u786c\u4ef6\u81ea\u52a8\u6062\u590d\u5269\u4f59\u5bc4\u5b58\u5668\uff1a</p> <pre><code>\u786c\u4ef6\u81ea\u52a8\u6062\u590d\u8fc7\u7a0b\uff1a\n\u5f02\u5e38\u8fd4\u56de\u65f6\u786c\u4ef6\u81ea\u52a8\uff1a\n1. \u4ecePSP\u6307\u5411\u7684\u4f4d\u7f6e\u5f00\u59cb\u5f39\u51fa\u5bc4\u5b58\u5668\n2. \u4f9d\u6b21\u6062\u590dR0, R1, R2, R3, R12, LR, PC, xPSR\n3. PSP\u81ea\u52a8\u66f4\u65b0\u5230\u539f\u59cb\u4f4d\u7f6e\n\n\u6062\u590d\u540e\u7684\u6808\u72b6\u6001\uff1a\n+------------------+ \u2190 \u6808\u5e95\n|   \u4efb\u52a1B\u5386\u53f2\u6570\u636e   |\n|                 |\n+------------------+ \u2190 \u6062\u590d\u540ePSP\u6307\u5411\u7684\u4f4d\u7f6e\n|   \u5df2\u5f39\u51fa\u7684\u6240\u6709     |\n|   \u4e0a\u4e0b\u6587\u6570\u636e      |\n+------------------+\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_13","title":"\u5b8c\u6574\u7684\u6c47\u7f16\u5b9e\u73b0","text":"<p>\u57fa\u4e8eARM Cortex-M\u67b6\u6784\u7684\u5b8c\u6574\u4efb\u52a1\u5207\u6362\u4ee3\u7801\uff1a</p> <pre><code>; \u5e38\u91cf\u5b9a\u4e49\nCurrentTCB    DCD 0    ; \u5f53\u524d\u4efb\u52a1TCB\u6307\u9488\nNextTCB       DCD 0    ; \u4e0b\u4e00\u4e2a\u4efb\u52a1TCB\u6307\u9488\n\n; PendSV\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f - \u4efb\u52a1\u5207\u6362\u6838\u5fc3\nPendSV_Handler:\n    ; \u7981\u7528\u4e2d\u65ad\uff0c\u786e\u4fdd\u539f\u5b50\u64cd\u4f5c\n    CPSID I\n\n    ; \u68c0\u67e5\u662f\u5426\u9700\u8981\u4fdd\u5b58\u5f53\u524d\u4efb\u52a1\u4e0a\u4e0b\u6587\n    MRS R0, PSP                   ; \u83b7\u53d6\u5f53\u524d\u4efb\u52a1\u6808\u6307\u9488\n    CBZ R0, PendSV_Restore        ; \u5982\u679cPSP\u4e3a0\uff0c\u662f\u7b2c\u4e00\u6b21\u5207\u6362\uff0c\u8df3\u8fc7\u4fdd\u5b58\n\n    ; \u4fdd\u5b58\u5f53\u524d\u4efb\u52a1\u4e0a\u4e0b\u6587\n    ; \u786c\u4ef6\u5df2\u81ea\u52a8\u4fdd\u5b58: xPSR, PC, LR, R12, R0-R3\n    ; \u9700\u8981\u624b\u52a8\u4fdd\u5b58: R4-R11\n    STMDB R0!, {R4-R11}           ; \u4fdd\u5b58R4-R11\u5230\u4efb\u52a1\u6808\n\n    ; \u66f4\u65b0\u5f53\u524d\u4efb\u52a1\u7684\u6808\u6307\u9488\u5230TCB\n    LDR R1, =CurrentTCB\n    LDR R2, [R1]\n    STR R0, [R2]                  ; \u4fdd\u5b58\u66f4\u65b0\u540e\u7684PSP\u5230TCB\n\nPendSV_Restore:\n    ; \u6062\u590d\u4e0b\u4e00\u4e2a\u4efb\u52a1\u7684\u4e0a\u4e0b\u6587\n    LDR R1, =NextTCB\n    LDR R2, [R1]\n    LDR R0, [R2]                  ; \u83b7\u53d6\u65b0\u4efb\u52a1\u7684\u6808\u6307\u9488\n\n    ; \u624b\u52a8\u6062\u590dR4-R11\n    LDMIA R0!, {R4-R11}           ; \u4ece\u6808\u4e2d\u6062\u590dR4-R11\n\n    ; \u66f4\u65b0PSP\u4e3a\u65b0\u4efb\u52a1\u7684\u6808\u6307\u9488\n    MSR PSP, R0\n\n    ; \u66f4\u65b0CurrentTCB\u4e3aNextTCB\n    LDR R1, =CurrentTCB\n    LDR R2, =NextTCB\n    LDR R3, [R2]\n    STR R3, [R1]\n\n    ; \u542f\u7528\u4e2d\u65ad\n    CPSIE I\n\n    ; \u5f02\u5e38\u8fd4\u56de\uff0c\u786c\u4ef6\u5c06\u81ea\u52a8\u6062\u590d: xPSR, PC, LR, R12, R0-R3\n    ORR LR, LR, #0x04             ; \u786e\u4fdd\u8fd4\u56de\u65f6\u4f7f\u7528PSP\n    BX LR                         ; \u8fd4\u56de\u5230\u65b0\u4efb\u52a1\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_14","title":"\u6808\u6307\u9488\u7ba1\u7406\u673a\u5236","text":"<p>\u4efb\u52a1\u63a7\u5236\u5757(TCB)\u4e0e\u4efb\u52a1\u6808\u7684\u5173\u7cfb\uff1a</p> <pre><code>\u4efb\u52a1\u7ba1\u7406\u6570\u636e\u7ed3\u6784\uff1a\nTCB\u7ed3\u6784\uff1a\n+------------------+\n|  \u4efb\u52a1ID         |\n|  \u4efb\u52a1\u72b6\u6001       |\n|  \u4f18\u5148\u7ea7         |\n|  \u6808\u8d77\u59cb\u5730\u5740     | ---\u2192 +------------------+ \u2190 \u6808\u5e95\n|  \u6808\u5927\u5c0f         |      |   \u4efb\u52a1\u6808\u7a7a\u95f4     |\n|  \u5f53\u524d\u6808\u6307\u9488SP   | ---\u2192 |                 |\n|  \u7b49\u5f85\u4e8b\u4ef6       |      |                 |\n|  \u65f6\u95f4\u7247\u8ba1\u6570\u5668   |      |                 |\n+------------------+      +------------------+ \u2190 SP\u6307\u5411\u7684\u4f4d\u7f6e\n</code></pre> <p>\u4efb\u52a1\u5207\u6362\u65f6\u7684\u6808\u6307\u9488\u66f4\u65b0\uff1a</p> <pre><code>\u6808\u6307\u9488\u5207\u6362\u8fc7\u7a0b\uff1a\n\u4efb\u52a1A \u2192 \u4efb\u52a1B\u5207\u6362\uff1a\n\n\u4efb\u52a1A\u8fd0\u884c\u4e2d:\nTCB_A.SP \u2192 +------------------+ \u2190 PSP\n           |   \u4efb\u52a1A\u6808\u6570\u636e     |\n           |                 |\n           +------------------+\n\n\u4fdd\u5b58\u4e0a\u4e0b\u6587\u540e:\nTCB_A.SP \u2192 +------------------+ \u2190 \u65b0PSP (\u4fdd\u5b58\u540e)\n           |   \u4efb\u52a1A\u4e0a\u4e0b\u6587     |\n           |                 |\n           +------------------+\n\n\u5207\u6362\u5230\u4efb\u52a1B:\nTCB_B.SP \u2192 +------------------+ \u2190 \u65b0PSP (\u6062\u590d\u524d)\n           |   \u4efb\u52a1B\u4e0a\u4e0b\u6587     |\n           |                 |\n           +------------------+\n\n\u6062\u590d\u4e0a\u4e0b\u6587\u540e:\nTCB_B.SP \u2192 +------------------+ \u2190 PSP (\u6062\u590d\u540e)\n           |   \u4efb\u52a1B\u6808\u6570\u636e     |\n           |                 |\n           +------------------+\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_15","title":"\u4e0d\u540c\u67b6\u6784\u7684\u5dee\u5f02\u5904\u7406","text":"<p>\u5404\u67b6\u6784\u4e0a\u4e0b\u6587\u4fdd\u5b58\u7684\u5dee\u5f02\uff1a</p> \u7279\u6027 ARM Cortex-M x86 RISC-V \u81ea\u52a8\u4fdd\u5b58\u5bc4\u5b58\u5668 xPSR, PC, LR, R12, R0-R3 SS, SP, FLAGS, CS, IP PC, \u72b6\u6001\u5bc4\u5b58\u5668 \u624b\u52a8\u4fdd\u5b58\u5bc4\u5b58\u5668 R4-R11 \u901a\u7528\u5bc4\u5b58\u5668 \u8c03\u7528\u8005\u4fdd\u5b58\u5bc4\u5b58\u5668 \u6808\u589e\u957f\u65b9\u5411 \u6ee1\u9012\u51cf \u6ee1\u9012\u51cf \u53ef\u914d\u7f6e \u5f02\u5e38\u8fd4\u56de\u6307\u4ee4 BX LR IRET MRET"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2/#_16","title":"\u6808\u6ea2\u51fa\u68c0\u6d4b\u4e0e\u4f18\u5316","text":"<p>\u6808\u4f7f\u7528\u76d1\u63a7\u548c\u4f18\u5316\u7b56\u7565\uff1a</p> <pre><code>\u6808\u4f7f\u7528\u5206\u6790\uff1a\n+------------------+ \u2190 \u6808\u5e95\n|   \u6808\u4fdd\u62a4\u533a\u57df     |\n|   (\u9b54\u6570\u68c0\u6d4b)     |\n+------------------+ \u2190 \u6808\u8fb9\u754c\n|   \u672a\u4f7f\u7528\u7a7a\u95f4     |\n|                 |\n+------------------+ \u2190 \u6700\u5927\u5386\u53f2\u4f7f\u7528\u6c34\u4f4d\n|   \u5df2\u4f7f\u7528\u7a7a\u95f4     |\n|                 |\n+------------------+ \u2190 \u5f53\u524dSP\u4f4d\u7f6e\n|   \u5b89\u5168\u8fb9\u9645       |\n+------------------+ \u2190 \u6808\u9876\n\n\u4f18\u5316\u7b56\u7565\uff1a\n\u2022 \u6839\u636e\u6700\u5927\u4f7f\u7528\u6c34\u4f4d\u8c03\u6574\u6808\u5927\u5c0f\n\u2022 \u8bbe\u7f6e\u6808\u4fdd\u62a4\u533a\u57df\u68c0\u6d4b\u6ea2\u51fa\n\u2022 \u907f\u514d\u6df1\u5ea6\u9012\u5f52\u548c\u5927\u578b\u5c40\u90e8\u53d8\u91cf\n\u2022 \u4f7f\u7528\u9759\u6001\u5206\u6790\u5de5\u5177\u786e\u5b9a\u5408\u9002\u6808\u5927\u5c0f\n</code></pre> <p>\u8fd9\u6837\u7684\u8bbe\u8ba1\u786e\u4fdd\u4e86\u4efb\u52a1\u5207\u6362\u65f6\u4e0a\u4e0b\u6587\u7684\u5b8c\u6574\u4fdd\u5b58\u548c\u7cbe\u786e\u6062\u590d\uff0c\u662fRTOS\u53ef\u9760\u8fd0\u884c\u7684\u57fa\u7840\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/","title":"\u4efb\u52a1\u5806\u6808","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#_1","title":"\u4efb\u52a1\u5806\u6808","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u975e\u5e38\u5f62\u8c61\u7684\u6bd4\u55bb\u6765\u7406\u89e3\uff1a</p> <p>\u60f3\u8c61\u4e00\u4e0b\uff0c\u6bcf\u4e2a\u4efb\u52a1\uff08\u6216\u7ebf\u7a0b\uff09\u5c31\u50cf\u4e00\u4e2a\u5c0f\u578b\u529e\u516c\u5ba4\u91cc\u7684\u4e00\u4e2a\u5de5\u4f5c\u4eba\u5458\u3002</p> <p>\u8fd9\u4e2a\u5de5\u4f5c\u4eba\u5458\u7684\u4efb\u52a1\u5806\u6808\uff0c\u5c31\u662f\u4ed6/\u5979\u4e13\u5c5e\u7684\u79c1\u4eba\u529e\u516c\u684c\u684c\u9762\u3002</p> <ol> <li> <p>\u4e34\u65f6\u5de5\u4f5c\u533a\uff1a\u8fd9\u4e2a\u684c\u9762\u4e0a\u7528\u6765\u4e34\u65f6\u653e\u7f6e\u4ed6\u6b63\u5728\u5904\u7406\u7684\u6587\u4ef6\u3001\u8bb0\u4e0b\u7684\u4fbf\u7b7e\u3001\u8ba1\u7b97\u4e2d\u7684\u8349\u7a3f\u7eb8\u3002\u5b83\u4e0d\u9002\u5408\u957f\u671f\u5b58\u653e\u6863\u6848\uff0c\u53ea\u670d\u52a1\u4e8e\u5f53\u524d\u6b63\u5728\u505a\u7684\u5de5\u4f5c\u3002</p> </li> <li> <p>\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09\uff1a\u5c31\u50cf\u684c\u9762\u4e0a\u4f60\u53ea\u80fd\u628a\u6587\u4ef6\u4e00\u5806\u4e00\u5806\u5730\u53e0\u653e\uff0c\u4f60\u603b\u662f\u6700\u5148\u5904\u7406\u6700\u4e0a\u9762\uff08\u6700\u540e\u653e\u4e0a\u53bb\uff09\u7684\u90a3\u4efd\u6587\u4ef6\u3002\u5728\u5806\u6808\u91cc\uff0c\u6570\u636e\u4e5f\u662f\u4ee5\u201c\u538b\u5165\u201d\u548c\u201c\u5f39\u51fa\u201d\u7684\u65b9\u5f0f\u64cd\u4f5c\u3002</p> </li> <li> <p>\u4e13\u5c5e\u72ec\u7acb\uff1a\u6bcf\u4e2a\u5de5\u4f5c\u4eba\u5458\uff08\u4efb\u52a1\uff09\u90fd\u6709\u81ea\u5df1\u7684\u684c\u9762\uff08\u5806\u6808\uff09\uff0c\u4e92\u4e0d\u5e72\u6270\u3002A \u4efb\u52a1\u4e0d\u80fd\u4e5f\u4e0d\u4f1a\u53bb B \u4efb\u52a1\u7684\u684c\u9762\u4e0a\u62ff\u4e1c\u897f\uff0c\u8fd9\u4fdd\u8bc1\u4e86\u4efb\u52a1\u7684\u72ec\u7acb\u6027\u3002</p> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#_2","title":"\u5728\u6280\u672f\u4e0a\u7684\u5b9a\u4e49\uff1a","text":"<p>\u4efb\u52a1\u5806\u6808\u662f\u4e00\u5757\u5728\u5185\u5b58\u4e2d\u9884\u5148\u5206\u914d\u7684\u3001\u8fde\u7eed\u7684\u5185\u5b58\u533a\u57df\uff0c\u5b83\u4e13\u95e8\u7528\u4e8e\u4e00\u4e2a\u72ec\u7acb\u7684\u4efb\u52a1\uff08\u6216\u7ebf\u7a0b\uff09\u3002\u5b83\u7684\u4e3b\u8981\u4f5c\u7528\u662f\uff1a</p> <ul> <li> <p>\u5b58\u653e\u5c40\u90e8\u53d8\u91cf\uff1a\u51fd\u6570\u5185\u90e8\u58f0\u660e\u7684\u975e\u9759\u6001\u5c40\u90e8\u53d8\u91cf\u3002</p> </li> <li> <p>\u4fdd\u5b58\u51fd\u6570\u8c03\u7528\u73b0\u573a\uff1a\u5f53\u53d1\u751f\u51fd\u6570\u8c03\u7528\u65f6\uff0c\u4fdd\u5b58\u5f53\u524d\u51fd\u6570\u7684\u8fd4\u56de\u5730\u5740\u3001\u5bc4\u5b58\u5668\u503c\u7b49\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ee5\u4fbf\u88ab\u8c03\u51fd\u6570\u8fd4\u56de\u540e\u80fd\u7ee7\u7eed\u6267\u884c\u3002</p> </li> <li> <p>\u5728\u4efb\u52a1\u5207\u6362\u65f6\u4fdd\u5b58\u4e0a\u4e0b\u6587\uff1a\u5f53\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u4efb\u52a1\u8c03\u5ea6\uff0c\u4ece\u4e00\u4e2a\u4efb\u52a1\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u4efb\u52a1\u65f6\uff0c\u9700\u8981\u5c06\u5f53\u524d\u4efb\u52a1\u7684CPU\u5bc4\u5b58\u5668\u72b6\u6001\u5168\u90e8\u4fdd\u5b58\u5230\u5b83\u81ea\u5df1\u7684\u5806\u6808\u91cc\uff0c\u4ee5\u4fbf\u4e0b\u6b21\u6062\u590d\u6267\u884c\u3002</p> </li> </ul> <p>\u6ca1\u6709\u5806\u6808\u4f1a\u600e\u6837\uff1f \u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u79c1\u4eba\u7684\u201c\u529e\u516c\u684c\u684c\u9762\u201d\uff0c\u4efb\u52a1\u5c31\u65e0\u6cd5\u8fdb\u884c\u51fd\u6570\u8c03\u7528\uff0c\u5c40\u90e8\u53d8\u91cf\u4e5f\u65e0\u5904\u5b58\u653e\uff0c\u591a\u4e2a\u4efb\u52a1\u4e4b\u95f4\u7684\u6570\u636e\u4f1a\u5b8c\u5168\u6df7\u4e71\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u4efb\u52a1\u90fd\u5fc5\u987b\u62e5\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u5806\u6808\u7a7a\u95f4\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#_3","title":"\u4e8c\u3001\u4efb\u52a1\u5806\u6808\u9700\u8981\u7684\u5927\u5c0f\u600e\u4e48\u786e\u5b9a\uff1f","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5173\u952e\u4e14\u5177\u6709\u6311\u6218\u6027\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u5806\u6808\u5927\u5c0f\u5206\u914d\u662f\u5728\u7f16\u8bd1\u65f6\u9759\u6001\u786e\u5b9a\u7684\uff08\u5bf9\u4e8e\u5927\u591a\u6570RTOS\u800c\u8a00\uff09\u3002\u5206\u914d\u592a\u5c0f\u4f1a\u5bfc\u81f4\u4e25\u91cd\u95ee\u9898\uff0c\u5206\u914d\u592a\u5927\u53c8\u4f1a\u6d6a\u8d39\u5b9d\u8d35\u7684\u5185\u5b58\u3002</p> <p>\u9996\u5148\u8981\u4fdd\u8bc1\u5927\u4e8eCPU\u5bc4\u5b58\u5668\u603b\u5927\u5c0f\uff0c\u4e0d\u7136\u8fde\u73b0\u573a\u90fd\u4fdd\u62a4\u4e0d\u4e86</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#1","title":"1. \u5806\u6808\u5927\u5c0f\u4e0d\u8db3\u7684\u540e\u679c","text":"<ul> <li> <p>\u5806\u6808\u6ea2\u51fa\uff1a\u8fd9\u662f\u6700\u76f4\u63a5\u7684\u540e\u679c\u3002\u5f53\u4efb\u52a1\u4f7f\u7528\u7684\u5806\u6808\u7a7a\u95f4\u8d85\u8fc7\u4e86\u9884\u5206\u914d\u7684\u5927\u5c0f\uff0c\u5c31\u4f1a\u7834\u574f\u5806\u6808\u4e4b\u5916\u7684\u5185\u5b58\u533a\u57df\u3002</p> </li> <li> <p>\u6570\u636e\u635f\u574f\uff1a\u6ea2\u51fa\u7684\u5806\u6808\u53ef\u80fd\u4f1a\u8986\u76d6\u5176\u4ed6\u4efb\u52a1\u7684\u6570\u636e\u533a\u3001\u5806\u533a\u751a\u81f3\u4ee3\u7801\u533a\uff0c\u5bfc\u81f4\u7a0b\u5e8f\u884c\u4e3a\u5f02\u5e38\u3001\u6570\u636e\u88ab\u83ab\u540d\u4fee\u6539\u3002</p> </li> <li> <p>\u7cfb\u7edf\u5d29\u6e83\uff1a\u6700\u5e38\u8868\u73b0\u4e3a\u7cfb\u7edf\u201c\u6b7b\u673a\u201d\u3001\u8dd1\u98de\u6216\u89e6\u53d1\u786c\u4ef6\u9519\u8bef\u5f02\u5e38\uff08\u5982 HardFault in ARM Cortex-M\uff09\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#2","title":"2. \u786e\u5b9a\u5806\u6808\u5927\u5c0f\u7684\u65b9\u6cd5\uff08\u7ec4\u5408\u4f7f\u7528\uff09","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u5de5\u7a0b\u5b9e\u8df5\u95ee\u9898\uff0c\u6ca1\u6709\u5355\u4e00\u7684\u6807\u51c6\u7b54\u6848\uff0c\u901a\u5e38\u9700\u8981\u591a\u79cd\u65b9\u6cd5\u7ed3\u5408\u4f7f\u7528\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#_4","title":"\u65b9\u6cd5\u4e00\uff1a\u7406\u8bba\u4f30\u7b97\uff08\u9759\u6001\u5206\u6790\uff09","text":"<p>\u8fd9\u662f\u7b2c\u4e00\u6b65\uff0c\u901a\u8fc7\u5206\u6790\u4ee3\u7801\u6765\u7c97\u7565\u4f30\u7b97\u3002</p> <ul> <li> <p>\u8ba1\u7b97\u51fd\u6570\u8c03\u7528\u94fe\u7684\u6df1\u5ea6\uff1a\u627e\u5230\u4efb\u52a1\u5165\u53e3\u51fd\u6570\u5f00\u59cb\uff0c\u6700\u6df1\u7684\u51fd\u6570\u8c03\u7528\u8def\u5f84\u3002\u4f8b\u5982\uff1a<code>TaskMain -&gt; FunctionA -&gt; FunctionB -&gt; FunctionC</code>\uff0c\u6df1\u5ea6\u4e3a4\u5c42\u3002</p> </li> <li> <p>\u8ba1\u7b97\u6bcf\u4e00\u5c42\u7684\u6808\u5e27\u5927\u5c0f\uff1a</p> <ul> <li> <p>\u6bcf\u4e00\u5c42\u51fd\u6570\u8c03\u7528\u90fd\u9700\u8981\u5728\u5806\u6808\u4e0a\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\u3001\u5e27\u6307\u9488\u3001\u4ee5\u53ca\u51fd\u6570\u5185\u90e8\u7684\u5c40\u90e8\u53d8\u91cf\u3001\u7f16\u8bd1\u5668\u4e34\u65f6\u53d8\u91cf\u7b49\u3002</p> </li> <li> <p>\u5c06\u6240\u6709\u5c42\u7ea7\u7684\u6808\u5e27\u5927\u5c0f\u76f8\u52a0\uff0c\u5f97\u5230\u4e00\u4e2a\u57fa\u7840\u503c\u3002</p> </li> </ul> </li> <li> <p>\u8003\u8651\u4efb\u52a1\u5207\u6362\u7684\u5f00\u9500\uff1a\u64cd\u4f5c\u7cfb\u7edf\u8fdb\u884c\u4efb\u52a1\u5207\u6362\u65f6\uff0c\u9700\u8981\u5c06CPU\u7684\u6240\u6709\u901a\u7528\u5bc4\u5b58\u5668\u3001\u72b6\u6001\u5bc4\u5b58\u5668\u7b49\u538b\u5165\u5806\u6808\uff0c\u8fd9\u90e8\u5206\u7a7a\u95f4\u4e5f\u8981\u7b97\u8fdb\u53bb\u3002</p> </li> <li> <p>\u52a0\u4e0a\u4e2d\u65ad\u670d\u52a1\u4f8b\u7a0b\u7684\u989d\u5916\u5f00\u9500\uff1a\u5f53\u4e2d\u65ad\u53d1\u751f\u65f6\uff0c\u4f1a\u4f7f\u7528\u5f53\u524d\u4efb\u52a1\u7684\u5806\u6808\u6765\u4fdd\u5b58\u4e0a\u4e0b\u6587\u3002\u901a\u5e38\u8981\u6309\u6700\u5927\u4e2d\u65ad\u5d4c\u5957\u5c42\u6570\u6765\u9884\u7559\u7a7a\u95f4\u3002</p> </li> </ul> <p>\u7f3a\u70b9\uff1a\u8fd9\u79cd\u65b9\u6cd5\u975e\u5e38\u7e41\u7410\uff0c\u4e14\u5bb9\u6613\u4f4e\u4f30\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u4f18\u5316\u3001\u9012\u5f52\u51fd\u6570\u3001\u5927\u578b\u6570\u7ec4\u3001\u51fd\u6570\u6307\u9488\u8c03\u7528\u7b49\u90fd\u4f1a\u4f7f\u5f97\u51c6\u786e\u8ba1\u7b97\u53d8\u5f97\u56f0\u96be\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#_5","title":"\u65b9\u6cd5\u4e8c\uff1a\u7ecf\u9a8c\u503c\u6cd5","text":"<p>\u5bf9\u4e8e\u7b80\u5355\u7684\u9879\u76ee\u6216\u6709\u7ecf\u9a8c\u7684\u5de5\u7a0b\u5e08\uff0c\u53ef\u4ee5\u6839\u636e\u82af\u7247\u67b6\u6784\u548c\u4efb\u52a1\u590d\u6742\u5ea6\u7ed9\u51fa\u4e00\u4e2a\u521d\u59cb\u7684\u201c\u731c\u503c\u201d\u3002</p> <ul> <li> <p>\u5bf9\u4e8e\u7b80\u5355\u7684\u88f8\u673a\u7a0b\u5e8f\u6216\u7a7a\u95f2\u4efb\u52a1\uff1a\u53ef\u80fd\u53ea\u9700\u8981 128 - 512 \u5b57\u8282\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u4e2d\u7b49\u590d\u6742\u5ea6\u7684\u4efb\u52a1\uff08\u5982\u5904\u7406\u534f\u8bae\u3001\u63a7\u5236\u5916\u8bbe\uff09\uff1a\u53ef\u80fd\u9700\u8981 1KB - 4KB\u3002</p> </li> <li> <p>\u5bf9\u4e8e\u975e\u5e38\u590d\u6742\u7684\u4efb\u52a1\uff08\u5982\u8fd0\u884c\u6587\u4ef6\u7cfb\u7edf\u3001LVGL GUI\u3001TCP/IP\u534f\u8bae\u6808\uff09\uff1a\u53ef\u80fd\u9700\u8981 8KB \u751a\u81f3\u51e0\u5341KB\u3002</p> </li> <li> <p>\u53c2\u8003\u82af\u7247\u5382\u5546\u7684\u4f8b\u7a0b\uff1a\u82af\u7247\u4f9b\u5e94\u5546\u63d0\u4f9b\u7684SDK\u548cDemo\u4ee3\u7801\u4e2d\u7684\u4efb\u52a1\u5806\u6808\u914d\u7f6e\u662f\u5f88\u597d\u7684\u53c2\u8003\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#_6","title":"\u65b9\u6cd5\u4e09\uff1a\u5b9e\u9a8c\u6d4b\u91cf\u6cd5\uff08\u6700\u53ef\u9760\u3001\u6700\u5e38\u7528\uff09","text":"<p>\u8fd9\u662f\u5728\u5b9e\u9645\u8fd0\u884c\u65f6\u8fdb\u884c\u6d4b\u91cf\uff0c\u662f\u786e\u5b9a\u5806\u6808\u5927\u5c0f\u7684\u9ec4\u91d1\u6cd5\u5219\u3002</p> <p>\u6838\u5fc3\u601d\u60f3\uff1a\u00a0\u5728\u4efb\u52a1\u8fd0\u884c\u524d\uff0c\u7528\u7279\u5b9a\u7684\u6a21\u5f0f\uff08\u5982\u00a0<code>0xDEADBEEF</code>,\u00a0<code>0xAAAAAAAA</code>\u00a0\u7b49\uff09\u586b\u5145\u6574\u4e2a\u5806\u6808\u7a7a\u95f4\u3002\u8ba9\u7cfb\u7edf\u5728\u6700\u6076\u52a3\u7684\u8fd0\u884c\u6761\u4ef6\u4e0b\uff08\u6700\u5927\u8d1f\u8f7d\u3001\u6700\u6df1\u8c03\u7528\u3001\u6700\u957f\u8fd0\u884c\u65f6\u95f4\uff09\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u518d\u53bb\u68c0\u67e5\u5806\u6808\u7a7a\u95f4\u91cc\u8fd8\u6709\u591a\u5c11\u586b\u5145\u6a21\u5f0f\u6ca1\u6709\u88ab\u8986\u76d6\u3002\u88ab\u8986\u76d6\u7684\u90e8\u5206\u5c31\u662f\u4f7f\u7528\u8fc7\u7684\uff0c\u5269\u4f59\u7684\u90e8\u5206\u5c31\u662f\u201c\u6c34\u4f4d\u7ebf\u201d\u4ee5\u4e0b\u7684\u7a7a\u95f2\u7a7a\u95f4\u3002</p> <p>\u5177\u4f53\u64cd\u4f5c\uff1a</p> <ol> <li> <p>RTOS \u63d0\u4f9b\u7684\u5de5\u5177\uff1a\u50cf FreeRTOS, uC/OS \u7b49\u4e3b\u6d41RTOS\u90fd\u63d0\u4f9b\u4e86\u5806\u6808\u4f7f\u7528\u91cf\u7edf\u8ba1\u7684\u529f\u80fd\uff08\u5982\u00a0<code>uxTaskGetStackHighWaterMark()</code>\uff09\u3002</p> <ul> <li>\u9ad8\u6c34\u4f4d\u7ebf\uff1a\u6307\u4ece\u4efb\u52a1\u5f00\u59cb\u8fd0\u884c\u4ee5\u6765\uff0c\u5806\u6808\u7a7a\u95f4\u8fbe\u5230\u8fc7\u7684\u6700\u5927\u4f7f\u7528\u6df1\u5ea6\u3002<code>\u5806\u6808\u603b\u5927\u5c0f - \u9ad8\u6c34\u4f4d\u7ebf = \u5269\u4f59\u7684\u5b89\u5168\u7a7a\u95f4</code>\u3002</li> </ul> </li> <li> <p>\u624b\u52a8\u586b\u5145\u6cd5\uff1a\u5982\u679c\u6ca1\u6709\u73b0\u6210\u5de5\u5177\uff0c\u53ef\u4ee5\u624b\u52a8\u5728\u4efb\u52a1\u521b\u5efa\u540e\uff0c\u7528\u00a0<code>memset</code>\u00a0\u5c06\u5806\u6808\u533a\u57df\u586b\u5145\u4e3a\u4e00\u4e2a\u9b54\u6570\uff0c\u7136\u540e\u5728\u8c03\u8bd5\u5668\u4e2d\u67e5\u770b\uff0c\u6216\u8005\u7f16\u5199\u4e00\u4e2a\u51fd\u6570\u6765\u68c0\u67e5\u4ece\u5806\u6808\u672b\u7aef\u5f00\u59cb\uff0c\u8fde\u7eed\u9b54\u6570\u7684\u957f\u5ea6\u3002</p> </li> </ol> <p>\u5982\u4f55\u6839\u636e\u6d4b\u91cf\u7ed3\u679c\u8c03\u6574\uff1f \u5047\u8bbe\u4f60\u7ed9\u4e00\u4e2a\u4efb\u52a1\u5206\u914d\u4e86 4KB (4096 bytes) \u7684\u5806\u6808\uff0c\u6d4b\u91cf\u5230\u7684\u9ad8\u6c34\u4f4d\u7ebf\u662f 2048 bytes\u3002</p> <ul> <li> <p>\u5df2\u4f7f\u7528\uff1a2048 bytes</p> </li> <li> <p>\u7a7a\u95f2\uff1a4096 - 2048 = 2048 bytes</p> </li> <li> <p>\u5b89\u5168\u88d5\u91cf\uff1a\u4f60\u9700\u8981\u9884\u7559\u4e00\u4e2a\u5b89\u5168\u88d5\u91cf\uff08\u6bd4\u5982 25%-33%\uff09\uff0c\u4ee5\u9632\u672a\u6d4b\u8bd5\u5230\u7684\u8fb9\u754c\u60c5\u51b5\u3002</p> <ul> <li>\u5b89\u5168\u5927\u5c0f = 2048 * 1.33 \u2248 2724 bytes</li> </ul> </li> <li> <p>\u6700\u7ec8\u63a8\u8350\u5927\u5c0f\uff1a\u4f60\u53ef\u4ee5\u5c06\u8be5\u4efb\u52a1\u7684\u5806\u6808\u5927\u5c0f\u8c03\u6574\u4e3a\u00a03KB (3072 bytes)\uff0c\u8fd9\u6837\u65e2\u5b89\u5168\u53c8\u8282\u7701\u4e86 1KB \u7684\u5185\u5b58\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/RTOS/%E4%BB%BB%E5%8A%A1%E5%A0%86%E6%A0%88/#_7","title":"\u4e09\u3001\u603b\u7ed3","text":"\u65b9\u9762 \u8bf4\u660e \u662f\u4ec0\u4e48 \u4efb\u52a1\u7684\u201c\u79c1\u4eba\u529e\u516c\u684c\u201d\uff0c\u7528\u4e8e\u5b58\u653e\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u8c03\u7528\u8bb0\u5f55\u548c\u4efb\u52a1\u4e0a\u4e0b\u6587\u3002\u6bcf\u4e2a\u4efb\u52a1\u72ec\u7acb\u62e5\u6709\u3002 \u4e3a\u4ec0\u4e48\u91cd\u8981 \u5806\u6808\u6ea2\u51fa\u4f1a\u5bfc\u81f4\u6570\u636e\u635f\u574f\u548c\u7cfb\u7edf\u5d29\u6e83\uff0c\u662f\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e2d\u6700\u5e38\u89c1\u7684\u9519\u8bef\u4e4b\u4e00\u3002 \u5927\u5c0f\u786e\u5b9a\u65b9\u6cd5 1.\u00a0\u7406\u8bba\u4f30\u7b97\uff1a\u5206\u6790\u4ee3\u7801\uff0c\u8ba1\u7b97\u8c03\u7528\u6df1\u5ea6\u548c\u5c40\u90e8\u53d8\u91cf\u5927\u5c0f\u3002\uff08\u4e0d\u7cbe\u786e\uff0c\u4f5c\u4e3a\u8d77\u70b9\uff09  2.\u00a0\u7ecf\u9a8c\u8d4b\u503c\uff1a\u6839\u636e\u4efb\u52a1\u7c7b\u578b\u548c\u82af\u7247\u67b6\u6784\u7ed9\u51fa\u521d\u59cb\u503c\u3002\uff08\u5feb\u901f\uff0c\u4f46\u4e0d\u4fdd\u8bc1\uff09  3.\u00a0\u5b9e\u9a8c\u6d4b\u91cf\uff1a\u6700\u53ef\u9760\u7684\u65b9\u6cd5\u3002\u5728\u6700\u5927\u8d1f\u8f7d\u4e0b\u8fd0\u884c\uff0c\u901a\u8fc7\u201c\u9ad8\u6c34\u4f4d\u7ebf\u201d\u6d4b\u91cf\u5b9e\u9645\u4f7f\u7528\u91cf\uff0c\u5e76\u52a0\u4e0a\u5b89\u5168\u88d5\u91cf\u3002"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/","title":"1. ADC\u57fa\u7840\u6982\u5ff5","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#11-adc","title":"1.1 ADC\u5de5\u4f5c\u539f\u7406","text":"<p>\u6a21\u6570\u8f6c\u6362\u5668\uff08ADC\uff09\u5c06\u6a21\u62df\u4fe1\u53f7\u8f6c\u6362\u4e3a\u6570\u5b57\u4fe1\u53f7\uff0cSTM32\u7684ADC\u901a\u5e38\u662f\u9010\u6b21\u903c\u8fd1\u578b\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#12","title":"1.2 \u4e3b\u8981\u53c2\u6570","text":"<ul> <li> <p>\u5206\u8fa8\u7387: 12\u4f4d\uff080-4095\uff09</p> </li> <li> <p>\u91c7\u6837\u65f6\u95f4: \u53ef\u914d\u7f6e\uff0c\u5f71\u54cd\u8f6c\u6362\u7cbe\u5ea6</p> </li> <li> <p>\u53c2\u8003\u7535\u538b: VREF+ \u548c VREF-</p> </li> <li> <p>\u8f6c\u6362\u6a21\u5f0f: \u5355\u6b21\u3001\u8fde\u7eed\u3001\u626b\u63cf\u3001\u95f4\u65ad</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#2","title":"2.\u914d\u7f6e\u8bf4\u660e","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#11","title":"1.1 \u6b65\u9aa4","text":"<ol> <li>\u9009\u62e9\u901a\u9053\u503c</li> <li>\u9009\u62e9ADC1\u6216ADC2</li> <li>\u8fdb\u5165\u5bf9\u5e94ADC\u914d\u7f6e\u754c\u9762\u8fdb\u884c\u914d\u7f6e</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#12_1","title":"1.2 \u53c2\u6570\u8bf4\u660e","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_1","title":"\u5de5\u4f5c\u6a21\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#vs-adc","title":"\u72ec\u7acb\u6a21\u5f0f vs \u591aADC\u6a21\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#independent-mode","title":"\u72ec\u7acb\u6a21\u5f0f (Independent mode)","text":"<ul> <li>\u63cf\u8ff0: \u5355\u4e2aADC\u72ec\u7acb\u5de5\u4f5c\uff0c\u4e0d\u4e0e\u5176\u4ed6ADC\u4ea4\u4e92</li> <li>\u5e94\u7528\u573a\u666f: \u7b80\u5355\u7684\u5355\u901a\u9053\u6216\u591a\u901a\u9053\u91c7\u6837\u9700\u6c42</li> <li>\u914d\u7f6e\u65b9\u6cd5:</li> </ul> <pre><code>hadc1.Init.ScanConvMode = DISABLE;  // \u5355\u901a\u9053\n// \u6216\nhadc1.Init.ScanConvMode = ENABLE;   // \u591a\u901a\u9053\u626b\u63cf\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#adc-dual-adc-modes","title":"\u53ccADC\u7ec4\u5408\u6a21\u5f0f (Dual ADC modes)","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#1-combined-regular-simultaneous-mode","title":"1. \u7ec4\u5408\u89c4\u5219\u540c\u6b65\u6a21\u5f0f (Combined Regular Simultaneous Mode)","text":"<ul> <li>\u5de5\u4f5c\u539f\u7406: \u4e24\u4e2aADC\u540c\u65f6\u91c7\u6837\u4e0d\u540c\u7684\u901a\u9053\uff0c\u8f6c\u6362\u540c\u6b65\u8fdb\u884c</li> <li>\u4f18\u52bf: \u63d0\u9ad8\u91c7\u6837\u541e\u5410\u91cf\uff0c\u540c\u65f6\u83b7\u53d6\u591a\u4e2a\u4fe1\u53f7</li> <li>\u5178\u578b\u5e94\u7528: \u9700\u8981\u540c\u6b65\u91c7\u6837\u7684\u591a\u8def\u4fe1\u53f7</li> </ul> <pre><code>// ADC1\u548cADC2\u540c\u65f6\u91c7\u6837\u4e0d\u540c\u901a\u9053\n// \u8f6c\u6362\u7ed3\u679c\u5206\u522b\u5b58\u50a8\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#2-interleaved-mode","title":"2. \u4ea4\u66ff\u6a21\u5f0f (Interleaved Mode)","text":"<ul> <li>\u5de5\u4f5c\u539f\u7406: \u4e24\u4e2aADC\u4ea4\u66ff\u5bf9\u540c\u4e00\u901a\u9053\u8fdb\u884c\u91c7\u6837</li> <li>\u4f18\u52bf: \u6709\u6548\u63d0\u9ad8\u91c7\u6837\u7387\uff08\u51e0\u4e4e\u7ffb\u500d\uff09</li> <li>\u65f6\u5e8f: ADC1\u91c7\u6837 \u2192 ADC1\u8f6c\u6362 \u2192 ADC2\u91c7\u6837 \u2192 ADC2\u8f6c\u6362</li> </ul> <pre><code>// \u9002\u7528\u4e8e\u9ad8\u9891\u4fe1\u53f7\u91c7\u96c6\n// \u91c7\u6837\u7387 = 2 \u00d7 \u5355\u4e2aADC\u91c7\u6837\u7387\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#3-alternate-trigger-mode","title":"3. \u4ea4\u66ff\u89e6\u53d1\u6a21\u5f0f (Alternate Trigger Mode)","text":"<ul> <li>\u5de5\u4f5c\u539f\u7406: \u4f7f\u7528\u5916\u90e8\u89e6\u53d1\u4fe1\u53f7\u4ea4\u66ff\u89e6\u53d1\u4e24\u4e2aADC</li> <li>\u4f18\u52bf: \u7cbe\u786e\u63a7\u5236\u91c7\u6837\u65f6\u5e8f</li> <li>\u5e94\u7528: \u9700\u8981\u4e25\u683c\u65f6\u5e8f\u63a7\u5236\u7684\u5e94\u7528</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#4-combined-injected-simultaneous-mode","title":"4. \u7ec4\u5408\u6ce8\u5165\u540c\u6b65\u6a21\u5f0f (Combined Injected Simultaneous Mode)","text":"<ul> <li>\u5de5\u4f5c\u539f\u7406: \u4e24\u4e2aADC\u540c\u6b65\u6267\u884c\u6ce8\u5165\u7ec4\u8f6c\u6362</li> <li>\u4f18\u52bf: \u9ad8\u4f18\u5148\u7ea7\u4fe1\u53f7\u7684\u540c\u6b65\u91c7\u96c6</li> <li>\u5e94\u7528: \u7d27\u6025\u4e8b\u4ef6\u5904\u7406\u3001\u5173\u952e\u53c2\u6570\u76d1\u6d4b</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#5-watchdog-mode","title":"5. \u770b\u95e8\u72d7\u6a21\u5f0f (Watchdog Mode)","text":"<ul> <li>\u5de5\u4f5c\u539f\u7406: \u76d1\u63a7\u7279\u5b9aADC\u901a\u9053\uff0c\u5f53\u6570\u503c\u8d85\u51fa\u8bbe\u5b9a\u8303\u56f4\u65f6\u89e6\u53d1\u4e2d\u65ad</li> <li>\u914d\u7f6e\u793a\u4f8b:</li> </ul> <pre><code>ADC_AnalogWDGConfTypeDef AnalogWDGConfig;\nAnalogWDGConfig.WatchdogNumber = ADC_ANALOGWATCHDOG_1;\nAnalogWDGConfig.Channel = ADC_CHANNEL_0;\nAnalogWDGConfig.ITMode = ENABLE;\nAnalogWDGConfig.HighThreshold = 3000;\nAnalogWDGConfig.LowThreshold = 1000;\nHAL_ADC_AnalogWDGConfig(&amp;hadc1, &amp;AnalogWDGConfig);\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#scan-mode","title":"\u626b\u63cf\u6a21\u5f0f (Scan Mode)","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_2","title":"\u5355\u6b21\u626b\u63cf","text":"<ul> <li>\u884c\u4e3a: \u914d\u7f6e\u7684\u6240\u6709\u901a\u9053\u6309\u987a\u5e8f\u8f6c\u6362\u4e00\u6b21\u540e\u505c\u6b62</li> <li>\u914d\u7f6e:</li> </ul> <pre><code>hadc1.Init.ScanConvMode = ENABLE;\nhadc1.Init.ContinuousConvMode = DISABLE;\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_3","title":"\u8fde\u7eed\u626b\u63cf","text":"<ul> <li>\u884c\u4e3a: \u914d\u7f6e\u7684\u6240\u6709\u901a\u9053\u5faa\u73af\u8fde\u7eed\u8f6c\u6362</li> <li>\u914d\u7f6e:</li> </ul> <pre><code>hadc1.Init.ScanConvMode = ENABLE;\nhadc1.Init.ContinuousConvMode = ENABLE;\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_4","title":"\u8f6c\u6362\u6a21\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#single-conversion","title":"\u5355\u6b21\u8f6c\u6362\u6a21\u5f0f (Single Conversion)","text":"<ul> <li>\u5de5\u4f5c\u6d41\u7a0b: \u542f\u52a8 \u2192 \u8f6c\u6362\u6307\u5b9a\u901a\u9053 \u2192 \u505c\u6b62</li> <li>\u9002\u7528\u573a\u666f: \u4f4e\u901f\u3001\u4f4e\u529f\u8017\u5e94\u7528</li> </ul> <pre><code>hadc1.Init.ContinuousConvMode = DISABLE;\nHAL_ADC_Start(&amp;hadc1);  // \u6bcf\u6b21\u90fd\u9700\u8981\u91cd\u65b0\u542f\u52a8\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#continuous-conversion","title":"\u8fde\u7eed\u8f6c\u6362\u6a21\u5f0f (Continuous Conversion)","text":"<ul> <li>\u5de5\u4f5c\u6d41\u7a0b: \u542f\u52a8\u540e\u81ea\u52a8\u8fde\u7eed\u8f6c\u6362\uff0c\u65e0\u9700\u91cd\u590d\u89e6\u53d1</li> <li>\u9002\u7528\u573a\u666f: \u9ad8\u901f\u6570\u636e\u91c7\u96c6</li> </ul> <pre><code>hadc1.Init.ContinuousConvMode = ENABLE;\nHAL_ADC_Start(&amp;hadc1);  // \u542f\u52a8\u540e\u6301\u7eed\u8fd0\u884c\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_5","title":"\u89e6\u53d1\u6a21\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_6","title":"\u8f6f\u4ef6\u89e6\u53d1","text":"<ul> <li>\u63a7\u5236\u65b9\u5f0f: \u901a\u8fc7\u4ee3\u7801\u63a7\u5236\u8f6c\u6362\u5f00\u59cb</li> <li>\u7075\u6d3b\u6027: \u9ad8\uff0c\u53ef\u7cbe\u786e\u63a7\u5236\u91c7\u6837\u65f6\u523b</li> </ul> <pre><code>hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;\nHAL_ADC_Start(&amp;hadc1);  // \u8f6f\u4ef6\u542f\u52a8\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_7","title":"\u786c\u4ef6\u89e6\u53d1","text":"<ul> <li>\u89e6\u53d1\u6e90: \u5b9a\u65f6\u5668\u3001\u5916\u90e8\u5f15\u811a\u7b49</li> <li>\u4f18\u52bf: \u7cbe\u786e\u7684\u5b9a\u65f6\u91c7\u6837\uff0c\u4e0d\u4f9d\u8d56CPU</li> </ul> <pre><code>// \u4f7f\u7528TIM1\u89e6\u53d1ADC\u8f6c\u6362\nhadc1.Init.ExternalTrigConv = ADC_EXTERNALTRIGCONV_T1_TRGO;\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_8","title":"\u6570\u636e\u7ba1\u7406\u6a21\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#polling","title":"\u8f6e\u8be2\u6a21\u5f0f (Polling)","text":"<pre><code>HAL_ADC_Start(&amp;hadc1);\nHAL_ADC_PollForConversion(&amp;hadc1, timeout);\nvalue = HAL_ADC_GetValue(&amp;hadc1);\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#interrupt","title":"\u4e2d\u65ad\u6a21\u5f0f (Interrupt)","text":"<pre><code>HAL_ADC_Start_IT(&amp;hadc1);\n// \u5728\u56de\u8c03\u51fd\u6570\u4e2d\u5904\u7406\u6570\u636e\nvoid HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef* hadc)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#dma-direct-memory-access","title":"DMA\u6a21\u5f0f (Direct Memory Access)","text":"<ul> <li>\u4f18\u52bf: \u4e0d\u5360\u7528CPU\uff0c\u9ad8\u6548\u5904\u7406\u5927\u91cf\u6570\u636e</li> <li>\u914d\u7f6e:</li> </ul> <pre><code>// \u5355\u6b21DMA\u4f20\u8f93\nHAL_ADC_Start_DMA(&amp;hadc1, (uint32_t*)buffer, length);\n\n// \u5faa\u73afDMA\u4f20\u8f93\uff08\u9700\u914d\u7f6eDMA\u4e3a\u5faa\u73af\u6a21\u5f0f\uff09\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#vs","title":"\u6ce8\u5165\u7ec4 vs \u89c4\u5219\u7ec4","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#regular-group","title":"\u89c4\u5219\u7ec4 (Regular Group)","text":"<ul> <li>\u4f18\u5148\u7ea7: \u666e\u901a</li> <li>\u901a\u9053\u6570\u91cf: \u6700\u591a16\u4e2a\u901a\u9053</li> <li>\u89e6\u53d1\u65b9\u5f0f: \u8f6f\u4ef6\u6216\u786c\u4ef6\u89e6\u53d1</li> <li>\u5178\u578b\u5e94\u7528: \u5e38\u89c4\u6570\u636e\u91c7\u96c6</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#injected-group","title":"\u6ce8\u5165\u7ec4 (Injected Group)","text":"<ul> <li>\u4f18\u5148\u7ea7: \u9ad8\uff08\u53ef\u4e2d\u65ad\u89c4\u5219\u7ec4\u8f6c\u6362\uff09</li> <li>\u901a\u9053\u6570\u91cf: \u6700\u591a4\u4e2a\u901a\u9053  </li> <li>\u89e6\u53d1\u65b9\u5f0f: \u81ea\u52a8\u6216\u5916\u90e8\u89e6\u53d1</li> <li>\u5178\u578b\u5e94\u7528: \u7d27\u6025\u4e8b\u4ef6\u5904\u7406\u3001\u5173\u952e\u53c2\u6570</li> </ul> <pre><code>// \u914d\u7f6e\u6ce8\u5165\u7ec4\nADC_InjectionConfTypeDef sConfigInjected;\nsConfigInjected.InjectedNbrOfConversion = 2;\nsConfigInjected.InjectedChannel = ADC_CHANNEL_1;\nsConfigInjected.InjectedRank = 1;\nHAL_ADCEx_InjectedConfigChannel(&amp;hadc1, &amp;sConfigInjected);\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_9","title":"\u4f4e\u529f\u8017\u6a21\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#auto-delay","title":"\u81ea\u52a8\u5ef6\u8fdf\u6a21\u5f0f (Auto-delay)","text":"<ul> <li>\u529f\u80fd: \u5728\u8f6c\u6362\u95f4\u63d2\u5165\u5ef6\u8fdf\u4ee5\u964d\u4f4e\u529f\u8017</li> <li>\u9002\u7528: \u5bf9\u91c7\u6837\u7387\u8981\u6c42\u4e0d\u9ad8\u7684\u5e94\u7528</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#discontinuous-mode","title":"\u95f4\u65ad\u6a21\u5f0f (Discontinuous Mode)","text":"<ul> <li>\u5de5\u4f5c\u65b9\u5f0f: \u6bcf\u6b21\u89e6\u53d1\u53ea\u8f6c\u6362\u6307\u5b9a\u6570\u91cf\u7684\u901a\u9053</li> <li>\u8282\u80fd\u6548\u679c: \u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u8f6c\u6362\u64cd\u4f5c</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_10","title":"\u6a21\u5f0f\u9009\u62e9\u6307\u5357","text":"\u5e94\u7528\u573a\u666f \u63a8\u8350\u6a21\u5f0f \u7406\u7531 \u7b80\u5355\u5355\u901a\u9053\u91c7\u6837 \u72ec\u7acb\u6a21\u5f0f + \u8f6e\u8be2 \u5b9e\u73b0\u7b80\u5355\uff0c\u8d44\u6e90\u5360\u7528\u5c11 \u9ad8\u901f\u6570\u636e\u91c7\u96c6 \u72ec\u7acb\u6a21\u5f0f + DMA + \u8fde\u7eed\u8f6c\u6362 \u9ad8\u541e\u5410\u91cf\uff0cCPU\u5360\u7528\u4f4e \u540c\u6b65\u591a\u8def\u4fe1\u53f7 \u7ec4\u5408\u89c4\u5219\u540c\u6b65\u6a21\u5f0f \u540c\u65f6\u91c7\u96c6\uff0c\u6570\u636e\u76f8\u5173\u6027\u597d \u8d85\u9ad8\u9891\u4fe1\u53f7 \u4ea4\u66ff\u6a21\u5f0f \u6709\u6548\u63d0\u5347\u91c7\u6837\u7387 \u5173\u952e\u53c2\u6570\u76d1\u63a7 \u770b\u95e8\u72d7\u6a21\u5f0f + \u6ce8\u5165\u7ec4 \u5b9e\u65f6\u76d1\u63a7\uff0c\u5feb\u901f\u54cd\u5e94 \u5b9a\u65f6\u7cbe\u786e\u91c7\u6837 \u786c\u4ef6\u89e6\u53d1\u6a21\u5f0f \u65f6\u5e8f\u7cbe\u786e\uff0c\u4e0d\u4f9d\u8d56\u8f6f\u4ef6"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_11","title":"\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u65f6\u949f\u914d\u7f6e: \u786e\u4fddADC\u65f6\u949f\u4e0d\u8d85\u8fc7\u5668\u4ef6\u6700\u5927\u9891\u7387</li> <li>\u91c7\u6837\u65f6\u95f4: \u6839\u636e\u4fe1\u53f7\u6e90\u963b\u6297\u8c03\u6574\u91c7\u6837\u65f6\u95f4</li> <li>DMA\u914d\u7f6e: \u591aADC\u6a21\u5f0f\u9700\u8981\u5408\u7406\u914d\u7f6eDMA\u6570\u636e\u6d41</li> <li>\u4e2d\u65ad\u4f18\u5148\u7ea7: \u6ce8\u5165\u7ec4\u4e2d\u65ad\u5e94\u8bbe\u7f6e\u4e3a\u8f83\u9ad8\u4f18\u5148\u7ea7</li> <li>\u7535\u6e90\u566a\u58f0: \u6a21\u62df\u90e8\u5206\u4f9b\u7535\u9700\u8981\u826f\u597d\u7684\u53bb\u8026\u8bbe\u8ba1</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_12","title":"\u57fa\u672c\u8bbe\u7f6e","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_13","title":"\u6570\u636e\u5bf9\u9f50","text":"<p>\u5de6\u5bf9\u9f50\u6216\u53f3\u5bf9\u9f50</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_14","title":"\u626b\u63cf\u6a21\u5f0f","text":"<p>\u662f\u5426\u5bf9\u591a\u901a\u9053\u626b\u63cf</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_15","title":"\u8fde\u7eed\u8f6c\u6362\u6a21\u5f0f","text":"<p>\u662f\u5426\u542f\u7528\u8fde\u7eed\u8f6c\u6362</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_16","title":"\u89c4\u5219\u7ec4\u8bbe\u7f6e","text":"<p> - Number Of Conversion: \u6bcf\u6b21\u8f6c\u6362\u591a\u5c11\u901a\u9053\u3002\u82e5\u6b64\u503c\u5927\u4e8e1\uff0c\u6700\u597d\u914d\u5408DMA\uff0c\u56e0\u4e3a\u89c4\u5219\u7ec4\u8f6c\u6362\u5b8c\u6210\u5b58\u50a8\u6570\u636e\u7684\u5bc4\u5b58\u5668\u53ea\u6709\u4e00\u4e2a\uff0c\u540e\u6765\u7684\u4f1a\u8986\u76d6\u524d\u9762\u7684\u6570\u636e\u3002 - External Trigger Conversion Source: \u9009\u62e9\u8f6c\u6362\u89e6\u53d1\u6e90\uff1a\u8f6f\u4ef6 or \u786c\u4ef6\uff08\u5b9a\u65f6\u5668\uff09 - Rank&amp;Channel&amp;SampleTIme: \u914d\u7f6e\u5bf9\u5e94\u901a\u9053\u8f6c\u6362\u7684\u5e8f\u53f7\u4ee5\u53ca\u91c7\u6837\u7387[^1]</p> <p>[^1]: SampleTime 1.5 Cycles\u00a0\u6307\u7684\u662fADC\u5bf9\u8f93\u5165\u4fe1\u53f7\u8fdb\u884c\u91c7\u6837\u7684\u65f6\u95f4\u957f\u5ea6\u4e3a1.5\u4e2aADC\u65f6\u949f\u5468\u671f\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_17","title":"\u6ce8\u5165\u7ec4\u8bbe\u7f6e&amp;\u5f00\u95e8\u72d7\u542f\u7528","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#nvic","title":"\u4e2d\u65ad\u8bbe\u7f6e\uff08NVIC\uff09","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_18","title":"\u4e2d\u65ad\u7684\u57fa\u672c\u6982\u5ff5","text":"<p>ADC\u5168\u5c40\u4e2d\u65ad\u7528\u4e8e\u5728\u7279\u5b9aADC\u4e8b\u4ef6\u53d1\u751f\u65f6\u901a\u77e5CPU\uff0c\u5b9e\u73b0\u5f02\u6b65\u4e8b\u4ef6\u5904\u7406\uff0c\u907f\u514d\u8f6e\u8be2\u7b49\u5f85\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_19","title":"\u4e3b\u8981\u4e2d\u65ad\u4e8b\u4ef6\u7c7b\u578b","text":"<pre><code>// ADC\u5e38\u89c1\u4e2d\u65ad\u4e8b\u4ef6\n#define ADC_IT_EOC      ((uint32_t)ADC_IER_EOCIE)      // \u8f6c\u6362\u5b8c\u6210\u4e2d\u65ad\n#define ADC_IT_JEOC     ((uint32_t)ADC_IER_JEOCIE)     // \u6ce8\u5165\u7ec4\u8f6c\u6362\u5b8c\u6210\n#define ADC_IT_AWD      ((uint32_t)ADC_IER_AWDIE)      // \u6a21\u62df\u770b\u95e8\u72d7\u4e2d\u65ad\n#define ADC_IT_OVR      ((uint32_t)ADC_IER_OVRIE)      // \u6ea2\u51fa\u4e2d\u65ad\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_20","title":"\u7528\u6237\u5b9e\u73b0","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#_21","title":"\u81ea\u6821\u51c6","text":"<p>\u9700\u8981\u5728cubemx\u751f\u6210\u7684adc.c\u4e2dADC\u521d\u59cb\u5316\u51fd\u6570\u8865\u5145(\u4f8badc1)</p> <pre><code>/* USER CODE BEGIN ADC1_Init 2 */  \n//\u81ea\u6821\u51c6  \nif (HAL_ADCEx_Calibration_Start(&amp;hadc1)!= HAL_OK)  \n{  \n  Error_Handler();  \n}  \n/* USER CODE END ADC1_Init 2 */\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/ADC/#adc2","title":"\u8bfb\u53d6\u7279\u5b9a\u901a\u9053\u503c\uff08\u72ec\u7acb\u5355\u6b21\u975e\u626b\u63cf,adc2\uff09","text":"<pre><code>ADC_ChannelConfTypeDef sConfig = {0};\nsConfig.Channel = ADC_CHANNEL_2;//\u914d\u7f6e\u5bf9\u5e94\u901a\u9053\u5230\u9996\u4f4d\nsConfig.Rank = ADC_REGULAR_RANK_1;  \nsConfig.SamplingTime = ADC_SAMPLETIME_1CYCLE_5;  \nif (HAL_ADC_ConfigChannel(&amp;hadc2, &amp;sConfig) != HAL_OK)  \n{  \n  Error_Handler();  \n}  \n// \u542f\u52a8ADC\u8f6c\u6362  \nif (HAL_ADC_Start(&amp;hadc2) == HAL_OK)  \n{  \n  // \u7b49\u5f85\u8f6c\u6362\u5b8c\u6210  \n  if (HAL_ADC_PollForConversion(&amp;hadc2, 100) == HAL_OK)  \n  {  \n    return HAL_ADC_GetValue(&amp;hadc2);  \n  }  \n}  \nError_Handler();\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/","title":"GPIO \u64cd\u4f5c","text":"<ul> <li>GPIO \u57fa\u672c\u6982\u5ff5\u4e0e CubeMX \u914d\u7f6e\u6d41\u7a0b</li> <li>GPIO\u7ed3\u6784<ul> <li>\u7247\u4e0a\u7ed3\u6784</li> <li>\u4f4d\u7ed3\u6784</li> <li>CubeMX \u914d\u7f6e\u6d41\u7a0b</li> <li>GPIO \u5de5\u4f5c\u6a21\u5f0f</li> </ul> </li> <li>HAL \u5e93 GPIO \u6838\u5fc3 API<ul> <li>\u521d\u59cb\u5316</li> <li>\u8f93\u51fa\u64cd\u4f5c\uff08\u5199\u64cd\u4f5c\uff09</li> <li>\u8f93\u5165\u64cd\u4f5c\uff08\u8bfb\u64cd\u4f5c\uff09</li> </ul> </li> <li>\u5916\u90e8\u4e2d\u65ad\uff08EXTI\uff09\u4e0e\u56de\u8c03\u51fd\u6570<ul> <li>EXTI\u57fa\u672c\u7ed3\u6784</li> <li>AFIO\uff08\u590d\u7528IO\u53e3\uff09\u8bf4\u660e</li> <li>EXTI\u6846\u56fe</li> <li>EXTI \u914d\u7f6e\u8981\u70b9</li> <li>\u4e2d\u65ad\u56de\u8c03\u51fd\u6570<ul> <li>\u8bf4\u660e<ul> <li>HAL \u5e93\u7684\u62bd\u8c61\u673a\u5236</li> <li>\u5982\u4f55\u533a\u5206\u4e0d\u540c\u7684\u4e2d\u65ad\u6e90\uff1f</li> </ul> </li> </ul> </li> <li>\u6ce8\u610f\u4e8b\u9879</li> </ul> </li> <li>\u4f7f\u7528\u4e86 CubeMX \u540e\u4e0d\u7528\u5173\u5fc3\u4ec0\u4e48\uff1f</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#gpio-cubemx","title":"GPIO \u57fa\u672c\u6982\u5ff5\u4e0e CubeMX \u914d\u7f6e\u6d41\u7a0b","text":"<p>GPIO (General Purpose Input/Output) \u662f\u5fae\u63a7\u5236\u5668\u4e0e\u5916\u90e8\u786c\u4ef6\u8fdb\u884c\u4ea4\u4e92\u7684\u57fa\u7840\u63a5\u53e3\u3002\u5728 STM32 \u4e2d\uff0c\u6bcf\u4e2a GPIO \u5f15\u811a\u90fd\u53ef\u4ee5\u72ec\u7acb\u914d\u7f6e\u4e3a\u4e0d\u540c\u7684\u6a21\u5f0f\u548c\u529f\u80fd\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#gpio","title":"GPIO\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_1","title":"\u7247\u4e0a\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_2","title":"\u4f4d\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#cubemx","title":"CubeMX \u914d\u7f6e\u6d41\u7a0b","text":"<p>STM32CubeMX \u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u56fe\u5f62\u5316\u914d\u7f6e\u5de5\u5177\uff0c\u7528\u4e8e\u751f\u6210\u521d\u59cb\u5316\u4ee3\u7801\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86 GPIO \u7684\u914d\u7f6e\u5de5\u4f5c\u3002</p> <ol> <li>\u5f15\u811a\u6a21\u5f0f\u9009\u62e9\uff1a\u5728\u82af\u7247\u5f15\u811a\u56fe\u4e0a\uff0c\u70b9\u51fb\u6216\u53f3\u952e\u70b9\u51fb\u8981\u914d\u7f6e\u7684\u5f15\u811a\u3002</li> <li>\u6a21\u5f0f\u914d\u7f6e\uff1a\u9009\u62e9\u6240\u9700\u7684 GPIO \u6a21\u5f0f\uff0c\u4f8b\u5982\uff1a</li> <li>GPIO_Output\uff1a\u901a\u7528\u63a8\u633d\u8f93\u51fa\u6216\u5f00\u6f0f\u8f93\u51fa\u3002</li> <li>GPIO_Input\uff1a\u6d6e\u7a7a\u8f93\u5165\u3001\u4e0a\u62c9\u8f93\u5165\u6216\u4e0b\u62c9\u8f93\u5165\u3002</li> <li>Alternate Function (AF)\uff1a\u7528\u4e8e\u8fde\u63a5\u7247\u4e0a\u5916\u8bbe\uff08\u5982 USART\u3001SPI\u3001I2C \u7b49\uff09\u3002</li> <li>Analog\uff1a\u7528\u4e8e ADC/DAC \u7b49\u6a21\u62df\u529f\u80fd\u3002</li> <li>\u53c2\u6570\u8bbe\u7f6e (Parameters Settings)\uff1a\u5728\u5de6\u4fa7\u7684 Pinout &amp; Configuration \u680f\u76ee\u4e2d\uff0c\u9009\u62e9 GPIO \u9009\u9879\u5361\u3002\u5bf9\u6bcf\u4e2a\u542f\u7528\u7684 GPIO \u7aef\u53e3\uff08\u5982 PA, PB, PC...\uff09\u8fdb\u884c\u8be6\u7ec6\u914d\u7f6e\uff1a</li> <li>GPIO Mode\uff1a\u786e\u8ba4\u5f15\u811a\u7684\u8f93\u5165/\u8f93\u51fa/\u590d\u7528\u529f\u80fd\u3002</li> <li>Pull-up/Pull-down\uff1a\u8bbe\u7f6e\u4e0a\u62c9/\u4e0b\u62c9\u7535\u963b\uff08\u9002\u7528\u4e8e\u8f93\u5165\u6a21\u5f0f\uff09\u3002</li> <li>Maximum Output Speed\uff1a\u8bbe\u7f6e\u8f93\u51fa\u901f\u5ea6\uff08Low, Medium, High, Very High\uff09\u3002</li> <li>User Label\uff1a\u5f3a\u70c8\u5efa\u8bae\u4e3a\u6bcf\u4e2a\u5f15\u811a\u8bbe\u7f6e\u4e00\u4e2a\u6e05\u6670\u7684\u522b\u540d\uff08\u4f8b\u5982 <code>LED_R_Pin</code>, <code>KEY_WKUP_Pin</code>\uff09\uff0c\u8fd9\u5c06\u76f4\u63a5\u53cd\u6620\u5728\u751f\u6210\u7684 HAL \u5e93\u4ee3\u7801\u4e2d\uff0c\u63d0\u9ad8\u4ee3\u7801\u53ef\u8bfb\u6027\u3002</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#gpio_1","title":"GPIO \u5de5\u4f5c\u6a21\u5f0f","text":"<p>GPIO \u6709\u56db\u5927\u5de5\u4f5c\u6a21\u5f0f\uff0cCubeMX \u4e2d\u914d\u7f6e\u7684\u662f\u8fd9\u4e9b\u6a21\u5f0f\u7684\u5b50\u96c6\uff1a</p> <ol> <li>\u8f93\u5165\u6a21\u5f0f (Input Mode)\uff1a\u7528\u4e8e\u4ece\u5916\u90e8\u8bfb\u53d6\u7535\u5e73\u3002\u53ef\u914d\u7f6e\u4e3a\u6d6e\u7a7a\u3001\u4e0a\u62c9\u6216\u4e0b\u62c9\u3002</li> <li>\u8f93\u51fa\u6a21\u5f0f (Output Mode)\uff1a\u7528\u4e8e\u5411\u5916\u90e8\u8f93\u51fa\u7535\u5e73\u3002\u53ef\u914d\u7f6e\u4e3a\u63a8\u633d\uff08\u80fd\u8f93\u51fa\u9ad8\u4f4e\u7535\u5e73\uff09\u6216\u5f00\u6f0f\uff08\u53ea\u80fd\u8f93\u51fa\u4f4e\u7535\u5e73\u6216\u9ad8\u963b\u6001\uff09\u3002</li> <li>\u590d\u7528\u529f\u80fd\u6a21\u5f0f (Alternate Function Mode)\uff1a\u7528\u4e8e\u5c06\u5f15\u811a\u8fde\u63a5\u5230\u82af\u7247\u5185\u90e8\u5916\u8bbe\uff08\u5982\u5b9a\u65f6\u5668\u3001\u4e32\u53e3\u7b49\uff09\u3002</li> <li>\u6a21\u62df\u6a21\u5f0f (Analog Mode)\uff1a\u7528\u4e8e ADC/DAC \u7b49\u6a21\u62df\u4fe1\u53f7\u5904\u7406\u3002</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#hal-gpio-api","title":"HAL \u5e93 GPIO \u6838\u5fc3 API","text":"<p>HAL \u5e93\u63d0\u4f9b\u4e86\u4e00\u5957\u7b80\u6d01\u3001\u7edf\u4e00\u7684 API \u6765\u64cd\u4f5c GPIO\uff0c\u5176\u51fd\u6570\u547d\u540d\u901a\u5e38\u9075\u5faa <code>HAL_GPIO_...</code> \u683c\u5f0f\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_3","title":"\u521d\u59cb\u5316","text":"<ul> <li><code>HAL_GPIO_Init(GPIO_TypeDef \\*GPIOx, GPIO_InitTypeDef \\*GPIO_Init)</code></li> <li>\u529f\u80fd\uff1a\u521d\u59cb\u5316\u6307\u5b9a\u7684 GPIO \u7aef\u53e3\u548c\u5f15\u811a\u3002</li> <li>\u4f7f\u7528\u65b9\u5f0f\uff1a\u8fd9\u4e2a\u51fd\u6570\u7531 CubeMX \u6839\u636e\u4f60\u7684\u914d\u7f6e\u81ea\u52a8\u751f\u6210\uff0c\u5e76\u5728 <code>main.c</code> \u4e2d\u7684 <code>MX_GPIO_Init()</code> \u51fd\u6570\u91cc\u88ab\u8c03\u7528\u3002\u4f60\u65e0\u9700\u624b\u52a8\u8c03\u7528\u6216\u4fee\u6539\u5b83\uff0c\u9664\u975e\u9700\u8981\u52a8\u6001\u91cd\u65b0\u914d\u7f6e\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_4","title":"\u8f93\u51fa\u64cd\u4f5c\uff08\u5199\u64cd\u4f5c\uff09","text":"<ul> <li> <p><code>HAL_GPIO_WritePin(GPIO_TypeDef \\*GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)</code></p> </li> <li> <p>\u529f\u80fd\uff1a\u8bbe\u7f6e\u6307\u5b9a\u5f15\u811a\u7684\u8f93\u51fa\u7535\u5e73\u3002</p> </li> <li> <p>\u53c2\u6570\uff1a</p> <ul> <li><code>GPIOx</code>\uff1aGPIO \u7aef\u53e3\uff08\u5982 <code>GPIOA</code>, <code>GPIOB</code> \u7b49\uff09\u3002</li> <li><code>GPIO_Pin</code>\uff1a\u5f15\u811a\u53f7\uff08\u4f7f\u7528 CubeMX \u751f\u6210\u7684\u522b\u540d\uff0c\u5982 <code>LED_R_Pin</code>\uff09\u3002</li> <li><code>PinState</code>\uff1a\u7535\u5e73\u72b6\u6001\uff08<code>GPIO_PIN_SET</code> \u4e3a\u9ad8\u7535\u5e73\uff0c<code>GPIO_PIN_RESET</code> \u4e3a\u4f4e\u7535\u5e73\uff09\u3002</li> </ul> </li> <li> <p>\u793a\u4f8b\uff08\u70b9\u4eae LED\uff09\uff1a</p> <p><code>c HAL_GPIO_WritePin(GPIOB, LED_R_Pin, GPIO_PIN_RESET); // \u5047\u8bbe\u4f4e\u7535\u5e73\u70b9\u4eae</code></p> </li> <li> <p><code>HAL_GPIO_TogglePin(GPIO_TypeDef \\*GPIOx, uint16_t GPIO_Pin)</code></p> </li> <li> <p>\u529f\u80fd\uff1a\u7ffb\u8f6c\u6307\u5b9a\u5f15\u811a\u7684\u8f93\u51fa\u7535\u5e73\u3002</p> </li> <li> <p>\u793a\u4f8b\uff08LED \u95ea\u70c1\uff09\uff1a</p> <p><code>c HAL_GPIO_TogglePin(GPIOB, LED_R_Pin);</code></p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_5","title":"\u8f93\u5165\u64cd\u4f5c\uff08\u8bfb\u64cd\u4f5c\uff09","text":"<ul> <li> <p><code>GPIO_PinState HAL_GPIO_ReadPin(GPIO_TypeDef \\*GPIOx, uint16_t GPIO_Pin)</code></p> </li> <li> <p>\u529f\u80fd\uff1a\u8bfb\u53d6\u6307\u5b9a\u5f15\u811a\u7684\u8f93\u5165\u7535\u5e73\u72b6\u6001\u3002</p> </li> <li> <p>\u8fd4\u56de\u503c\uff1a<code>GPIO_PinState</code> \u7c7b\u578b\uff08<code>GPIO_PIN_SET</code> \u4e3a\u9ad8\u7535\u5e73\uff0c<code>GPIO_PIN_RESET</code> \u4e3a\u4f4e\u7535\u5e73\uff09\u3002</p> </li> <li> <p>\u793a\u4f8b\uff08\u8bfb\u53d6\u6309\u952e\u72b6\u6001\uff09\uff1a</p> <p><code>c if (HAL_GPIO_ReadPin(GPIOA, KEY_WKUP_Pin) == GPIO_PIN_RESET) {     // \u6309\u952e\u88ab\u6309\u4e0b\uff08\u5047\u8bbe\u6309\u952e\u662f\u4e0b\u62c9\u8f93\u5165\uff0c\u6309\u4e0b\u65f6\u8fde\u63a5\u5230 GND\uff0c\u8bfb\u53d6\u4f4e\u7535\u5e73\uff09 }</code></p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#exti","title":"\u5916\u90e8\u4e2d\u65ad\uff08EXTI\uff09\u4e0e\u56de\u8c03\u51fd\u6570","text":"<p>\u5bf9\u4e8e\u6309\u952e\u7b49\u9700\u8981\u5b9e\u65f6\u54cd\u5e94\u7684\u8f93\u5165\uff0c\u901a\u5e38\u914d\u7f6e\u4e3a \u5916\u90e8\u4e2d\u65ad\uff08EXTI\uff09 \u6a21\u5f0f\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#exti_1","title":"EXTI\u57fa\u672c\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#afioio","title":"AFIO\uff08\u590d\u7528IO\u53e3\uff09\u8bf4\u660e","text":"<ul> <li> <p>AFIO\u4e3b\u8981\u7528\u4e8e\u5f15\u811a\u590d\u7528\u529f\u80fd\u7684\u9009\u62e9\u548c\u91cd\u5b9a\u4e49</p> </li> <li> <p>\u5728STM32\u4e2d\uff0cAFIO\u4e3b\u8981\u5b8c\u6210\u4e24\u4e2a\u4efb\u52a1\uff1a\u590d\u7528\u529f\u80fd\u5f15\u811a\u91cd\u6620\u5c04\u3001\u4e2d\u65ad\u5f15\u811a\u9009\u62e9</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#exti_2","title":"EXTI\u6846\u56fe","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#exti_3","title":"EXTI \u914d\u7f6e\u8981\u70b9","text":"<ol> <li>\u5f15\u811a\u6a21\u5f0f\uff1a\u5728 CubeMX \u4e2d\u5c06\u5f15\u811a\u914d\u7f6e\u4e3a GPIO_EXTIxx\uff08\u4f8b\u5982 <code>GPIO_EXTI0</code>\uff09\u3002</li> <li>\u8fb9\u6cbf\u68c0\u6d4b\uff1a\u914d\u7f6e\u4e2d\u65ad\u89e6\u53d1\u7684\u8fb9\u6cbf\uff08\u4e0a\u5347\u6cbf\u3001\u4e0b\u964d\u6cbf\u6216\u53cc\u8fb9\u6cbf\uff09\u3002</li> <li>NVIC \u4f7f\u80fd\uff1a\u5728 NVIC Settings \u4e2d\u4f7f\u80fd\u5bf9\u5e94\u7684 EXTI \u4e2d\u65ad\u7ebf\u5e76\u8bbe\u7f6e\u4f18\u5148\u7ea7\u3002</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_6","title":"\u4e2d\u65ad\u56de\u8c03\u51fd\u6570","text":"<ul> <li>\u4f60\u9700\u8981\u5b9e\u73b0\u7684\u51fd\u6570\uff1a</li> </ul> <p><code>c   void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)   {       if (GPIO_Pin == KEY_WKUP_Pin) {           // \u5728\u8fd9\u91cc\u7f16\u5199\u4e2d\u65ad\u89e6\u53d1\u540e\u7684\u5904\u7406\u4ee3\u7801           // \u63a8\u8350\uff1a\u53ea\u8bbe\u7f6e\u6807\u5fd7\u4f4d\u6216\u53d1\u9001\u6d88\u606f\uff0c\u5c06\u8017\u65f6\u64cd\u4f5c\u7559\u7ed9\u4e3b\u5faa\u73af       }   }</code></p> <ul> <li>\u8bf4\u660e\uff1a\u4e2d\u65ad\u89e6\u53d1\u65f6\uff0cHAL \u5e93\u4f1a\u81ea\u52a8\u6267\u884c\u4e2d\u65ad\u5411\u91cf\u8868\u4e2d\u7684 ISR\uff08\u5728 <code>stm32fxxx_it.c</code> \u4e2d\uff09\uff0c\u8be5 ISR \u4f1a\u8c03\u7528\u4e00\u4e2a\u901a\u7528\u7684\u5f31\uff08<code>__weak</code>\uff09\u56de\u8c03\u51fd\u6570\u3002\u4f60\u53ea\u9700\u8981\u5728\u4f60\u7684\u4ee3\u7801\u4e2d\u91cd\u5199\uff08\u5b9e\u73b0\uff09\u8fd9\u4e2a <code>HAL_GPIO_EXTI_Callback</code> \u51fd\u6570\u5373\u53ef\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_7","title":"\u8bf4\u660e","text":"<p>\u7b80\u800c\u8a00\u4e4b\uff0c<code>HAL_GPIO_EXTI_Callback</code> \u5bf9\u6240\u6709\u901a\u8fc7 GPIO \u5f15\u811a\u89e6\u53d1\u7684\u5916\u90e8\u4e2d\u65ad (EXTI) \u90fd\u6709\u6548\u3002</p> <p>\u5b83\u662f\u4e00\u4e2a \u901a\u7528\u7684\u3001\u7edf\u4e00\u7684\u56de\u8c03\u51fd\u6570\uff0c\u7528\u4e8e\u5904\u7406\u6240\u6709\u8fde\u63a5\u5230 EXTI \u7ebf\u7684 GPIO \u4e2d\u65ad\u4e8b\u4ef6\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#hal","title":"HAL \u5e93\u7684\u62bd\u8c61\u673a\u5236","text":"<p>HAL \u5e93\u901a\u8fc7\u4e00\u79cd\u591a\u5c42\u5d4c\u5957\u7684\u51fd\u6570\u8c03\u7528\u7ed3\u6784\uff0c\u5c06\u5e95\u5c42\u4e0d\u540c\u7684\u4e2d\u65ad\u5411\u91cf\u62bd\u8c61\u6210\u4e00\u4e2a\u7edf\u4e00\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u4f60\u53ea\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a <code>HAL_GPIO_EXTI_Callback</code>\uff1a</p> <ol> <li>\u5e95\u5c42\uff1a\u786c\u4ef6\u4e2d\u65ad\u5411\u91cf (ISR)\uff1a</li> </ol> <p>\u4f60\u63d0\u5230\u4e0d\u540c\u7684\u5916\u90e8\u4e2d\u65ad\u6709\u4e0d\u540c\u7684\u4e2d\u65ad\u5411\u91cf\uff0c\u8fd9\u662f\u6b63\u786e\u7684\u3002\u4f8b\u5982\uff0cSTM32 F4 \u7cfb\u5217\u82af\u7247\u4e2d\uff1a</p> <ul> <li> <p>EXTI \u7ebf 0 \u5bf9\u5e94\u4e00\u4e2a\u5411\u91cf\uff08\u4f8b\u5982 <code>EXTI0_IRQHandler</code>\uff09\u3002</p> </li> <li> <p>EXTI \u7ebf 1 \u5bf9\u5e94\u4e00\u4e2a\u5411\u91cf\uff08\u4f8b\u5982 <code>EXTI1_IRQHandler</code>\uff09\u3002</p> </li> <li> <p>EXTI \u7ebf 10 \u5230 15 \u5171\u7528\u4e00\u4e2a\u5411\u91cf\uff08\u4f8b\u5982 EXTI15_10_IRQHandler\uff09\u3002</p> <p>\u8fd9\u4e9b\u51fd\u6570\u4f4d\u4e8e CubeMX \u751f\u6210\u7684 stm32fxx_it.c \u6587\u4ef6\u4e2d\u3002</p> </li> <li> <p>\u4e2d\u95f4\u5c42\uff1aHAL \u5e93\u4e2d\u65ad\u5904\u7406\u51fd\u6570\uff1a</p> </li> </ul> <p>\u5728\u6bcf\u4e2a\u5e95\u5c42\u7684\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f (ISR) \u4e2d\uff0c\u4f1a\u8c03\u7528 HAL \u5e93\u63d0\u4f9b\u7684\u5177\u4f53\u5904\u7406\u51fd\u6570\uff0c\u4f8b\u5982\uff1a</p> <p><code>c    // \u4f4d\u4e8e stm32fxx_it.c    void EXTI0_IRQHandler(void)    {        HAL_GPIO_EXTI_IRQHandler(GPIO_PIN_0); // \u8c03\u7528HAL\u5e93\u5904\u7406\u51fd\u6570    }</code></p> <p>HAL \u5e93\u7684\u8fd9\u4e2a\u5904\u7406\u51fd\u6570\u4f1a\u8d1f\u8d23\uff1a</p> <ul> <li>\u6e05\u9664\u5bf9\u5e94\u7684 EXTI \u6302\u8d77\u5bc4\u5b58\u5668 (PR) \u6807\u5fd7\u3002</li> <li> <p>\u68c0\u67e5\u4e2d\u65ad\u6e90\u662f\u5426\u771f\u7684\u88ab\u4f7f\u80fd\u548c\u89e6\u53d1\u3002</p> </li> <li> <p>\u9876\u5c42\uff1a\u901a\u7528\u56de\u8c03\u51fd\u6570\uff1a</p> </li> </ul> <p>HAL \u5e93\u5904\u7406\u51fd\u6570\u7684\u6700\u540e\u4e00\u6b65\uff0c\u5c31\u662f\u8c03\u7528\u8fd9\u4e2a \u5f31\uff08__weak\uff09 \u58f0\u660e\u7684 HAL_GPIO_EXTI_Callback \u51fd\u6570\uff0c\u5e76\u5c06\u89e6\u53d1\u4e2d\u65ad\u7684\u5f15\u811a\u53f7\u4f5c\u4e3a\u53c2\u6570\u4f20\u8fdb\u53bb\u3002</p> <ul> <li><code>__weak</code> \u5173\u952e\u5b57\u5141\u8bb8\u4f60\u5728\u4f60\u7684\u5e94\u7528\u4ee3\u7801\uff08\u5982 <code>main.c</code> \u6216\u9a71\u52a8\u6587\u4ef6\uff09\u4e2d\u91cd\u5199\u8fd9\u4e2a\u51fd\u6570\u3002</li> <li>\u53c2\u6570 <code>GPIO_Pin</code>\uff1a\u901a\u8fc7\u68c0\u67e5\u8fd9\u4e2a\u53c2\u6570\uff0c\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4e2d\u5224\u65ad\u662f\u54ea\u4e2a\u5f15\u811a\u89e6\u53d1\u4e86\u4e2d\u65ad\uff0c\u4ece\u800c\u6267\u884c\u4e0d\u540c\u7684\u903b\u8f91\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_8","title":"\u5982\u4f55\u533a\u5206\u4e0d\u540c\u7684\u4e2d\u65ad\u6e90\uff1f","text":"<p>\u867d\u7136\u56de\u8c03\u51fd\u6570\u662f\u7edf\u4e00\u7684\uff0c\u4f46\u4f60\u9700\u8981\u6839\u636e\u4f20\u5165\u7684 <code>GPIO_Pin</code> \u53c2\u6570\u6765\u533a\u5206\u548c\u5904\u7406\u4e0d\u540c\u7684\u5916\u90e8\u4e2d\u65ad\u4e8b\u4ef6\uff1a</p> <pre><code>void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)\n{\n    if (GPIO_Pin == KEY_START_Pin) {\n        // \u5904\u7406\u5f00\u59cb\u6309\u952e\u7684\u903b\u8f91\n    } else if (GPIO_Pin == KEY_STOP_Pin) {\n        // \u5904\u7406\u505c\u6b62\u6309\u952e\u7684\u903b\u8f91\n    } else if (GPIO_Pin == RFID_DET_Pin) {\n        // \u5904\u7406 RFID \u68c0\u6d4b\u7684\u903b\u8f91\n    }\n    // \u6ce8\u610f\uff1a\u65e0\u9700\u624b\u52a8\u6e05\u9664\u6302\u8d77\u6807\u5fd7\uff0cHAL \u5e93\u4e2d\u95f4\u5c42\u5df2\u7ecf\u5904\u7406\u4e86\n}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#_9","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u6d88\u6296 (Debouncing)\uff1a\u5bf9\u4e8e\u673a\u68b0\u6309\u952e\uff0c\u52a1\u5fc5\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u6216\u5728\u540e\u7eed\u5904\u7406\u4e2d\u8003\u8651\u8f6f\u4ef6\u6d88\u6296\u903b\u8f91\uff0c\u9632\u6b62\u5f15\u811a\u6296\u52a8\u5bfc\u81f4\u591a\u6b21\u8bef\u89e6\u53d1\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/GPIO%E6%93%8D%E4%BD%9C/#cubemx_1","title":"\u4f7f\u7528\u4e86 CubeMX \u540e\u4e0d\u7528\u5173\u5fc3\u4ec0\u4e48\uff1f","text":"<p>\u5f53\u4f60\u4f7f\u7528 STM32CubeMX \u548c HAL \u5e93\u8fdb\u884c\u5f00\u53d1\u65f6\uff0cCubeMX \u5df2\u7ecf\u4e3a\u4f60\u5904\u7406\u4e86\u5927\u91cf\u7684\u5e95\u5c42\u914d\u7f6e\u548c\u521d\u59cb\u5316\u5de5\u4f5c\u3002\u56e0\u6b64\uff0c\u4f5c\u4e3a\u5e94\u7528\u5f00\u53d1\u8005\uff0c\u4f60\u51e0\u4e4e\u4e0d\u7528\u5173\u5fc3\u4ee5\u4e0b\u8fd9\u4e9b\u7ec6\u8282\uff1a</p> \u7ec6\u8282\u7c7b\u522b \u63cf\u8ff0 GPIO \u65f6\u949f\u4f7f\u80fd CubeMX \u81ea\u52a8\u5904\u7406\u3002 \u5728 <code>HAL_MspInit()</code> \u51fd\u6570\u4e2d\uff0cCubeMX \u5df2\u7ecf\u81ea\u52a8\u751f\u6210\u4e86 <code>__HAL_RCC_GPIOx_CLK_ENABLE()</code> \u8c03\u7528\uff0c\u786e\u4fdd\u5728\u4f7f\u7528\u7aef\u53e3\u524d\u65f6\u949f\u5df2\u6253\u5f00\u3002 \u5bc4\u5b58\u5668\u5730\u5740\u4e0e\u4f4d\u64cd\u4f5c HAL \u5e93\u5c01\u88c5\u4e86\u3002 \u4f60\u4e0d\u9700\u8981\u76f4\u63a5\u64cd\u4f5c MODER\u3001OTYPER\u3001PUPDR \u7b49\u5bc4\u5b58\u5668\u6765\u8bbe\u7f6e\u6a21\u5f0f\u3001\u7c7b\u578b\u6216\u4e0a\u4e0b\u62c9\uff0c\u53ea\u9700\u4f7f\u7528 <code>HAL_GPIO_WritePin()</code> \u7b49 API \u5373\u53ef\u3002 \u5e95\u5c42\u521d\u59cb\u5316\u51fd\u6570\u8c03\u7528 CubeMX \u81ea\u52a8\u751f\u6210\u5e76\u8c03\u7528\u3002 <code>MX_GPIO_Init()</code> \u51fd\u6570\u4f1a\u5728 <code>main()</code> \u51fd\u6570\u4e2d\u88ab\u8c03\u7528\u3002\u4f60\u65e0\u9700\u5173\u5fc3\u5b83\u4f55\u65f6\u4ee5\u53ca\u5982\u4f55\u88ab\u8c03\u7528\u3002 NVIC \u5411\u91cf\u8868\u914d\u7f6e CubeMX \u81ea\u52a8\u914d\u7f6e\u3002 \u5bf9\u4e8e EXTI\uff0cCubeMX \u4f1a\u81ea\u52a8\u914d\u7f6e\u5e76\u4f7f\u80fd\u5bf9\u5e94\u7684 NVIC \u4e2d\u65ad\u901a\u9053\uff0c\u4f60\u53ea\u9700\u8981\u5b9e\u73b0\u4f60\u7684 \u56de\u8c03\u51fd\u6570 \u5373\u53ef\u3002 \u590d\u4f4d\u503c (Reset Value) HAL \u5e93\u8d1f\u8d23\u521d\u59cb\u5316\u3002 \u542f\u52a8\u65f6 GPIO \u9ed8\u8ba4\u5904\u4e8e\u6a21\u62df\u6216\u6d6e\u7a7a\u72b6\u6001\uff0c\u4f46 <code>HAL_GPIO_Init()</code> \u4f1a\u5c06\u5176\u8bbe\u7f6e\u4e3a\u4f60\u5728 CubeMX \u4e2d\u914d\u7f6e\u7684\u72b6\u6001\u3002\u4f60\u4e0d\u7528\u5173\u5fc3\u542f\u52a8\u65f6\u7684\u9ed8\u8ba4\u72b6\u6001\u3002 <p>\u603b\u7ed3\uff1a CubeMX \u7684\u76ee\u6807\u5c31\u662f\u8ba9\u4f60\u4e13\u6ce8\u4e8e\u4f7f\u7528 HAL API\uff08\u5982 <code>HAL_GPIO_WritePin</code>\u3001<code>HAL_GPIO_ReadPin</code>\uff09\u548c\u5b9e\u73b0 \u56de\u8c03\u51fd\u6570\uff08\u5982 <code>HAL_GPIO_EXTI_Callback</code>\uff09\uff0c\u800c\u4e0d\u7528\u82b1\u8d39\u65f6\u95f4\u5904\u7406\u5e95\u5c42\u5bc4\u5b58\u5668\u7684\u914d\u7f6e\u7ec6\u8282\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/","title":"\u57fa\u672c\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#nvic","title":"NVIC \u6838\u5fc3\u6982\u5ff5\u4e0e\u5de5\u4f5c\u539f\u7406","text":"<p>NVIC (Nested Vectored Interrupt Controller) \u662f ARM Cortex-M \u5185\u6838\uff08STM32 \u91c7\u7528\uff09\u4e2d\u4e00\u4e2a\u9ad8\u5ea6\u96c6\u6210\u7684\u6a21\u5757\uff0c\u4e13\u95e8\u8d1f\u8d23\u7ba1\u7406\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u4e2d\u65ad\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#1-vector-table","title":"1. \u4e2d\u65ad\u5411\u91cf\u8868 (Vector Table)","text":"<ul> <li> <p>\u5b9a\u4e49: \u8fd9\u662f\u4e00\u4e2a\u5185\u5b58\u5730\u5740\u8868\u683c\uff0c\u5b58\u653e\u4e86\u6240\u6709\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\uff08ISR\uff09\u7684\u5165\u53e3\u5730\u5740\u3002</p> </li> <li> <p>\u4f5c\u7528: \u5f53\u4e00\u4e2a\u4e2d\u65ad\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0cNVIC \u4f1a\u67e5\u8be2\u5411\u91cf\u8868\uff0c\u83b7\u53d6\u5bf9\u5e94\u7684 ISR \u5730\u5740\uff0c\u5e76\u8df3\u8f6c\u6267\u884c\u3002</p> </li> <li> <p>STM32 \u7279\u6027: \u5411\u91cf\u8868\u901a\u5e38\u4f4d\u4e8e Flash \u6216 SRAM \u7684\u8d77\u59cb\u5730\u5740\uff0c\u5176\u57fa\u5730\u5740\u662f\u53ef\u7f16\u7a0b\u7684\uff08\u901a\u8fc7 SCB \u5bc4\u5b58\u5668\uff09\u3002CubeMX \u751f\u6210\u7684\u9879\u76ee\u4e2d\uff0c\u5411\u91cf\u8868\u9ed8\u8ba4\u4f4d\u4e8e Flash \u7684\u8d77\u59cb\u5730\u5740\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#2","title":"2. \u4e2d\u65ad\u6e90\u5206\u7c7b","text":"<p>STM32 \u7684\u4e2d\u65ad\u6e90\u5927\u81f4\u5206\u4e3a\u4e24\u7c7b\uff1a</p> \u7c7b\u578b \u63cf\u8ff0 \u793a\u4f8b \u4f18\u5148\u7ea7\u8bbe\u5b9a \u5185\u6838\u5f02\u5e38 (Core Exceptions) \u7531 CPU \u5185\u6838\u5185\u90e8\u4ea7\u751f\uff0c\u7528\u4e8e\u5904\u7406\u7cfb\u7edf\u9519\u8bef\u6216\u8c03\u8bd5\u3002 Reset, NMI, Hard Fault, SysTick \u62e5\u6709\u56fa\u5b9a\u7684\u4f18\u5148\u7ea7\u548c\u53ef\u7f16\u7a0b\u7684\u5b50\u4f18\u5148\u7ea7 \u5916\u90e8\u4e2d\u65ad (External Interrupts) \u7531\u7247\u4e0a\u5916\u8bbe\uff08Peripherals\uff09\u6216\u5916\u90e8\u5f15\u811a\u4ea7\u751f\u3002 EXTI, USART, SPI, TIM, ADC \u4f18\u5148\u7ea7\u5b8c\u5168\u53ef\u7f16\u7a0b"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#3-priority-management","title":"3. \u4f18\u5148\u7ea7\u7ba1\u7406 (Priority Management)","text":"<p>NVIC \u7684\u6838\u5fc3\u804c\u80fd\u662f\u5904\u7406\u591a\u91cd\u4e2d\u65ad\u7684\u62a2\u5360\u548c\u4ef2\u88c1\u3002</p> <ul> <li> <p>\u62a2\u5360\u4f18\u5148\u7ea7 (Preemption Priority)\uff1a\u8fd9\u662f\u4e2d\u65ad\u7684\u9996\u8981\u51b3\u5b9a\u56e0\u7d20\u3002\u9ad8\u62a2\u5360\u4f18\u5148\u7ea7\u7684\u4e2d\u65ad\u53ef\u4ee5\u6253\u65ad\uff08\u62a2\u5360\uff09\u4f4e\u62a2\u5360\u4f18\u5148\u7ea7\u7684\u4e2d\u65ad\u3002</p> </li> <li> <p>\u5b50\u4f18\u5148\u7ea7 (Sub-Priority / Sub-Group Priority)\uff1a\u5f53\u4e24\u4e2a\u4e2d\u65ad\u7684\u62a2\u5360\u4f18\u5148\u7ea7\u76f8\u540c\u65f6\uff0c\u5b50\u4f18\u5148\u7ea7\u624d\u53d1\u6325\u4f5c\u7528\u3002\u5b83\u51b3\u5b9a\u4e86\u5728\u76f8\u540c\u62a2\u5360\u7ea7\u522b\u4e0b\uff0c\u54ea\u4e2a\u4e2d\u65ad\u5148\u88ab\u670d\u52a1\uff08\u4f46\u4e0d\u80fd\u4e92\u76f8\u62a2\u5360\uff09\u3002</p> </li> <li> <p>\u4f18\u5148\u7ea7\u5206\u7ec4 (Priority Grouping)\uff1aARM Cortex-M \u5141\u8bb8\u5f00\u53d1\u8005\u5c06 8 \u4f4d\uff08\u6216\u66f4\u5c11\uff09\u7684\u4f18\u5148\u7ea7\u5b57\u6bb5\u5206\u6210\u62a2\u5360\u4f18\u5148\u7ea7\u548c\u5b50\u4f18\u5148\u7ea7\u4e24\u90e8\u5206\u3002</p> <ul> <li> <p>\u4f8b\u5982\uff0c\u5982\u679c\u914d\u7f6e\u4e3a Group 2\uff08CubeMX \u9ed8\u8ba4\uff09\uff0c\u5219\u4f18\u5148\u7ea7\u5b57\u6bb5\u7684\u6700\u9ad8 4 \u4f4d\u7528\u4e8e\u62a2\u5360\u4f18\u5148\u7ea7\uff0c\u6700\u4f4e 0 \u4f4d\u7528\u4e8e\u5b50\u4f18\u5148\u7ea7\uff08\u5373\u6ca1\u6709\u5b50\u4f18\u5148\u7ea7\uff09\u3002</p> </li> <li> <p>CubeMX \u9ed8\u8ba4\u5206\u7ec4\uff1aSTM32 HAL \u5e93\u901a\u5e38\u9ed8\u8ba4\u4f7f\u7528 Group 4\uff08\u5373 4 \u4f4d\u7528\u4e8e\u62a2\u5360\u4f18\u5148\u7ea7\uff0c0 \u4f4d\u7528\u4e8e\u5b50\u4f18\u5148\u7ea7\uff09\uff0c\u6216 Group 3\uff083 \u4f4d\u62a2\u5360\uff0c1 \u4f4d\u5b50\u4f18\u5148\u7ea7\uff09\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u82af\u7247\u7cfb\u5217\u548c HAL \u5e93\u7248\u672c\u3002</p> </li> </ul> </li> </ul> <p>\u4f18\u5148\u7ea7\u6570\u503c\u89c4\u5219\uff1a</p> <ul> <li> <p>NVIC \u4e2d\uff0c\u6570\u503c\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff080 \u662f\u6700\u9ad8\u4f18\u5148\u7ea7\uff09\u3002</p> </li> <li> <p>\u62a2\u5360\u4f18\u5148\u7ea7\u9ad8\u7684\u4e2d\u65ad\u624d\u80fd\u62a2\u5360\u6b63\u5728\u6267\u884c\u7684\u4f4e\u4f18\u5148\u7ea7\u4e2d\u65ad\u3002</p> </li> </ul> \u5206\u7ec4\u65b9\u5f0f \u62a2\u5360\u4f18\u5148\u7ea7 \u54cd\u5e94\u4f18\u5148\u7ea7 \u5206\u7ec40 0\u4f4d\uff0c\u53d6\u503c\u4e3a0 4\u4f4d\uff0c\u53d6\u503c\u4e3a0~15 \u5206\u7ec41 1\u4f4d\uff0c\u53d6\u503c\u4e3a0~1 3\u4f4d\uff0c\u53d6\u503c\u4e3a0~7 \u5206\u7ec42 2\u4f4d\uff0c\u53d6\u503c\u4e3a0~3 2\u4f4d\uff0c\u53d6\u503c\u4e3a0~3 \u5206\u7ec43 3\u4f4d\uff0c\u53d6\u503c\u4e3a0~7 1\u4f4d\uff0c\u53d6\u503c\u4e3a0~1 \u5206\u7ec44 4\u4f4d\uff0c\u53d6\u503c\u4e3a0~15 0\u4f4d\uff0c\u53d6\u503c\u4e3a0 # STM32CubeMX \u4e2d\u7684 NVIC \u914d\u7f6e <p>CubeMX \u6781\u5927\u5730\u7b80\u5316\u4e86 NVIC \u7684\u914d\u7f6e\u5de5\u4f5c\uff0c\u4f7f\u5176\u56fe\u5f62\u5316\u3001\u53ef\u89c6\u5316\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#1","title":"1. \u4f18\u5148\u7ea7\u5206\u7ec4\u914d\u7f6e","text":"<ul> <li> <p>\u8def\u5f84: Pinout &amp; Configuration $\\rightarrow$ System Core $\\rightarrow$ NVIC\u3002</p> </li> <li> <p>\u914d\u7f6e\u9879: Priority Group\u3002</p> <ul> <li> <p>HAL \u5e93\u9ed8\u8ba4\u503c: \u5e38\u89c1\u4e3a <code>NVIC Priority Group 4</code> (\u6216 <code>__NVIC_PRIO_BITS</code> \u51b3\u5b9a\u7684\u5206\u7ec4)\u3002</p> </li> <li> <p>\u610f\u4e49: Group 4 \u610f\u5473\u7740\u6240\u6709\u53ef\u7528\u4f18\u5148\u7ea7\u4f4d\uff08\u901a\u5e38 4 \u4f4d\uff09\u90fd\u5206\u914d\u7ed9\u62a2\u5360\u4f18\u5148\u7ea7\uff0c\u6ca1\u6709\u5b50\u4f18\u5148\u7ea7\u3002\u8fd9\u4fdd\u8bc1\u4e86\u4f18\u5148\u7ea7\u8bbe\u5b9a\u7684\u76f4\u89c2\u6027\u548c\u62a2\u5360\u7684\u786e\u5b9a\u6027\u3002</p> </li> <li> <p>\u5efa\u8bae: \u5728\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u4e0d\u8981\u8f7b\u6613\u4fee\u6539 CubeMX \u9ed8\u8ba4\u7684\u4f18\u5148\u7ea7\u5206\u7ec4\uff0c\u9664\u975e\u4f60\u5bf9\u4e2d\u65ad\u62a2\u5360\u673a\u5236\u6709\u975e\u5e38\u6df1\u5165\u7684\u7406\u89e3\u548c\u7279\u6b8a\u8981\u6c42\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#2_1","title":"2. \u5916\u90e8\u4e2d\u65ad\u914d\u7f6e","text":"<ul> <li> <p>\u8def\u5f84: Pinout &amp; Configuration $\\rightarrow$ NVIC Settings (\u5728\u6bcf\u4e2a\u5916\u8bbe\u6216 EXTI \u7684\u914d\u7f6e\u9875\u9762\u4e2d)\u3002</p> </li> <li> <p>\u64cd\u4f5c:</p> <ol> <li> <p>\u627e\u5230\u76ee\u6807\u5916\u8bbe\uff08\u5982 TIM3\u3001USART1 \u6216 EXTI Line 0\uff09\u3002</p> </li> <li> <p>\u52fe\u9009\u5bf9\u5e94\u7684\u4e2d\u65ad\u7ebf\uff08\u5982 <code>TIM3 global interrupt</code>\uff09\u3002</p> </li> <li> <p>\u8bbe\u7f6e Preemption Priority\uff08\u62a2\u5360\u4f18\u5148\u7ea7\uff09\u548c Subpriority\uff08\u5b50\u4f18\u5148\u7ea7\uff09\u3002</p> </li> </ol> </li> </ul> <p>CubeMX \u7ec6\u8282\uff1a\u5982\u679c\u4f60\u9009\u62e9\u4e86 Group 4\uff080 \u4f4d\u5b50\u4f18\u5148\u7ea7\uff09\uff0c\u90a3\u4e48 Subpriority \u5b57\u6bb5\u5c06\u65e0\u6cd5\u7f16\u8f91\uff0c\u4f60\u53ea\u9700\u5173\u6ce8 Preemption Priority\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#hal-nvic-api","title":"**HAL \u5e93\u4e0e NVIC \u76f8\u5173\u7684 API","text":"<p>HAL \u5e93\u63d0\u4f9b\u4e86\u4e00\u5957\u7b80\u6d01\u7684 API \u6765\u7ba1\u7406 NVIC\u3002\u8fd9\u4e9b\u51fd\u6570\u901a\u5e38\u7531 CubeMX \u81ea\u52a8\u751f\u6210\uff0c\u4f46\u4f60\u4e5f\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u8c03\u7528\u5b83\u4eec\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#1_1","title":"1. \u4f18\u5148\u7ea7\u5206\u7ec4\u914d\u7f6e (\u81ea\u52a8)","text":"<ul> <li> <p>\u51fd\u6570: <code>HAL_NVIC_SetPriorityGrouping(uint32_t PriorityGroup)</code></p> </li> <li> <p>\u8bf4\u660e: \u6b64\u51fd\u6570\u8bbe\u7f6e\u4f18\u5148\u7ea7\u5206\u7ec4\u3002CubeMX \u4f1a\u5728 <code>HAL_Init()</code> \u6216 <code>MX_NVIC_Init()</code> \u4e2d\u81ea\u52a8\u8c03\u7528\u5b83\uff0c\u4f7f\u7528\u4f60\u5728\u914d\u7f6e\u754c\u9762\u9009\u62e9\u7684\u5206\u7ec4\uff08\u901a\u5e38\u662f <code>NVIC_PRIORITYGROUP_4</code>\uff09\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#2_2","title":"2. \u914d\u7f6e\u548c\u8bbe\u7f6e\u4f18\u5148\u7ea7 (\u81ea\u52a8/\u624b\u52a8)","text":"<ul> <li> <p>\u51fd\u6570: <code>HAL_NVIC_SetPriority(IRQn_Type IRQn, uint32_t PreemptPriority, uint32_t SubPriority)</code></p> </li> <li> <p>\u8bf4\u660e: \u7528\u4e8e\u8bbe\u7f6e\u7279\u5b9a\u4e2d\u65ad\u6e90\u7684\u62a2\u5360\u4f18\u5148\u7ea7\u548c\u5b50\u4f18\u5148\u7ea7\u3002</p> <ul> <li> <p><code>IRQn</code>: \u4e2d\u65ad\u8bf7\u6c42\u53f7\uff08\u4f8b\u5982 <code>TIM3_IRQn</code>, <code>USART1_IRQn</code>\uff09\u3002</p> </li> <li> <p>CubeMX \u4f1a\u5728 <code>MX_NVIC_Init()</code> \u4e2d\u4e3a\u6240\u6709\u542f\u7528\u7684\u4e2d\u65ad\u6e90\u81ea\u52a8\u751f\u6210\u8c03\u7528\u3002</p> </li> </ul> <p><code>c // \u793a\u4f8b\uff1aCubeMX \u81ea\u52a8\u751f\u6210\u7684\u4ee3\u7801\u7247\u6bb5 HAL_NVIC_SetPriority(TIM3_IRQn, 0, 0); // \u8bbe\u7f6e TIM3 \u4e2d\u65ad\uff0c\u62a2\u5360\u4f18\u5148\u7ea7\u4e3a 0 HAL_NVIC_EnableIRQ(TIM3_IRQn);</code></p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#3","title":"3. \u4e2d\u65ad\u7684\u4f7f\u80fd\u4e0e\u7981\u7528","text":"<ul> <li> <p>\u51fd\u6570: <code>HAL_NVIC_EnableIRQ(IRQn_Type IRQn)</code></p> </li> <li> <p>\u51fd\u6570: <code>HAL_NVIC_DisableIRQ(IRQn_Type IRQn)</code></p> </li> <li> <p>\u8bf4\u660e: \u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u5f00\u542f\u6216\u5173\u95ed\u7279\u5b9a\u7684\u4e2d\u65ad\u8bf7\u6c42\u3002</p> <ul> <li>\u6ce8\u610f: \u5373\u4f7f\u5728 CubeMX \u4e2d\u542f\u7528\u4e86\u4e2d\u65ad\uff0c\u5728\u8fdb\u5165 <code>main()</code> \u51fd\u6570\u4e4b\u524d\uff0c\u8fd9\u4e9b\u4e2d\u65ad\u901a\u5e38\u4ecd\u5904\u4e8e\u7981\u7528\u72b6\u6001\u3002<code>MX_NVIC_Init()</code> \u4f1a\u5728\u521d\u59cb\u5316\u9636\u6bb5\u8c03\u7528 <code>HAL_NVIC_EnableIRQ</code> \u5b8f\u6765\u4f7f\u80fd\u5b83\u4eec\u3002</li> </ul> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#4","title":"4. \u4e2d\u65ad\u6302\u8d77\u4e0e\u6e05\u9664","text":"<ul> <li> <p>\u51fd\u6570: <code>HAL_NVIC_SetPendingIRQ(IRQn_Type IRQn)</code></p> </li> <li> <p>\u51fd\u6570: <code>HAL_NVIC_ClearPendingIRQ(IRQn_Type IRQn)</code></p> </li> <li> <p>\u8bf4\u660e: \u7528\u4e8e\u8f6f\u4ef6\u6a21\u62df\u4e2d\u65ad\u89e6\u53d1\uff08\u8bbe\u7f6e\u6302\u8d77\u6807\u5fd7\uff09\u6216\u6e05\u9664\u6302\u8d77\u6807\u5fd7\u3002\u4e00\u822c\u4e0d\u5e38\u7528\uff0c\u4f46\u5728\u6d4b\u8bd5\u548c\u7279\u6b8a\u540c\u6b65\u673a\u5236\u4e2d\u53ef\u80fd\u7528\u5230\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#isr","title":"\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f (ISR) \u4e0e\u56de\u8c03\u51fd\u6570\u673a\u5236","text":"<p>\u7406\u89e3 HAL \u5e93\u5982\u4f55\u5904\u7406 ISR \u662f\u4f7f\u7528\u4e2d\u65ad\u7684\u5173\u952e\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#1-isr-cubemx","title":"1. \u4e2d\u65ad\u5411\u91cf\u8868\u4e0e ISR (\u7531 CubeMX \u751f\u6210)","text":"<ul> <li> <p>\u6587\u4ef6: <code>stm32fxxx_it.c</code></p> </li> <li> <p>\u5185\u5bb9: \u8fd9\u4e2a\u6587\u4ef6\u5305\u542b\u4e86\u6240\u6709\u4e2d\u65ad\u5411\u91cf\u8868\u6307\u5411\u7684\u5165\u53e3\u51fd\u6570\uff0c\u4f8b\u5982 <code>TIM3_IRQHandler</code>\u3002</p> </li> <li> <p>HAL \u5e93\u7684\u4f5c\u7528: \u8fd9\u4e9b ISR \u51fd\u6570\u5185\u90e8\u901a\u5e38\u53ea\u505a\u4e24\u4ef6\u4e8b\uff1a</p> <ol> <li> <p>\u8c03\u7528 HAL \u5e93\u63d0\u4f9b\u7684\u901a\u7528\u5904\u7406\u51fd\u6570\uff08\u4f8b\u5982 <code>HAL_TIM_IRQHandler(&amp;htim3)</code>\uff09\u3002</p> </li> <li> <p>\u5728\u8fd9\u4e2a\u901a\u7528\u5904\u7406\u51fd\u6570\u5185\u90e8\uff0cHAL \u5e93\u4f1a\u6e05\u9664\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c\u5e76\u6700\u7ec8\u8c03\u7528\u56de\u8c03\u51fd\u6570\u3002</p> </li> </ol> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/NVIC/#2_3","title":"2. \u4e2d\u65ad\u56de\u8c03\u51fd\u6570 (\u4f60\u9700\u8981\u5b9e\u73b0)","text":"<ul> <li> <p>\u673a\u5236: HAL \u5e93\u5c06\u5e95\u5c42\u7684 ISR \u62bd\u8c61\u6210\u7528\u6237\u53cb\u597d\u7684 \u5f31\uff08<code>__weak</code>\uff09\u56de\u8c03\u51fd\u6570\u3002</p> </li> <li> <p>\u793a\u4f8b:</p> <ul> <li> <p>\u5b9a\u65f6\u5668\u6ea2\u51fa\uff1a\u4f60\u9700\u8981\u5b9e\u73b0 <code>HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)</code></p> </li> <li> <p>GPIO \u5916\u90e8\u4e2d\u65ad\uff1a\u4f60\u9700\u8981\u5b9e\u73b0 <code>HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)</code>\u3002</p> </li> </ul> </li> <li> <p>\u4f60\u7684\u4efb\u52a1: \u4f60\u53ea\u9700\u8981\u5728\u4f60\u7684\u5e94\u7528\u4ee3\u7801\uff08\u5982 <code>main.c</code> \u6216\u4f60\u7684\u9a71\u52a8\u6587\u4ef6\uff09\u4e2d\u91cd\u5199\u8fd9\u4e9b\u56de\u8c03\u51fd\u6570\uff0c\u5b9e\u73b0\u4f60\u7684\u4e1a\u52a1\u903b\u8f91\u3002</p> </li> </ul> <p>\u6838\u5fc3\u539f\u5219: HAL \u5e93\u5e2e\u4f60\u5904\u7406\u4e86\u6240\u6709\u5bc4\u5b58\u5668\u7ea7\u522b\u7684\u64cd\u4f5c\uff08\u6e05\u9664\u6807\u5fd7\u4f4d\u3001\u8df3\u8f6c\uff09\uff0c\u4f60\u53ea\u9700\u8981\u4e13\u6ce8\u4e8e\u5b9e\u73b0\u56de\u8c03\u51fd\u6570\u4e2d\u7684\u4e1a\u52a1\u903b\u8f91\u5373\u53ef\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/STM32%20HAL%E5%BA%93/","title":"\u5de5\u7a0b\u67b6\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/STM32%20HAL%E5%BA%93/#_2","title":"\u76ee\u5f55","text":"<ul> <li>\u57fa\u7840\uff1a../ARM\u67b6\u6784/ARM\u67b6\u6784|ARM\u67b6\u6784</li> <li>GPIO\u64cd\u4f5c</li> <li>\u5b9a\u65f6\u5668</li> <li>\u786c\u4ef6\u901a\u4fe1\u534f\u8bae</li> <li>NVIC</li> <li>DMA</li> <li>ADC</li> <li>BKP &amp; RTC</li> <li>WDG</li> <li>FLASH</li> <li>../RTOS/FreeRTOS/\u79fb\u690d|\u79fb\u690d</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/","title":"0. \u5b9a\u65f6\u5668\u7684\u5206\u7c7b\u548c\u7ed3\u6784","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#1-base-timebase","title":"1. \u5b9a\u65f6\u5668\u57fa\u7840\u53c2\u6570\u4e0e\u65f6\u57fa\u914d\u7f6e (Base &amp; Timebase)","text":"<p>\u8fd9\u662f\u6240\u6709\u5b9a\u65f6\u5668\u529f\u80fd\u7684\u5730\u57fa\uff0c\u65e0\u8bba\u4f7f\u7528 PWM \u8fd8\u662f\u7f16\u7801\u5668\uff0c\u9996\u5148\u90fd\u8981\u914d\u7f6e\u65f6\u57fa\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":"<ul> <li> <p>CK_INT: \u5185\u90e8\u65f6\u949f\u6e90\u9891\u7387\uff08\u901a\u5e38\u7531 APB1 \u6216 APB2 \u603b\u7ebf\u63d0\u4f9b\uff0c\u9700\u67e5\u9605 Clock Tree\uff09\u3002</p> </li> <li> <p>PSC (Prescaler): \u9884\u5206\u9891\u7cfb\u6570\uff0816\u4f4d\uff0c0~65535\uff09\u3002</p> </li> <li> <p>ARR (AutoReload Register): \u81ea\u52a8\u91cd\u88c5\u8f7d\u503c\uff08\u5468\u671f\u503c\uff09\u3002</p> </li> <li> <p>CNT (Counter): \u5f53\u524d\u8ba1\u6570\u503c\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#cubemx","title":"CubeMX \u914d\u7f6e\u7ec6\u8282","text":"<ol> <li> <p>Pinout &amp; Configuration: \u9009\u62e9 TIMx\u3002</p> </li> <li> <p>Clock Source: \u9009\u62e9 <code>Internal Clock</code> (\u901a\u5e38\u60c5\u51b5)\u3002</p> </li> <li> <p>Parameter Settings:</p> <ul> <li> <p>Prescaler (PSC): \u8f93\u5165 $N-1$\u3002\u4f8b\u5982\u5206\u9891 72\uff0c\u8f93\u5165 <code>71</code>\u3002</p> </li> <li> <p>Counter Mode: <code>Up</code> (\u5411\u4e0a\u8ba1\u6570) \u6700\u5e38\u7528\u3002</p> </li> <li> <p>Counter Period (ARR): \u8f93\u5165 $M-1$\u3002\u51b3\u5b9a\u4e86\u6ea2\u51fa/\u66f4\u65b0\u7684\u65f6\u95f4\u70b9\u3002</p> </li> <li> <p>Internal Clock Division (CKD): \u6570\u5b57\u6ee4\u6ce2\u5668\u4f7f\u7528\u7684\u91c7\u6837\u65f6\u949f\u5206\u9891\uff0c\u901a\u5e38\u9009 <code>No Division</code>\u3002</p> </li> <li> <p>Auto-reload preload: <code>Enable</code> (\u5efa\u8bae\u5f00\u542f\uff0c\u4f7f\u4fee\u6539 ARR \u5728\u4e0b\u4e2a\u66f4\u65b0\u4e8b\u4ef6\u751f\u6548\uff0c\u9632\u6b62\u6ce2\u5f62\u9519\u4e71)\u3002</p> </li> </ul> </li> </ol> <p>\u6838\u5fc3\u516c\u5f0f:</p> <p>$$\\text{\u6ea2\u51fa\u9891\u7387} = \\frac{\\text{CK_INT}}{(PSC+1) \\times (ARR+1)}$$</p> <p>$$\\text{\u6ea2\u51fa\u65f6\u95f4} = \\frac{(PSC+1) \\times (ARR+1)}{\\text{CK_INT}}$$</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#2-timer-interrupt","title":"2. \u5b9a\u65f6\u4e2d\u65ad (Timer Interrupt)","text":"<p>\u6700\u57fa\u7840\u7684\u529f\u80fd\uff0c\u7528\u4e8e\u5468\u671f\u6027\u6267\u884c\u4efb\u52a1\u3002 </p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#cubemx_1","title":"CubeMX \u914d\u7f6e\u7ec6\u8282","text":"<ol> <li> <p>\u914d\u7f6e\u65f6\u57fa: \u5982\u4e0a\u6240\u8ff0\uff0c\u8ba1\u7b97\u597d PSC \u548c ARR \u4ee5\u83b7\u5f97\u76ee\u6807\u4e2d\u65ad\u9891\u7387\uff08\u4f8b\u5982 1ms \u6216 1s\uff09\u3002</p> </li> <li> <p>NVIC Settings:</p> <ul> <li> <p>Enabled: \u5fc5\u987b\u52fe\u9009 <code>TIMx global interrupt</code>\u3002</p> </li> <li> <p>Preemption Priority: \u6839\u636e\u7cfb\u7edf\u5b9e\u65f6\u6027\u8981\u6c42\u8bbe\u7f6e\u4f18\u5148\u7ea7\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_2","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<ul> <li> <p>\u542f\u52a8:</p> <p><code>c // \u5728 main.c \u7684 user code begin 2 HAL_TIM_Base_Start_IT(&amp;htim2); // \u542f\u52a8\u5b9a\u65f6\u5668\u5e76\u5f00\u542f\u66f4\u65b0\u4e2d\u65ad</code></p> </li> <li> <p>\u56de\u8c03\u51fd\u6570:</p> <p><code>c // \u5728 main.c \u6216\u4efb\u610f\u6e90\u6587\u4ef6\u4e2d\u91cd\u5199 void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) {     if (htim-&gt;Instance == TIM2) {         // \u6267\u884c\u5468\u671f\u6027\u4efb\u52a1\uff0c\u4f8b\u5982 1ms \u4e00\u6b21         // \u6ce8\u610f\uff1a\u4e0d\u8981\u5728\u6b64\u6267\u884c\u8017\u65f6\u64cd\u4f5c\uff08\u5982 printf \u5ef6\u8fdf\uff09     } }</code></p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#3-pwm-pulse-width-modulation","title":"3. PWM \u8f93\u51fa (Pulse Width Modulation)","text":"<p>\u57fa\u4e8e 4.\u8f93\u51fa\u6bd4\u8f83 \u5b9e\u73b0\uff0c \u7528\u4e8e\u7535\u673a\u8c03\u901f\u3001LED \u547c\u5438\u706f\u3001\u8702\u9e23\u5668\u9a71\u52a8\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#cubemx_2","title":"CubeMX \u914d\u7f6e\u7ec6\u8282","text":"<ol> <li> <p>Mode: \u5728 Pinout \u4e2d\u5c06 Channel x \u9009\u4e3a <code>PWM Generation CHx</code>\u3002</p> </li> <li> <p>Configuration -&gt; Parameter Settings:</p> <ul> <li> <p>Counter Settings: \u914d\u7f6e PSC \u548c ARR \u51b3\u5b9a PWM \u9891\u7387\u3002</p> </li> <li> <p>PWM Generation Channel x:</p> <ul> <li> <p>Mode:</p> <ul> <li> <p><code>PWM mode 1</code> (\u5e38\u7528): CNT &lt; CCR \u65f6\u6709\u6548\u3002</p> </li> <li> <p><code>PWM mode 2</code>: CNT &gt; CCR \u65f6\u6709\u6548\u3002</p> </li> </ul> </li> <li> <p>Pulse (CCR): \u521d\u59cb\u5360\u7a7a\u6bd4\u6570\u503c\u3002$\\text{Duty} = \\frac{CCR}{ARR+1}$\u3002</p> </li> <li> <p>Output compare preload: <code>Enable</code> (\u91cd\u8981\uff0c\u9632\u6b62\u4fee\u6539\u5360\u7a7a\u6bd4\u65f6\u4ea7\u751f\u6bdb\u523a)\u3002</p> </li> <li> <p>CH Polarity: <code>High</code> (\u6709\u6548\u7535\u5e73\u4e3a\u9ad8) \u6216 <code>Low</code>\u3002</p> </li> </ul> </li> </ul> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_3","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<ul> <li> <p>\u542f\u52a8:</p> <p><code>c HAL_TIM_PWM_Start(&amp;htim3, TIM_CHANNEL_1); // \u5f00\u542f PWM \u8f93\u51fa</code></p> </li> <li> <p>\u8fd0\u884c\u65f6\u4fee\u6539\u5360\u7a7a\u6bd4:</p> <p><code>c // \u4fee\u6539 CCR \u5bc4\u5b58\u5668\uff0c\u8303\u56f4 0 ~ ARR __HAL_TIM_SET_COMPARE(&amp;htim3, TIM_CHANNEL_1, 500);</code></p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#4-output-compare-oc","title":"4. \u8f93\u51fa\u6bd4\u8f83 (Output Compare - OC)","text":"<p>\u8f93\u51fa\u6bd4\u8f83\u53ef\u4ee5\u901a\u8fc7\u6bd4\u8f83CNT\u4e0eCCR\u5bc4\u5b58\u5668\u503c\u7684\u5173\u7cfb\uff0c\u6765\u5bf9\u8f93\u51fa\u7535\u5e73\u8fdb\u884c\u7f6e1\u3001\u7f6e0\u6216\u7ffb\u8f6c\u7684\u64cd\u4f5c\uff0c\u7528\u4e8e\u8f93\u51fa\u4e00\u5b9a\u9891\u7387\u548c\u5360\u7a7a\u6bd4\u7684PWM\u6ce2\u5f62</p> <p>\u4e0e PWM \u7c7b\u4f3c\u4f46\u66f4\u7075\u6d3b\uff0c\u7528\u4e8e\u751f\u6210\u7cbe\u786e\u7684\u8109\u51b2\u3001\u76f8\u4f4d\u63a7\u5236\u6216\u5728\u7279\u5b9a\u65f6\u95f4\u7ffb\u8f6c\u7535\u5e73\uff08Toggle\uff09\u3002\u5b83\u4e0d\u5f3a\u5236\u8981\u6c42\u8fde\u7eed\u6ce2\u5f62\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#cubemx_3","title":"CubeMX \u914d\u7f6e\u7ec6\u8282","text":"<ol> <li> <p>Mode: \u5c06 Channel x \u9009\u4e3a <code>Output Compare CHx</code>\u3002</p> </li> <li> <p>Configuration -&gt; Parameter Settings:</p> <ul> <li> <p>Output Compare Channel x:</p> <ul> <li> <p>Mode:</p> <ul> <li> <p><code>Toggle on match</code>: CNT == CCR \u65f6\u7ffb\u8f6c\u5f15\u811a\u7535\u5e73\uff08\u5e38\u7528\uff0c\u751f\u6210\u56fa\u5b9a\u9891\u7387\u65b9\u6ce2\uff0c\u9891\u7387\u4e3a\u6ea2\u51fa\u9891\u7387\u7684\u4e00\u534a\uff09\u3002</p> </li> <li> <p><code>Set active on match</code>: \u5339\u914d\u65f6\u7f6e\u9ad8\u3002</p> </li> <li> <p><code>PWM mode</code>: \u5176\u5b9e OC \u4e5f\u53ef\u4ee5\u914d\u6210 PWM\uff0c\u4f46\u529f\u80fd\u5c11\u4e8e\u4e13\u7528 PWM \u6a21\u5f0f\u3002</p> </li> </ul> </li> <li> <p>Pulse: \u521d\u59cb\u6bd4\u8f83\u503c\u3002</p> </li> </ul> </li> </ul> </li> <li> <p>NVIC Settings: \u5982\u679c\u9700\u8981\u5728\u5339\u914d\u65f6\u89e6\u53d1\u4e2d\u65ad\u5904\u7406\uff08\u4f8b\u5982\u76f8\u4f4d\u63a7\u5236\uff09\uff0c\u9700\u8981\u5f00\u542f NVIC\u3002</p> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_4","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<ul> <li> <p>\u542f\u52a8:</p> <p>```c // \u65b9\u5f0f1: \u4ec5\u8f93\u51fa\u7535\u5e73\uff0c\u4e0d\u8fdb\u4e2d\u65ad HAL_TIM_OC_Start(&amp;htim3, TIM_CHANNEL_1);</p> <p>// \u65b9\u5f0f2: \u5f00\u542f\u8f93\u51fa\u5e76\u5f00\u542f\u5339\u914d\u4e2d\u65ad HAL_TIM_OC_Start_IT(&amp;htim3, TIM_CHANNEL_1); ```</p> </li> <li> <p>\u4e2d\u65ad\u56de\u8c03 (\u5982\u679c\u5f00\u542f\u4e86 IT):</p> <p><code>c void HAL_TIM_OC_DelayElapsedCallback(TIM_HandleTypeDef *htim) {     if(htim-&gt;Channel == HAL_TIM_ACTIVE_CHANNEL_1) {         // \u5339\u914d\u4e8b\u4ef6\u53d1\u751f\uff0c\u53ef\u4ee5\u5728\u6b64\u52a8\u6001\u4fee\u6539\u4e0b\u4e00\u6b21\u7684 CCR \u503c\u4ee5\u6539\u53d8\u76f8\u4f4d         uint32_t current_ccr = __HAL_TIM_GET_COMPARE(htim, TIM_CHANNEL_1);         __HAL_TIM_SET_COMPARE(htim, TIM_CHANNEL_1, current_ccr + offset);     } }</code></p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#5-input-capture-ic","title":"5. \u8f93\u5165\u6355\u83b7 (Input Capture - IC)","text":"<p>\u8f93\u5165\u6355\u83b7\u6a21\u5f0f\u4e0b\uff0c\u5f53\u901a\u9053\u8f93\u5165\u5f15\u811a\u51fa\u73b0\u6307\u5b9a\u7535\u5e73\u8df3\u53d8\u65f6\uff0c\u5f53\u524dCNT\u7684\u503c\u5c06\u88ab\u9501\u5b58\u5230CCR\u4e2d\uff0c\u53ef\u7528\u4e8e\u6d4b\u91cfPWM\u6ce2\u5f62\u7684\u9891\u7387\u3001\u5360\u7a7a\u6bd4\u3001\u8109\u51b2\u95f4\u9694\u3001\u7535\u5e73\u6301\u7eed\u65f6\u95f4\u7b49\u53c2\u6570</p> <p>\u7528\u4e8e\u6d4b\u91cf\u5916\u90e8\u4fe1\u53f7\u7684\u8109\u5bbd\u3001\u5468\u671f\u3001\u9891\u7387\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#cubemx_4","title":"CubeMX \u914d\u7f6e\u7ec6\u8282","text":"<ol> <li> <p>Mode: Channel x \u9009\u4e3a <code>Input Capture direct mode</code>\u3002</p> </li> <li> <p>Configuration -&gt; Parameter Settings:</p> <ul> <li> <p>Counter Settings: \u914d\u7f6e PSC \u4f7f\u5f97\u5b9a\u65f6\u5668\u4e0d\u90a3\u4e48\u5feb\u6ea2\u51fa\uff0c\u4f46\u7cbe\u5ea6\u53c8\u8981\u8db3\u591f\u3002</p> </li> <li> <p>Input Capture Channel x:</p> <ul> <li> <p>Polarity: <code>Rising Edge</code> (\u4e0a\u5347\u6cbf) \u6216 <code>Falling Edge</code> (\u4e0b\u964d\u6cbf)\u3002</p> </li> <li> <p>Selection: <code>Direct</code> (TI1\u6620\u5c04\u5230IC1)\u3002</p> </li> <li> <p>Prescaler: \u8fd9\u91cc\u7684\u9884\u5206\u9891\u662f\u5bf9\u8f93\u5165\u4fe1\u53f7\u7684\u5206\u9891\uff08\u4f8b\u5982\u6bcf8\u4e2a\u6cbf\u6355\u83b7\u4e00\u6b21\uff09\uff0c\u6d4b\u9ad8\u9891\u65f6\u6709\u7528\uff0c\u901a\u5e38\u9009 <code>No prescaler</code>\u3002</p> </li> <li> <p>Input Filter: <code>0</code>~<code>15</code>\uff0c\u6570\u5b57\u6ee4\u6ce2\uff0c\u6ee4\u9664\u8f93\u5165\u4fe1\u53f7\u6bdb\u523a\u3002</p> </li> </ul> </li> </ul> </li> <li> <p>NVIC Settings: \u5fc5\u987b\u5f00\u542f <code>TIMx global interrupt</code>\u3002</p> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_5","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<ul> <li> <p>\u542f\u52a8:</p> <p><code>c HAL_TIM_IC_Start_IT(&amp;htim2, TIM_CHANNEL_1);</code></p> </li> <li> <p>\u6d4b\u91cf\u903b\u8f91 (\u56de\u8c03\u51fd\u6570):</p> <p>```c uint32_t val1 = 0, val2 = 0; uint8_t capture_idx = 0;</p> <p>void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef *htim) {     if (htim-&gt;Instance == TIM2 &amp;&amp; htim-&gt;Channel == HAL_TIM_ACTIVE_CHANNEL_1)     {         if (capture_idx == 0) {             val1 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1);             capture_idx = 1;         } else {             val2 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1);             // \u5904\u7406\u6ea2\u51fa\u903b\u8f91\uff08\u5982\u679c val2 &lt; val1\uff0c\u8bf4\u660e\u4e2d\u95f4\u53d1\u751f\u8fc7 ARR \u6ea2\u51fa\uff09             // \u8ba1\u7b97\u5468\u671f = val2 - val1 (\u9700\u8003\u8651\u6ea2\u51fa\u8865\u507f)             capture_idx = 0;          }     } } ```</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#6-combined-channels-pwm","title":"6. \u7ec4\u5408\u901a\u9053 (Combined Channels) \u4e0e PWM \u8f93\u5165\u6a21\u5f0f","text":"<p>CubeMX \u4e2d\u7684 <code>Combined Channels</code> \u9009\u9879\u901a\u5e38\u7528\u4e8e\u7279\u6b8a\u7684\u786c\u4ef6\u7ed1\u5b9a\u529f\u80fd\uff0c\u6700\u5178\u578b\u7684\u662f PWM Input Mode\uff08\u540c\u65f6\u6d4b\u91cf\u9891\u7387\u548c\u5360\u7a7a\u6bd4\uff09\u6216 Encoder Mode\u3001Hall Sensor Mode\u3002</p> <p>\u4ee5 PWM Input Mode \u4e3a\u4f8b\uff08\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u529f\u80fd\uff0c\u7528\u4e00\u4e2a\u5b9a\u65f6\u5668\u5f15\u811a\u540c\u65f6\u6355\u83b7\u5468\u671f\u548c\u8109\u5bbd\uff09\uff1a</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#cubemx_5","title":"CubeMX \u914d\u7f6e\u7ec6\u8282","text":"<ol> <li> <p>Mode:</p> <ul> <li> <p>Slave Mode: <code>Reset Mode</code> (\u590d\u4f4d\u6a21\u5f0f)\u3002</p> </li> <li> <p>Trigger Source: <code>TI1FP1</code> (\u5047\u8bbe\u4fe1\u53f7\u4ece CH1 \u8fdb)\u3002</p> </li> <li> <p>Combined Channels: \u52fe\u9009 <code>PWM Input on CH1</code> (CubeMX \u4f1a\u81ea\u52a8\u628a CH2 \u53d8\u6210 Indirect mode)\u3002</p> </li> </ul> </li> <li> <p>Configuration:</p> <ul> <li> <p>Channel 1 (IC1): Polarity <code>Rising Edge</code> (\u6d4b\u5468\u671f)\uff0cSelection <code>Direct</code>\u3002</p> </li> <li> <p>Channel 2 (IC2): Polarity <code>Falling Edge</code> (\u6d4b\u5360\u7a7a\u6bd4)\uff0cSelection <code>Indirect</code>\u3002</p> </li> <li> <p>\u539f\u7406: \u4e0a\u5347\u6cbf\u89e6\u53d1 Reset\uff08CNT\u6e05\u96f6\uff09\u5e76\u7531 IC1 \u6355\u83b7\uff08\u6b64\u65f6\u662f0\uff0c\u4f46\u4e0b\u4e2a\u5468\u671f\u5c31\u662f\u5468\u671f\u503c\uff09\uff0c\u4e0b\u964d\u6cbf\u7531 IC2 \u6355\u83b7\uff08\u6b64\u65f6\u662f\u8109\u5bbd\u503c\uff09\u3002</p> </li> </ul> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_6","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>// \u542f\u52a8 PWM \u8f93\u5165\u6355\u83b7\uff08\u9700\u8981\u540c\u65f6\u542f\u52a8\u4e24\u4e2a\u901a\u9053\uff09\nHAL_TIM_IC_Start_IT(&amp;htim2, TIM_CHANNEL_1);\nHAL_TIM_IC_Start_IT(&amp;htim2, TIM_CHANNEL_2);\n\n// \u5728\u56de\u8c03\u4e2d\u8bfb\u53d6\nuint32_t IC1_Value = HAL_TIM_ReadCapturedValue(&amp;htim2, TIM_CHANNEL_1); // \u5468\u671f (Frequency)\nuint32_t IC2_Value = HAL_TIM_ReadCapturedValue(&amp;htim2, TIM_CHANNEL_2); // \u8109\u5bbd (Duty)\nif (IC1_Value != 0) {\n    float duty = (float)IC2_Value / IC1_Value * 100;\n}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#7-encoder-mode","title":"7. \u7f16\u7801\u5668\u6a21\u5f0f (Encoder Mode)","text":"<p>\u7528\u4e8e\u8bfb\u53d6\u65cb\u8f6c\u7f16\u7801\u5668\uff08AB\u76f8\uff09\u7684\u4fe1\u53f7\uff0c\u81ea\u52a8\u5904\u7406\u6b63\u53cd\u8f6c\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#cubemx_6","title":"CubeMX \u914d\u7f6e\u7ec6\u8282","text":"<ol> <li> <p>Mode:</p> <ul> <li>Combined Channels: <code>Encoder Mode</code>\u3002</li> </ul> </li> <li> <p>Configuration -&gt; Parameter Settings:</p> <ul> <li> <p>Encoder Mode:</p> <ul> <li> <p><code>Encoder Mode TI1 and TI2</code>: 4\u500d\u9891\u6a21\u5f0f (\u7cbe\u5ea6\u6700\u9ad8\uff0c\u4e0a\u4e0b\u6cbf\u90fd\u8ba1\u6570)\u3002</p> </li> <li> <p><code>Encoder Mode TI1</code>: 2\u500d\u9891\u3002</p> </li> </ul> </li> <li> <p>Counter Period (ARR): \u901a\u5e38\u8bbe\u4e3a\u6700\u5927 <code>65535</code> (16bit) \u6216 <code>4294967295</code> (32bit)\uff0c\u9632\u6b62\u8fc7\u5feb\u6ea2\u51fa\u3002</p> </li> <li> <p>Input Filter: \u5efa\u8bae\u8bbe\u4e3a <code>10</code> \u6216\u66f4\u9ad8\uff0c\u9632\u6b62\u673a\u68b0\u6296\u52a8\u8bef\u5224\u3002</p> </li> </ul> </li> <li> <p>NVIC: \u901a\u5e38\u4e0d\u9700\u8981\u5f00\u542f\u4e2d\u65ad\uff0c\u9664\u975e\u4f60\u8981\u8ba1\u7b97\u591a\u5708\u7edd\u5bf9\u4f4d\u7f6e\uff08\u5904\u7406\u6ea2\u51fa\uff09\u3002</p> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_7","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<ul> <li> <p>\u542f\u52a8:</p> <p><code>c HAL_TIM_Encoder_Start(&amp;htim3, TIM_CHANNEL_ALL);</code></p> </li> <li> <p>\u8bfb\u53d6\u6570\u636e (\u8f6e\u8be2):</p> <p>```c // int16_t \u5f3a\u8f6c\u662f\u4e3a\u4e86\u5904\u7406\u53cd\u8f6c\u65f6\u7684\u8d1f\u6570\uff08\u8865\u7801\uff09 int16_t speed = (int16_t)__HAL_TIM_GET_COUNTER(&amp;htim3); </p> <p>// \u8bfb\u53d6\u540e\u901a\u5e38\u9700\u8981\u6e05\u96f6 CNT \u4ee5\u6d4b\u91cf\u901f\u5ea6\uff08\u5355\u4f4d\u65f6\u95f4\u5185\u7684\u8109\u51b2\u6570\uff09 __HAL_TIM_SET_COUNTER(&amp;htim3, 0);</p> <p>// \u5982\u679c\u662f\u6d4b\u7edd\u5bf9\u4f4d\u7f6e\uff0c\u5219\u4e0d\u6e05\u96f6\uff0c\u9700\u5904\u7406\u6ea2\u51fa\u903b\u8f91 ```</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#8-trigger-source","title":"8. \u89e6\u53d1\u6e90 (Trigger Source) \u4e0e\u4e3b\u4ece\u6a21\u5f0f","text":"<p>\u8fd9\u662f STM32 \u5b9a\u65f6\u5668\u7684\u7075\u9b42\u529f\u80fd\uff0c\u5141\u8bb8\u786c\u4ef6\u81ea\u52a8\u540c\u6b65\uff0c\u65e0\u9700 CPU \u5e72\u9884\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_8","title":"\u57fa\u672c\u6982\u5ff5","text":"<ul> <li> <p>ITR (Internal Trigger): \u5185\u90e8\u89e6\u53d1\uff0c\u5b9a\u65f6\u5668\u7ea7\u8054\uff08\u5982 TIM1 \u6ea2\u51fa\u89e6\u53d1 TIM2 \u542f\u52a8\uff09\u3002</p> </li> <li> <p>ETR (External Trigger): \u5916\u90e8\u5f15\u811a\u89e6\u53d1\u3002</p> </li> <li> <p>TIxFPx: \u8f93\u5165\u6355\u83b7\u5f15\u811a\u4fe1\u53f7\u4f5c\u4e3a\u89e6\u53d1\u6e90\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#tim1-tim2","title":"\u5e38\u89c1\u5e94\u7528\u573a\u666f\uff1aTIM1 \u4e3b\u63a7 TIM2 (\u7ea7\u8054)","text":"<ul> <li> <p>Master (TIM1) \u914d\u7f6e:</p> <ul> <li>Trigger Output (TRGO): <code>Update Event</code> (\u5f53 TIM1 \u53d1\u751f\u66f4\u65b0/\u6ea2\u51fa\u65f6\u53d1\u9001\u4fe1\u53f7)\u3002</li> </ul> </li> <li> <p>Slave (TIM2) \u914d\u7f6e:</p> <ul> <li> <p>Slave Mode: <code>External Clock Mode 1</code> (\u5916\u90e8\u65f6\u949f\u6a21\u5f0f\uff0c\u5373 TIM2 \u8ba1\u6570\u5668\u7684\u9a71\u52a8\u4e0d\u662f\u5185\u90e8\u6676\u632f\uff0c\u800c\u662f TIM1 \u7684\u6ea2\u51fa\u8109\u51b2)\u3002</p> </li> <li> <p>Trigger Source: <code>ITR0</code> (\u67e5\u9605\u624b\u518c\uff0cITR0 \u5bf9\u5e94 TIM1)\u3002</p> </li> </ul> </li> <li> <p>NVIC: \u90fd\u4e0d\u9700\u8981\u5f00\u4e2d\u65ad\uff0c\u786c\u4ef6\u5168\u81ea\u52a8\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#gated-mode","title":"\u5e38\u89c1\u5e94\u7528\u573a\u666f\uff1a\u5916\u90e8\u5f15\u811a\u63a7\u5236\u542f\u505c (Gated Mode)","text":"<ul> <li> <p>Slave (TIMx) \u914d\u7f6e:</p> <ul> <li> <p>Slave Mode: <code>Gated Mode</code>\u3002</p> </li> <li> <p>Trigger Source: <code>TI1FP1</code> (CH1 \u5f15\u811a)\u3002</p> </li> <li> <p>\u6548\u679c: \u5f53 CH1 \u4e3a\u9ad8\u7535\u5e73\u65f6\uff0c\u5b9a\u65f6\u5668\u8ba1\u6570\uff1b\u4f4e\u7535\u5e73\u65f6\uff0c\u5b9a\u65f6\u5668\u6682\u505c\u3002</p> </li> </ul> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#_9","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u5927\u90e8\u5206\u914d\u7f6e\u5728 MX_TIMx_Init \u4e2d\u81ea\u52a8\u751f\u6210 (HAL_TIM_SlaveConfigSynchro)\u3002</p> <p>\u7528\u6237\u53ea\u9700\u542f\u52a8\u5b9a\u65f6\u5668\uff1a</p> <pre><code>HAL_TIM_Base_Start(&amp;htim1); // \u542f\u52a8\u4e3b\u5b9a\u65f6\u5668\nHAL_TIM_Base_Start(&amp;htim2); // \u542f\u52a8\u4ece\u5b9a\u65f6\u5668\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#9-cubemx","title":"9. \u4f7f\u7528\u4e86 CubeMX \u540e\u4f60\u4e0d\u7528\u5173\u5fc3\u7684\u7ec6\u8282","text":"<ol> <li> <p>\u65f6\u949f\u4f7f\u80fd (__HAL_RCC_TIMx_CLK_ENABLE):</p> <p>CubeMX \u81ea\u52a8\u5728 stm32fxxx_hal_msp.c \u7684 HAL_TIM_Base_MspInit \u4e2d\u751f\u6210\u3002</p> </li> <li> <p>GPIO \u590d\u7528\u6620\u5c04 (AF):</p> <p>CubeMX \u81ea\u52a8\u914d\u7f6e GPIO \u7684 Alternate Function \u5bc4\u5b58\u5668\uff08\u5982\u5c06 PA6 \u590d\u7528\u4e3a TIM3_CH1\uff09\u3002</p> </li> <li> <p>\u4e2d\u65ad\u6e05\u9664:</p> <p>HAL \u5e93\u7684\u901a\u7528\u4e2d\u65ad\u5904\u7406\u51fd\u6570 HAL_TIM_IRQHandler \u4f1a\u81ea\u52a8\u8bfb\u53d6\u5e76\u6e05\u9664 SR \u5bc4\u5b58\u5668\u7684\u6807\u5fd7\u4f4d\uff0c\u7136\u540e\u624d\u8c03\u7528\u4f60\u7684 Callback\u3002\u4e0d\u8981\u5728 Callback \u91cc\u624b\u52a8\u6e05\u9664\u6807\u5fd7\u4f4d\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u903b\u8f91\u9519\u8bef\u3002</p> </li> <li> <p>\u7ed3\u6784\u4f53\u521d\u59cb\u5316:</p> <p>TIM_HandleTypeDef\u3001TIM_OC_InitTypeDef \u7b49\u7e41\u7410\u7684\u7ed3\u6784\u4f53\u8d4b\u503c\u5168\u90e8\u81ea\u52a8\u5316\u3002</p> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E5%AE%9A%E6%97%B6%E5%99%A8/#10-api","title":"10. \u5e38\u7528 API \u901f\u67e5\u8868","text":"\u529f\u80fd API \u5907\u6ce8 \u542f\u52a8/\u505c\u6b62 (\u65e0\u4e2d\u65ad) <code>HAL_TIM_Base_Start</code>, <code>HAL_TIM_Base_Stop</code> \u57fa\u672c\u8ba1\u6570 \u542f\u52a8/\u505c\u6b62 (\u5e26\u4e2d\u65ad) <code>HAL_TIM_Base_Start_IT</code>, <code>HAL_TIM_Base_Stop_IT</code> \u5468\u671f\u4efb\u52a1 PWM \u64cd\u4f5c <code>HAL_TIM_PWM_Start</code>, <code>__HAL_TIM_SET_COMPARE</code> \u8c03\u901f/\u8c03\u5149 \u8f93\u5165\u6355\u83b7 <code>HAL_TIM_IC_Start_IT</code>, <code>HAL_TIM_ReadCapturedValue</code> \u6d4b\u9891/\u6d4b\u5bbd \u7f16\u7801\u5668 <code>HAL_TIM_Encoder_Start</code>, <code>__HAL_TIM_GET_COUNTER</code> \u6d4b\u901f/\u4f4d\u7f6e \u8bbe\u7f6e CNT <code>__HAL_TIM_SET_COUNTER(&amp;htimx, value)</code> \u4fee\u6b63\u8ba1\u6570\u503c \u8bbe\u7f6e ARR <code>__HAL_TIM_SET_AUTORELOAD(&amp;htimx, value)</code> \u52a8\u6001\u6539\u5468\u671f # 11. RCC\u65f6\u949f\u6811"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/STM32%20HAL%E5%BA%93/%E7%A1%AC%E4%BB%B6%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/","title":"\u786c\u4ef6\u901a\u4fe1\u534f\u8bae","text":"<p>\u534f\u8bae\u8be6\u60c5\uff1a../\u901a\u4fe1\u534f\u8bae/\u901a\u4fe1\u534f\u8bae|\u901a\u4fe1\u534f\u8bae</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/","title":"B \u6307\u4ee4","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>B\u6307\u4ee4\u7528\u4e8e\u65e0\u6761\u4ef6\u8df3\u8f6c\u5230\u6307\u5b9a\u7684\u6807\u7b7e\u6216\u5730\u5740\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_2","title":"\u8bed\u6cd5\u683c\u5f0f","text":"<pre><code>B   \u76ee\u6807\u5730\u5740/\u6807\u7b7e\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_3","title":"\u793a\u4f8b","text":"<pre><code>B   loop_start      @ \u65e0\u6761\u4ef6\u8df3\u8f6c\u5230loop_start\u6807\u7b7e\nB   0x08001000      @ \u65e0\u6761\u4ef6\u8df3\u8f6c\u5230\u5730\u57400x08001000\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_4","title":"\u7279\u70b9","text":"<ul> <li>\u4e0d\u4fdd\u5b58\u8fd4\u56de\u5730\u5740</li> <li>\u7528\u4e8e\u5faa\u73af\u3001\u6761\u4ef6\u5206\u652f\u7b49</li> <li>\u8df3\u8f6c\u8303\u56f4\u6709\u9650\u5236\uff08\u76f8\u5bf9\u504f\u79fb\uff09</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#bx","title":"BX \u6307\u4ee4\uff08\u5e26\u72b6\u6001\u5207\u6362\u7684\u8df3\u8f6c\uff09","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_5","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>BX\u6307\u4ee4\u7528\u4e8e\u8df3\u8f6c\u5230\u5bc4\u5b58\u5668\u6307\u5b9a\u7684\u5730\u5740\uff0c\u5e76\u53ef\u5207\u6362ARM/Thumb\u72b6\u6001\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_6","title":"\u8bed\u6cd5\u683c\u5f0f","text":"<pre><code>BX  \u76ee\u6807\u5bc4\u5b58\u5668\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_7","title":"\u793a\u4f8b","text":"<pre><code>BX  LR              @ \u8df3\u8f6c\u5230LR\u5bc4\u5b58\u5668\u5730\u5740\uff0c\u7528\u4e8e\u51fd\u6570\u8fd4\u56de\nBX  R0              @ \u8df3\u8f6c\u5230R0\u5bc4\u5b58\u5668\u6307\u5b9a\u7684\u5730\u5740\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_8","title":"\u7279\u70b9","text":"<ul> <li>\u6839\u636e\u76ee\u6807\u5730\u5740\u6700\u4f4e\u4f4d\u81ea\u52a8\u5207\u6362\u72b6\u6001\uff0c\u4e0d\u540c\u72b6\u6001\u6027\u80fd\u5f00\u9500\u4e0d\u4e00\u6837</li> <li>\u6700\u4f4e\u4f4d=0\uff1a\u5207\u6362\u5230ARM\uff0832\u4f4d\u6307\u4ee4\uff09\u72b6\u6001</li> <li>\u6700\u4f4e\u4f4d=1\uff1a\u5207\u6362\u5230Thumb\uff0816\u4f4d\u6307\u4ee4\uff09\u72b6\u6001</li> <li>\u5e38\u7528\u4e8e\u51fd\u6570\u8fd4\u56de</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_9","title":"\u5173\u952e\u533a\u522b","text":"\u7279\u6027 B \u6307\u4ee4 BX \u6307\u4ee4 \u64cd\u4f5c\u6570 \u7acb\u5373\u6570/\u6807\u7b7e \u5bc4\u5b58\u5668 \u72b6\u6001\u5207\u6362 \u65e0 \u6839\u636e\u5730\u5740\u6700\u4f4e\u4f4d\u81ea\u52a8\u5207\u6362 \u4e3b\u8981\u7528\u9014 \u5faa\u73af\u3001\u6761\u4ef6\u8df3\u8f6c \u51fd\u6570\u8fd4\u56de\u3001\u52a8\u6001\u8df3\u8f6c \u8fd4\u56de\u5730\u5740 \u4e0d\u4fdd\u5b58 \u901a\u5e38\u4e0eBL\u914d\u5408\u4f7f\u7528"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_10","title":"\u5b9e\u9645\u5e94\u7528\u573a\u666f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#b-","title":"B \u6307\u4ee4 - \u5faa\u73af\u548c\u6761\u4ef6\u5224\u65ad","text":"<pre><code>loop:\n    @ \u5faa\u73af\u4f53\u4ee3\u7801\n    SUBS R0, R0, #1      @ \u8ba1\u6570\u5668\u51cf1\u5e76\u8bbe\u7f6e\u6807\u5fd7\n    BNE  loop            @ \u5982\u679c\u4e0d\u4e3a0\u5219\u7ee7\u7eed\u5faa\u73af\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#bx-","title":"BX \u6307\u4ee4 - \u51fd\u6570\u8fd4\u56de","text":"<pre><code>my_function:\n    PUSH {R4, LR}        @ \u4fdd\u5b58\u5bc4\u5b58\u5668\n    @ \u51fd\u6570\u4f53\u4ee3\u7801...\n    POP {R4, LR}         @ \u6062\u590d\u5bc4\u5b58\u5668\n    BX  LR               @ \u8fd4\u56de\u5230\u8c03\u7528\u8005\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#bl-bx-","title":"BL + BX \u7ec4\u5408 - \u5b8c\u6574\u7684\u51fd\u6570\u8c03\u7528","text":"<pre><code>main:\n    BL   my_function     @ \u8c03\u7528\u51fd\u6570\uff0cLR\u81ea\u52a8\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\n    @ ... \u7ee7\u7eed\u6267\u884c ...\n\nmy_function:\n    @ \u51fd\u6570\u4f53...\n    BX   LR              @ \u8fd4\u56de\u5230main\u51fd\u6570\u7684\u8c03\u7528\u70b9\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_11","title":"\u72b6\u6001\u5207\u6362\u673a\u5236","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#thumb","title":"Thumb\u72b6\u6001\u8bc6\u522b","text":"<pre><code>@ \u5047\u8bbe\u8981\u8df3\u8f6c\u5230Thumb\u4ee3\u7801\uff08\u5730\u5740\u6700\u4f4e\u4f4d=1\uff09\nLDR  R0, =thumb_code+1   @ \u5730\u5740\u52a01\u8868\u793aThumb\u72b6\u6001\nBX   R0                  @ \u8df3\u8f6c\u5e76\u5207\u6362\u5230Thumb\u72b6\u6001\n\nthumb_code:\n    .thumb               @ Thumb\u6307\u4ee4\u96c6\u4ee3\u7801\n    @ ...\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/B%E5%92%8CBX%E6%8C%87%E4%BB%A4/#_12","title":"\u91cd\u8981\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>BX LR \u662f\u51fd\u6570\u8fd4\u56de\u7684\u6807\u51c6\u65b9\u5f0f</li> <li>B \u6307\u4ee4\u7528\u4e8e\u76f8\u5bf9\u8df3\u8f6c\uff0c\u8303\u56f4\u53d7\u9650</li> <li>BX \u53ef\u4ee5\u8df3\u8f6c\u5230\u4efb\u610f\u5bc4\u5b58\u5668\u6307\u5b9a\u7684\u5730\u5740</li> <li>\u72b6\u6001\u5207\u6362\u7531\u786c\u4ef6\u81ea\u52a8\u5904\u7406\uff0c\u5bf9\u7a0b\u5e8f\u5458\u900f\u660e</li> </ol> <p>\u8fd9\u4e24\u79cd\u8df3\u8f6c\u6307\u4ee4\u5171\u540c\u6784\u6210\u4e86ARM\u67b6\u6784\u4e2d\u6d41\u7a0b\u63a7\u5236\u7684\u57fa\u7840\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/","title":"POP\u57fa\u672c\u6982\u5ff5","text":"<p>POP\u6307\u4ee4\u7528\u4e8e\u4ece\u6808\u4e2d\u6062\u590d\u6570\u636e\u5230\u5bc4\u5b58\u5668\uff0c\u662fPUSH\u7684\u9006\u64cd\u4f5c\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_1","title":"\u8bed\u6cd5\u683c\u5f0f","text":"<pre><code>POP {\u5bc4\u5b58\u5668\u5217\u8868}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_2","title":"\u5de5\u4f5c\u539f\u7406","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_3","title":"\u6267\u884c\u8fc7\u7a0b","text":"<pre><code>POP {R0, R1, PC}\n</code></pre> <p>\u6267\u884c\u6b65\u9aa4\uff1a 1. \u4ece\u5f53\u524dSP\u5730\u5740\u52a0\u8f7d\u6570\u636e\u5230\u7b2c\u4e00\u4e2a\u5bc4\u5b58\u5668 2. SP = SP + 4 3. \u4ece\u65b0SP\u5730\u5740\u52a0\u8f7d\u6570\u636e\u5230\u4e0b\u4e00\u4e2a\u5bc4\u5b58\u5668 4. SP = SP + 4 5. \u91cd\u590d\u76f4\u5230\u6240\u6709\u5bc4\u5b58\u5668\u6062\u590d</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_4","title":"\u5177\u4f53\u793a\u4f8b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_5","title":"\u57fa\u7840\u7528\u6cd5","text":"<pre><code>0x08002F44  BD03    ..    POP     {R0, R1, PC}\n</code></pre> <p>\u6267\u884c\u524d\uff1a</p> <pre><code>SP = 0x20000FF4\n\u6808\u5185\u5bb9\uff1a\n0x20000FF4: R0\u7684\u539f\u59cb\u503c\n0x20000FF8: R1\u7684\u539f\u59cb\u503c  \n0x20000FFC: LR\u7684\u539f\u59cb\u503c\n</code></pre> <p>\u6267\u884c\u540e\uff1a</p> <pre><code>SP = 0x20001000  (SP\u589e\u52a012\u5b57\u8282)\nR0, R1\u6062\u590d\u539f\u503c\nPC = LR\u7684\u539f\u59cb\u503c\uff08\u5b9e\u73b0\u51fd\u6570\u8fd4\u56de\uff09\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_6","title":"\u51fd\u6570\u8fd4\u56de\u5178\u578b\u7528\u6cd5","text":"<pre><code>POP {R4, R5, PC}    ; \u6062\u590d\u5bc4\u5b58\u5668\u5e76\u7528PC\u66ff\u4ee3LR\u5b9e\u73b0\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#push","title":"\u4e0ePUSH\u7684\u914d\u5bf9\u4f7f\u7528","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_7","title":"\u6b63\u786e\u7684\u914d\u5bf9","text":"<pre><code>; \u51fd\u6570\u5f00\u59cb\nPUSH {R4, R5, LR}   ; \u4fdd\u5b58\u5bc4\u5b58\u5668\n\n; \u51fd\u6570\u4f53...\n\n; \u51fd\u6570\u7ed3\u675f  \nPOP {R4, R5, PC}    ; \u6062\u590d\u5bc4\u5b58\u5668\u5e76\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_8","title":"\u6808\u5e73\u8861","text":"<ul> <li>PUSH\u548cPOP\u5fc5\u987b\u6210\u5bf9\u51fa\u73b0</li> <li>\u64cd\u4f5c\u5bc4\u5b58\u5668\u6570\u91cf\u5fc5\u987b\u5339\u914d</li> <li>\u5426\u5219\u4f1a\u5bfc\u81f4\u6808\u6307\u9488\u9519\u4e71</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_9","title":"\u7279\u6b8a\u7528\u6cd5","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_10","title":"\u51fd\u6570\u8fd4\u56de\u6280\u5de7","text":"<pre><code>POP {PC}            ; \u76f4\u63a5\u8fd4\u56de\u5230\u8c03\u7528\u8005\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_11","title":"\u6062\u590d\u90e8\u5206\u5bc4\u5b58\u5668","text":"<pre><code>POP {R4-R6}         ; \u53ea\u6062\u590d\u90e8\u5206\u5bc4\u5b58\u5668\nADD SP, SP, #4      ; \u624b\u52a8\u8c03\u6574SP\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/POP%E6%8C%87%E4%BB%A4/#_12","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u6808\u5e73\u8861\uff1a\u5fc5\u987b\u4e0ePUSH\u914d\u5bf9\u4f7f\u7528</li> <li>\u5bc4\u5b58\u5668\u987a\u5e8f\uff1a\u6c47\u7f16\u5668\u4f1a\u81ea\u52a8\u6392\u5e8f</li> <li>\u8fd4\u56de\u5730\u5740\uff1a\u901a\u5e38\u7528PC\u66ff\u4ee3LR\u5b9e\u73b0\u8fd4\u56de</li> <li>\u6808\u5bf9\u9f50\uff1a\u5fc5\u987b\u4fdd\u6301\u6808\u6307\u9488\u5bf9\u9f50</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/","title":"PUSH\u6307\u4ee4","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#push","title":"\u4ec0\u4e48\u662f PUSH\uff1f","text":"<p>PUSH \u6307\u4ee4\u7528\u4e8e\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u6808\u5185\u5b58\u4e2d\u3002\u6808\u662f\u4e00\u79cd\"\u540e\u8fdb\u5148\u51fa\"\uff08LIFO\uff09\u7684\u5185\u5b58\u533a\u57df\uff0c\u4e3b\u8981\u7528\u4e8e\u51fd\u6570\u8c03\u7528\u65f6\u4fdd\u5b58\u73b0\u573a\uff0c\u540c\u65f6\u4e5f\u53ef\u80fd\u662f\u8981\u5f00\u8f9f\u7a7a\u95f4\u7ed9\u540e\u9762\u7528\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_1","title":"\u4f5c\u7528","text":"<ul> <li>\u4fdd\u5b58\u4e0a\u5c42\u51fd\u6570\u73b0\u573a\uff0c\u672c\u5c42\u51fd\u6570\u6267\u884c\u5b8c\u540e\u6062\u590d</li> <li>\u5f00\u8f9f\u7a7a\u95f4\u7ed9\u540e\u9762\u7528</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_2","title":"\u57fa\u672c\u8bed\u6cd5","text":"<pre><code>PUSH {\u5bc4\u5b58\u5668\u5217\u8868}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_3","title":"\u5de5\u4f5c\u539f\u7406","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_4","title":"\u6808\u7684\u751f\u957f\u65b9\u5411","text":"<p>\u5728ARM\u67b6\u6784\u4e2d\uff0c\u6808\u901a\u5e38\u662f\u5411\u4e0b\u751f\u957f\u7684\uff1a - \u6808\u6307\u9488\uff08SP\uff09 \u6307\u5411\u6808\u9876 - PUSH\u65f6\uff0cSP\u51cf\u5c0f\uff0c\u6570\u636e\u5b58\u5165\u6808\u4e2d - POP\u65f6\uff0cSP\u589e\u52a0\uff0c\u6570\u636e\u4ece\u6808\u4e2d\u6062\u590d</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_5","title":"\u6267\u884c\u8fc7\u7a0b","text":"<pre><code>PUSH {R0, R1, LR}\n</code></pre> <p>\u5b9e\u9645\u6267\u884c\u6b65\u9aa4\uff1a         1. SP = SP - 12\uff08\u4e3a3\u4e2a\u5bc4\u5b58\u5668\u5206\u914d\u7a7a\u95f4\uff0c\u6bcf\u4e2a4\u5b57\u8282\uff0c\u56e0\u4e3aARM\u67b6\u6784\u4e3a32\u4f4d\uff09 1. \u5c06LR\u5b58\u5165 <code>[SP+8]</code> 2. \u5c06R1\u5b58\u5165 <code>[SP+4]</code>  3. \u5c06R0\u5b58\u5165 <code>[SP+0]</code></p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_6","title":"\u793a\u4f8b\u5206\u6790","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#1","title":"\u793a\u4f8b1\uff1a\u57fa\u672c\u7528\u6cd5","text":"<pre><code>0x08002F34  B503    ..    PUSH    {R0, R1, LR}\n</code></pre> <p>\u6267\u884c\u524d\uff1a</p> <pre><code>SP = 0x20001000\n\u6808\u5185\u5b58\uff1a\u672a\u77e5\n</code></pre> <p>\u6267\u884c\u540e\uff1a</p> <pre><code>SP = 0x20000FF4  (SP\u51cf\u5c11\u4e8612\u5b57\u8282)\n\u6808\u5185\u5b58\uff1a\n0x20000FF4: R0\u7684\u503c\n0x20000FF8: R1\u7684\u503c  \n0x20000FFC: LR\u7684\u503c\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#2","title":"\u793a\u4f8b2\uff1a\u51fd\u6570\u5f00\u5934\u7684\u5178\u578b\u7528\u6cd5","text":"<pre><code>0x08002F00  B570    p.    PUSH    {R4-R6, LR}\n</code></pre> <ul> <li>\u4fdd\u5b58R4\u3001R5\u3001R6\u548cLR\u56db\u4e2a\u5bc4\u5b58\u5668</li> <li>\u4e3a\u6bcf\u4e2a\u5bc4\u5b58\u5668\u5206\u914d4\u5b57\u8282\uff0c\u517116\u5b57\u8282\u6808\u7a7a\u95f4</li> <li>SP\u51cf\u5c1116</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#3","title":"\u793a\u4f8b3\uff1a\u4fdd\u5b58\u591a\u4e2a\u5bc4\u5b58\u5668","text":"<pre><code>0x08002F10  E92D4FF0  -O..    PUSH    {R4-R11, LR}\n</code></pre> <ul> <li>\u4fdd\u5b58R4\u5230R11\u51718\u4e2a\u5bc4\u5b58\u5668\uff0c\u52a0\u4e0aLR\u51719\u4e2a</li> <li>\u5206\u914d36\u5b57\u8282\u6808\u7a7a\u95f4\uff089\u00d74\uff09</li> <li>SP\u51cf\u5c1136</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#push_1","title":"PUSH \u7684\u4f5c\u7528","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#1_1","title":"1. \u51fd\u6570\u8c03\u7528\u4fdd\u5b58\u73b0\u573a","text":"<pre><code>my_function:\n    PUSH    {R4-R6, LR}    ; \u4fdd\u5b58\u8981\u7528\u5230\u7684\u5bc4\u5b58\u5668\u548c\u8fd4\u56de\u5730\u5740\n    ; ... \u51fd\u6570\u4f53 ...\n    POP     {R4-R6, PC}    ; \u6062\u590d\u5bc4\u5b58\u5668\u5e76\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#2_1","title":"2. \u4e34\u65f6\u4fdd\u5b58\u5bc4\u5b58\u5668\u503c","text":"<p>\u5f53\u5bc4\u5b58\u5668\u4e0d\u591f\u7528\u65f6\uff0c\u628a\u4e0d\u5e38\u7528\u7684\u5bc4\u5b58\u5668\u6682\u65f6\u4fdd\u5b58\u5230\u6808\u4e0a\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#3_1","title":"3. \u4e2d\u65ad\u5904\u7406","text":"<p>\u53d1\u751f\u4e2d\u65ad\u65f6\uff0c\u81ea\u52a8\u4fdd\u5b58\u5173\u952e\u5bc4\u5b58\u5668\u5230\u6808\u4e2d\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#pop","title":"\u4e0e POP \u6307\u4ee4\u914d\u5bf9\u4f7f\u7528","text":"<p>PUSH \u548c POP \u5fc5\u987b\u6210\u5bf9\u4f7f\u7528\uff0c\u786e\u4fdd\u6808\u5e73\u8861\uff1a</p> <pre><code>; \u6b63\u786e\u7684\u7528\u6cd5\nPUSH    {R0, R1, LR}    ; \u8fdb\u5165\u65f6\u4fdd\u5b58\n; ... \u4e00\u4e9b\u64cd\u4f5c ...\nPOP     {R0, R1, PC}    ; \u9000\u51fa\u65f6\u6062\u590d\uff0c\u7528PC\u66ff\u4ee3LR\u5b9e\u73b0\u8fd4\u56de\n\n; \u9519\u8bef\u7684\u7528\u6cd5\u4f1a\u5bfc\u81f4\u6808\u5d29\u6e83\uff01\nPUSH    {R0, R1, LR}\n; ... \u5fd8\u8bb0POP ...\n; \u7ed3\u679c\uff1a\u6808\u6307\u9488\u9519\u4e71\uff0c\u7a0b\u5e8f\u5d29\u6e83\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_7","title":"\u4ee3\u7801\u793a\u4f8b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_8","title":"\u5b8c\u6574\u7684\u51fd\u6570\u6a21\u677f","text":"<pre><code>my_function:\n    PUSH    {R4, R5, LR}       ; 1. \u4fdd\u5b58\u5bc4\u5b58\u5668\n    SUB     SP, SP, #8         ; 2. \u4e3a\u5c40\u90e8\u53d8\u91cf\u5206\u914d\u7a7a\u95f4\n\n    ; \u51fd\u6570\u4f53\u4ee3\u7801\n    MOV     R4, R0             ; \u4f7f\u7528\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\n    MOV     R5, #100\n    ADD     R0, R4, R5\n\n    ADD     SP, SP, #8         ; 3. \u91ca\u653e\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4\n    POP     {R4, R5, PC}       ; 4. \u6062\u590d\u5bc4\u5b58\u5668\u5e76\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_9","title":"\u91cd\u8981\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u6808\u5bf9\u9f50\uff1aSP\u5fc5\u987b\u4fdd\u63014\u5b57\u8282\u62168\u5b57\u8282\u5bf9\u9f50</li> <li>\u5bc4\u5b58\u5668\u987a\u5e8f\uff1aPUSH/POP\u7684\u5bc4\u5b58\u5668\u5217\u8868\u4f1a\u81ea\u52a8\u6309\u7f16\u53f7\u6392\u5e8f</li> <li>LR\u5904\u7406\uff1aPUSH\u4fdd\u5b58LR\uff0cPOP\u65f6\u901a\u5e38\u7528PC\u6765\u540c\u65f6\u6062\u590d\u548c\u8fd4\u56de</li> <li>\u6808\u5e73\u8861\uff1aPUSH\u548cPOP\u5fc5\u987b\u6570\u91cf\u5339\u914d\uff0c\u5426\u5219\u6808\u4f1a\u635f\u574f</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/PUSH%E6%8C%87%E4%BB%A4/#_10","title":"\u603b\u7ed3","text":"<p>PUSH \u662fARM\u6c47\u7f16\u4e2d\u6700\u91cd\u8981\u7684\u6307\u4ee4\u4e4b\u4e00\uff0c\u5b83\uff1a - \u4fdd\u5b58\u5bc4\u5b58\u5668\u5230\u6808\u5185\u5b58 - \u4e3a\u51fd\u6570\u8c03\u7528\u5efa\u7acb\u5de5\u4f5c\u73af\u5883 - \u4fdd\u62a4\u73b0\u573a\u4e0d\u88ab\u7834\u574f - \u5fc5\u987b\u4e0ePOP\u914d\u5bf9\u4f7f\u7528</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","title":"\u5185\u5b58\u5e03\u5c40","text":"<p>\u4e00\u4e2a\u5178\u578b\u7684C\u7a0b\u5e8f\u5728\u5185\u5b58\u4e2d\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u533a\u57df\uff1a</p> <ol> <li> <p>\u4ee3\u7801\u533a\uff08Text Segment\uff09</p> <ul> <li>\u5b58\u653e\u7a0b\u5e8f\u7684\u673a\u5668\u6307\u4ee4\uff0c\u662f\u53ea\u8bfb\u7684\u3002</li> </ul> </li> <li> <p>\u9759\u6001\u5b58\u50a8\u533a\uff08Static Storage\uff09</p> <ul> <li> <p>\u6570\u636e\u6bb5\uff08Data Segment\uff09\uff1a\u5b58\u653e\u5df2\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u5c40\u90e8\u53d8\u91cf\uff08\u7528<code>static</code>\u5173\u952e\u5b57\u4fee\u9970\uff09\u3002</p> </li> <li> <p>BSS\u6bb5\uff08BSS Segment\uff09\uff1a\u5b58\u653e\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u5c40\u90e8\u53d8\u91cf\u3002\u5728\u7a0b\u5e8f\u5f00\u59cb\u6267\u884c\u524d\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u8fd9\u4e2a\u533a\u57df\u7684\u6570\u636e\u521d\u59cb\u5316\u4e3a0\u6216NULL\u3002</p> </li> </ul> </li> <li> <p>\u5806\u533a\uff08Heap\uff09</p> <ul> <li>\u7528\u4e8e\u52a8\u6001\u5185\u5b58\u5206\u914d\uff0c\u6bd4\u5982<code>malloc</code>,\u00a0<code>calloc</code>,\u00a0<code>realloc</code>\u7533\u8bf7\u7684\u5185\u5b58\u5c31\u5728\u5806\u4e0a\u3002</li> </ul> </li> <li> <p>\u6808\u533a\uff08Stack\uff09</p> <ul> <li>\u7528\u4e8e\u5b58\u653e\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u53c2\u6570\u3001\u8fd4\u56de\u5730\u5740\u7b49\u3002\u5b83\u7684\u7ba1\u7406\u662f\u81ea\u52a8\u7684\uff0c\u7531\u7f16\u8bd1\u5668\u5b8c\u6210\u3002</li> </ul> </li> <li> <p>[[\u5806]]</p> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#_2","title":"\u5806\u7ba1\u7406","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/#_3","title":"\u6808\u7ba1\u7406","text":"<ul> <li>[[\u6808]]</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/","title":"\u5806\u7684\u6982\u5ff5","text":"<p>\u5806\u662f\u7a0b\u5e8f\u8fd0\u884c\u65f6\u52a8\u6001\u7533\u8bf7\u5185\u5b58\u7684\u5730\u65b9\uff0c\u5c31\u50cf\u4e00\u4e2a\u5927\u4ed3\u5e93\uff0c\u53ef\u4ee5\u968f\u65f6\u501f\u5730\u65b9\u5b58\u653e\u6570\u636e\uff0c\u7528\u5b8c\u540e\u9700\u8981\u624b\u52a8\u5f52\u8fd8\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     \u5806\u7a7a\u95f4      \u2502\n\u2502                 \u2502\n\u2502  [\u7a7a\u95f2\u533a\u57df]     \u2502\n\u2502  [\u5df2\u4f7f\u7528\u5757]     \u2502\n\u2502  [\u7a7a\u95f2\u533a\u57df]     \u2502\n\u2502  [\u5df2\u4f7f\u7528\u5757]     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_2","title":"\u5806\u4e0e\u6808\u7684\u533a\u522b","text":"<p>\u5185\u5b58\u5e03\u5c40\u5bf9\u6bd4\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      \u6808         \u2502 \u2190 \u81ea\u52a8\u7ba1\u7406\uff0c\u50cf\u6574\u9f50\u4e66\u67b6\n\u2502  \u540e\u8fdb\u5148\u51fa       \u2502   \u7f16\u8bd1\u5668\u81ea\u52a8\u5206\u914d\u91ca\u653e\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u5806         \u2502 \u2190 \u624b\u52a8\u7ba1\u7406\uff0c\u50cf\u6742\u8d27\u4ed3\u5e93\n\u2502  \u968f\u610f\u5b58\u53d6       \u2502   \u9700\u8981\u81ea\u5df1\u7533\u8bf7\u548c\u91ca\u653e\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u6808\u7684\u7279\u70b9\uff1a - \u81ea\u52a8\u5206\u914d\u548c\u91ca\u653e - \u5927\u5c0f\u56fa\u5b9a - \u8bbf\u95ee\u901f\u5ea6\u5feb</p> <p>\u5806\u7684\u7279\u70b9\uff1a - \u624b\u52a8\u7533\u8bf7\u548c\u91ca\u653e - \u7a7a\u95f4\u7075\u6d3b - \u8bbf\u95ee\u901f\u5ea6\u8f83\u6162</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_3","title":"\u57fa\u672c\u5806\u7ba1\u7406\u673a\u5236","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_4","title":"\u7a7a\u95f2\u5757\u94fe\u8868","text":"<p>\u7cfb\u7edf\u7ef4\u62a4\u4e00\u4e2a\u7a7a\u95f2\u5185\u5b58\u5757\u7684\u94fe\u8868\uff0c\u7533\u8bf7\u5185\u5b58\u65f6\u4ece\u8fd9\u4e2a\u94fe\u8868\u4e2d\u67e5\u627e\u5408\u9002\u7684\u5757\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u7a7a\u95f2\u94fe\u8868\uff1a\u5934 \u2192 [\u5757A:32\u5b57\u8282] \u2192 [\u5757B:16\u5b57\u8282] \u2192 [\u5757C:24\u5b57\u8282] \u2192 NULL\n\n\u5806\u5185\u5b58\uff1a\n[\u5df2\u7528][\u5757A-\u7a7a\u95f2][\u5df2\u7528][\u5757B-\u7a7a\u95f2][\u5df2\u7528][\u5757C-\u7a7a\u95f2]\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_5","title":"\u5806\u5185\u5b58\u5206\u914d\u548c\u91ca\u653e\u7684\u8fc7\u7a0b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_6","title":"\u5185\u5b58\u5206\u914d\u8fc7\u7a0b","text":"<p>\u5f53\u7a0b\u5e8f\u7533\u8bf7\u5185\u5b58\u65f6\uff0c\u5206\u914d\u5668\u5728\u7a7a\u95f2\u94fe\u8868\u4e2d\u5bfb\u627e\u8db3\u591f\u5927\u7684\u5757\u3002</p> <p>\u5206\u914d\u6b65\u9aa4\uff1a 1. \u5728\u7a7a\u95f2\u94fe\u8868\u4e2d\u641c\u7d22\u5408\u9002\u5927\u5c0f\u7684\u5757 2. \u627e\u5230\u540e\uff0c\u4ece\u8be5\u5757\u4e2d\u5206\u5272\u51fa\u9700\u8981\u7684\u5927\u5c0f 3. \u5269\u4f59\u90e8\u5206\u5f62\u6210\u65b0\u7684\u7a7a\u95f2\u5757 4. \u66f4\u65b0\u7a7a\u95f2\u94fe\u8868</p> <p>\u5206\u914d\u793a\u610f\u56fe\uff1a</p> <pre><code>\u521d\u59cb\u72b6\u6001\uff1a\n\u7a7a\u95f2\u94fe\u8868\uff1a[\u5757A:32\u5b57\u8282] \u2192 [\u5757B:16\u5b57\u8282]\n\n\u7533\u8bf720\u5b57\u8282\uff1a\n1. \u627e\u5230\u5757A(32\u5b57\u8282)\n2. \u5206\u5272\uff1a20\u5b57\u8282(\u5df2\u7528) + 12\u5b57\u8282(\u65b0\u7a7a\u95f2\u5757)\n3. \u7ed3\u679c\uff1a[\u5df2\u752820B] [\u7a7a\u95f212B] [\u7a7a\u95f216B]\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_7","title":"\u5185\u5b58\u91ca\u653e\u8fc7\u7a0b","text":"<p>\u5f53\u7a0b\u5e8f\u91ca\u653e\u5185\u5b58\u65f6\uff0c\u9700\u8981\u5c06\u5185\u5b58\u5757\u91cd\u65b0\u52a0\u5165\u7a7a\u95f2\u94fe\u8868\u3002</p> <p>\u91ca\u653e\u6b65\u9aa4\uff1a 1. \u5c06\u91ca\u653e\u7684\u5757\u6807\u8bb0\u4e3a\u7a7a\u95f2 2. \u68c0\u67e5\u76f8\u90bb\u5757\u662f\u5426\u4e5f\u662f\u7a7a\u95f2 3. \u5982\u679c\u76f8\u90bb\u7a7a\u95f2\uff0c\u8fdb\u884c\u5408\u5e76\u64cd\u4f5c 4. \u5c06\u5408\u5e76\u540e\u7684\u5757\u52a0\u5165\u7a7a\u95f2\u94fe\u8868</p> <p>\u91ca\u653e\u793a\u610f\u56fe\uff1a</p> <pre><code>\u521d\u59cb\u72b6\u6001\uff1a\n[\u5df2\u7528A][\u7a7a\u95f2B][\u5df2\u7528C][\u7a7a\u95f2D]\n\n\u91ca\u653e\u5757A\uff1a\n[\u7a7a\u95f2A][\u7a7a\u95f2B][\u5df2\u7528C][\u7a7a\u95f2D]\n\u5408\u5e76A\u548cB\uff1a\n[\u5927\u7a7a\u95f2AB][\u5df2\u7528C][\u7a7a\u95f2D]\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_8","title":"\u5185\u5b58\u788e\u7247\u5316\u7684\u8fc7\u7a0b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_9","title":"\u788e\u7247\u5316\u5982\u4f55\u4ea7\u751f","text":"<p>\u968f\u7740\u591a\u6b21\u5206\u914d\u548c\u91ca\u653e\uff0c\u5185\u5b58\u9010\u6e10\u88ab\u5206\u5272\u6210\u8bb8\u591a\u5c0f\u5757\u3002</p> <p>\u788e\u7247\u5316\u8fc7\u7a0b\u793a\u610f\u56fe\uff1a</p> <pre><code>\u521d\u59cb\uff1a [\u5927\u7a7a\u95f2\u5757128\u5b57\u8282]\n\n\u5206\u914d32B\uff1a [\u5df2\u752832][\u7a7a\u95f296]\n\u5206\u914d24B\uff1a [\u5df2\u752832][\u5df2\u752824][\u7a7a\u95f272]  \n\u5206\u914d16B\uff1a [\u5df2\u752832][\u5df2\u752824][\u5df2\u752816][\u7a7a\u95f256]\n\n\u91ca\u653e24B\uff1a [\u5df2\u752832][\u7a7a\u95f224][\u5df2\u752816][\u7a7a\u95f256]\n\u5206\u914d20B\uff1a [\u5df2\u752832][\u5df2\u752820][\u788e\u72474][\u5df2\u752816][\u7a7a\u95f256]\n\n\u73b0\u5728\u6709\uff1a2\u4e2a\u7a7a\u95f2\u5757(4B + 56B)\uff0c\u4f46\u65e0\u6cd5\u5206\u914d60B\u7684\u8bf7\u6c42\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_10","title":"\u5185\u5b58\u788e\u7247\u95ee\u9898","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_11","title":"\u5185\u90e8\u788e\u7247","text":"<p>\u5206\u914d\u7684\u5185\u5b58\u6bd4\u5b9e\u9645\u9700\u8981\u7684\u5927\uff0c\u591a\u51fa\u6765\u7684\u90e8\u5206\u88ab\u6d6a\u8d39\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u7533\u8bf710\u5b57\u8282\uff0c\u5206\u914d16\u5b57\u8282\uff1a\n[\u5757\u5934|10\u5b57\u8282\u6570\u636e|6\u5b57\u8282\u6d6a\u8d39]\n         \u2191\n     \u5185\u90e8\u788e\u7247\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_12","title":"\u5916\u90e8\u788e\u7247","text":"<p>\u7a7a\u95f2\u5185\u5b58\u88ab\u5206\u5272\u6210\u5f88\u591a\u5c0f\u5757\uff0c\u65e0\u6cd5\u6ee1\u8db3\u5927\u5185\u5b58\u7533\u8bf7\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u5806\u72b6\u6001\uff1a\n[\u5df2\u7528][\u7a7a\u95f28B][\u5df2\u7528][\u7a7a\u95f212B][\u5df2\u7528][\u7a7a\u95f26B]\n\n\u7533\u8bf720\u5b57\u8282\uff1a\u5931\u8d25\uff01\n\u603b\u7a7a\u95f2=26\u5b57\u8282\uff0c\u4f46\u90fd\u4e0d\u8fde\u7eed\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_13","title":"\u5e38\u89c1\u5206\u914d\u7b97\u6cd5","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_14","title":"\u9996\u6b21\u9002\u5e94\u7b97\u6cd5","text":"<p>\u4ece\u94fe\u8868\u5f00\u5934\u5f00\u59cb\u67e5\u627e\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a\u8db3\u591f\u5927\u7684\u5757\u5c31\u5206\u914d\u3002</p> <p>\u5de5\u4f5c\u8fc7\u7a0b\uff1a</p> <pre><code>\u7a7a\u95f2\u94fe\u8868\uff1a[25B] \u2192 [18B] \u2192 [32B] \u2192 [12B]\n\u7533\u8bf720\u5b57\u8282\uff1a\n\u68c0\u67e525B \u2192 \u8db3\u591f\u5927\uff0c\u5206\u914d\n\u7ed3\u679c\uff1a[\u5df2\u752820B|\u788e\u72475B] \u2192 [18B] \u2192 [32B] \u2192 [12B]\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_15","title":"\u6700\u4f73\u9002\u5e94\u7b97\u6cd5","text":"<p>\u67e5\u627e\u4e0e\u7533\u8bf7\u5927\u5c0f\u6700\u63a5\u8fd1\u7684\u7a7a\u95f2\u5757\uff0c\u51cf\u5c11\u6d6a\u8d39\u3002</p> <p>\u5de5\u4f5c\u8fc7\u7a0b\uff1a</p> <pre><code>\u7a7a\u95f2\u5757\uff1a8B, 25B, 15B, 30B\n\u7533\u8bf712\u5b57\u8282\uff1a\n\u627e\u5230\u6700\u5339\u914d\u768415B\u5757\n\u7ed3\u679c\uff1a8B, [\u5df2\u752812B|\u788e\u72473B], 30B\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#rtos","title":"RTOS\u4e2d\u7684\u5806\u7ba1\u7406","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_16","title":"\u5355\u4e00\u5806\u7ba1\u7406","text":"<p>\u6574\u4e2a\u7cfb\u7edf\u5171\u7528\u4e00\u4e2a\u5806\u7a7a\u95f4\uff0c\u6240\u6709\u4efb\u52a1\u90fd\u4ece\u8fd9\u91cc\u7533\u8bf7\u5185\u5b58\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>   \u4efb\u52a1A   \u4efb\u52a1B   \u4efb\u52a1C\n     \u2193      \u2193      \u2193\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502   \u7cfb\u7edf\u5806      \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_17","title":"\u56fa\u5b9a\u5927\u5c0f\u5185\u5b58\u6c60","text":"<p>\u9884\u5206\u914d\u5f88\u591a\u76f8\u540c\u5927\u5c0f\u7684\u5185\u5b58\u5757\uff0c\u5206\u914d\u65f6\u76f4\u63a5\u7ed9\u51fa\u4e00\u4e2a\u7a7a\u95f2\u5757\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u5185\u5b58\u6c60\uff1a\n[\u57571][\u57572][\u57573][\u57574][\u57575][\u57576]\n \u2502    \u2502    \u2502    \u2502    \u2502    \u2502\n32B  32B  32B  32B  32B  32B\n\n\u4f18\u70b9\uff1a\u5206\u914d\u901f\u5ea6\u5feb\uff0c\u65e0\u5916\u90e8\u788e\u7247\n\u7f3a\u70b9\uff1a\u53ef\u80fd\u5185\u90e8\u788e\u7247\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_18","title":"\u5e38\u89c1\u9519\u8bef\u7c7b\u578b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_19","title":"\u5185\u5b58\u6cc4\u6f0f","text":"<p>\u7533\u8bf7\u5185\u5b58\u540e\u5fd8\u8bb0\u91ca\u653e\uff0c\u5bfc\u81f4\u53ef\u7528\u5185\u5b58\u8d8a\u6765\u8d8a\u5c11\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u7533\u8bf7 \u2192 [\u5185\u5b58\u5757] \u2192 \u5fd8\u8bb0\u91ca\u653e\n\u7533\u8bf7 \u2192 [\u5185\u5b58\u5757] \u2192 \u5fd8\u8bb0\u91ca\u653e\n...\n\u6700\u7ec8\uff1a\u5185\u5b58\u8017\u5c3d\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_20","title":"\u4f7f\u7528\u5df2\u91ca\u653e\u5185\u5b58","text":"<p>\u91ca\u653e\u5185\u5b58\u540e\u7ee7\u7eed\u4f7f\u7528\uff0c\u5bfc\u81f4\u6570\u636e\u635f\u574f\u6216\u7a0b\u5e8f\u5d29\u6e83\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u91ca\u653e \u2192 [\u5185\u5b58\u5757] \u2705\n\u4f7f\u7528 \u2192 [\u540c\u4e00\u5185\u5b58\u5757] \u274c \u5371\u9669\uff01\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E5%A0%86/#_21","title":"\u91cd\u590d\u91ca\u653e","text":"<p>\u5bf9\u540c\u4e00\u5757\u5185\u5b58\u91ca\u653e\u4e24\u6b21\uff0c\u901a\u5e38\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83\u3002</p> <p>\u793a\u610f\u56fe\uff1a</p> <pre><code>\u91ca\u653e \u2192 [\u5757A] \u2705\n\u518d\u6b21\u91ca\u653e \u2192 [\u5757A] \u274c \u7a0b\u5e8f\u5d29\u6e83\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/","title":"\u6807\u7b7e","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u6807\u7b7e\u662f\u6c47\u7f16\u8bed\u8a00\u4e2d\u7684\u7b26\u53f7\u540d\u79f0\uff0c\u7528\u4e8e\u6807\u8bb0\u4ee3\u7801\u6216\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7684\u4f4d\u7f6e\u3002\u5b83\u4ee3\u8868\u4e00\u4e2a\u5730\u5740\uff0c\u8ba9\u7a0b\u5e8f\u5458\u53ef\u4ee5\u901a\u8fc7\u540d\u79f0\u800c\u4e0d\u662f\u786c\u7f16\u7801\u7684\u5730\u5740\u6765\u5f15\u7528\u4f4d\u7f6e\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_2","title":"\u8bed\u6cd5\u683c\u5f0f","text":"<pre><code>\u6807\u7b7e\u540d\u79f0:\n    \u6307\u4ee4\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_3","title":"\u6807\u7b7e\u793a\u4f8b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_4","title":"\u4ee3\u7801\u6807\u7b7e","text":"<pre><code>main:\n    MOV R0, #10\n    B   exit        @ \u8df3\u8f6c\u5230exit\u6807\u7b7e\n\nloop:\n    ADD R0, R0, #1\n    CMP R0, #20\n    BNE loop        @ \u8df3\u8f6c\u56deloop\u6807\u7b7e\n\nexit:\n    BX LR\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_5","title":"\u6570\u636e\u6807\u7b7e","text":"<pre><code>data_area:\n    .word 0x12345678    @ \u5b9a\u4e49\u4e00\u4e2a\u5b57\u6570\u636e\n    .byte 0xAA          @ \u5b9a\u4e49\u4e00\u4e2a\u5b57\u8282\u6570\u636e\n\ntext_string:\n    .asciz \"Hello\"      @ \u5b9a\u4e49\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_6","title":"\u6807\u7b7e\u7684\u7279\u70b9","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_7","title":"\u5730\u5740\u66ff\u4ee3","text":"<pre><code>@ \u7f16\u8bd1\u5668\u4f1a\u5c06\u6807\u7b7e\u8f6c\u6362\u4e3a\u5b9e\u9645\u5730\u5740\nstart:              @ \u5047\u8bbe\u5730\u5740\u4e3a0x08001000\n    MOV R0, #1\n    B   target      @ \u5b9e\u9645\u7f16\u8bd1\u4e3a B 0x08001008\n\ntarget:             @ \u5730\u57400x08001008\n    MOV R1, #2\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_8","title":"\u4f5c\u7528\u57df","text":"<ul> <li>\u5c40\u90e8\u6807\u7b7e\uff1a\u901a\u5e38\u5728\u5f53\u524d\u6587\u4ef6\u5185\u53ef\u89c1</li> <li>\u5168\u5c40\u6807\u7b7e\uff1a\u4f7f\u7528<code>.global</code>\u58f0\u660e\uff0c\u5bf9\u5176\u4ed6\u6587\u4ef6\u53ef\u89c1</li> </ul> <pre><code>.global main        @ \u58f0\u660e\u4e3a\u5168\u5c40\u6807\u7b7e\uff0c\u94fe\u63a5\u5668\u53ef\u89c1\n\nmain:\n    @ \u7a0b\u5e8f\u5165\u53e3\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_9","title":"\u6807\u7b7e\u7684\u5b9e\u9645\u7528\u9014","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_10","title":"\u6d41\u7a0b\u63a7\u5236","text":"<pre><code>    CMP R0, #0\n    BEQ zero_case   @ \u5982\u679c\u7b49\u4e8e0\u8df3\u8f6c\u5230zero_case\u6807\u7b7e\n    B   non_zero    @ \u5426\u5219\u8df3\u8f6c\u5230non_zero\u6807\u7b7e\n\nzero_case:\n    MOV R1, #0\n    B   end\n\nnon_zero:\n    MOV R1, #1\n\nend:\n    @ \u7ee7\u7eed\u6267\u884c...\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_11","title":"\u5faa\u73af\u7ed3\u6784","text":"<pre><code>    MOV R0, #0          @ \u8ba1\u6570\u5668\nloop_start:             @ \u5faa\u73af\u5f00\u59cb\u6807\u7b7e\n    ADD R0, R0, #1\n    CMP R0, #10\n    BLT loop_start      @ \u5982\u679cR0 &lt; 10\uff0c\u7ee7\u7eed\u5faa\u73af\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_12","title":"\u51fd\u6570\u5b9a\u4e49","text":"<pre><code>calculate_sum:          @ \u51fd\u6570\u6807\u7b7e\n    ADD R0, R0, R1\n    BX  LR\n\nmain:\n    MOV R0, #5\n    MOV R1, #3\n    BL  calculate_sum   @ \u8c03\u7528\u51fd\u6570\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_13","title":"\u6570\u636e\u8bbf\u95ee","text":"<pre><code>    LDR R0, =data_table @ \u83b7\u53d6\u6570\u636e\u8868\u5730\u5740\n    LDR R1, [R0]        @ \u52a0\u8f7d\u7b2c\u4e00\u4e2a\u6570\u636e\n\ndata_table:\n    .word 100, 200, 300 @ \u6570\u636e\u5b9a\u4e49\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_14","title":"\u6807\u7b7e\u7684\u7c7b\u578b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_15","title":"\u4ee3\u7801\u6807\u7b7e","text":"<p>\u6807\u8bb0\u53ef\u6267\u884c\u4ee3\u7801\u7684\u4f4d\u7f6e\uff0c\u7528\u4e8e\u8df3\u8f6c\u548c\u8c03\u7528\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_16","title":"\u6570\u636e\u6807\u7b7e","text":"<p>\u6807\u8bb0\u6570\u636e\u5b58\u50a8\u7684\u4f4d\u7f6e\uff0c\u7528\u4e8e\u52a0\u8f7d\u548c\u5b58\u50a8\u64cd\u4f5c\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_17","title":"\u5c40\u90e8\u6807\u7b7e","text":"<p>\u67d0\u4e9b\u6c47\u7f16\u5668\u652f\u6301\u6570\u5b57\u5c40\u90e8\u6807\u7b7e\uff1a</p> <pre><code>1:\n    @ \u4ee3\u7801...\n    B   1b      @ \u5411\u540e\u8df3\u8f6c\u5230\u6700\u8fd1\u76841\u6807\u7b7e\n    B   1f      @ \u5411\u524d\u8df3\u8f6c\u5230\u4e0b\u4e00\u4e2a1\u6807\u7b7e\n1:\n    @ \u53e6\u4e00\u4e2a1\u6807\u7b7e\n    B   1b      @ \u8df3\u8f6c\u5230\u524d\u4e00\u4e2a1\u6807\u7b7e\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_18","title":"\u6807\u7b7e\u7684\u547d\u540d\u89c4\u5219","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_19","title":"\u6709\u6548\u6807\u7b7e\u540d","text":"<pre><code>main:\nloop1:\n_data_start:\n_function_123:\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_20","title":"\u65e0\u6548\u6807\u7b7e\u540d","text":"<pre><code>1label:        @ \u4e0d\u80fd\u4ee5\u6570\u5b57\u5f00\u5934\nmy-label:      @ \u4e0d\u80fd\u5305\u542b\u8fde\u5b57\u7b26\nmy.label:      @ \u4e0d\u80fd\u5305\u542b\u70b9\u53f7\uff08\u9664\u975e\u7279\u6b8a\u7528\u9014\uff09\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_21","title":"\u6807\u7b7e\u5728\u53cd\u6c47\u7f16\u4e2d\u7684\u8868\u73b0","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_22","title":"\u53cd\u6c47\u7f16\u663e\u793a","text":"<pre><code>; \u6709\u6807\u7b7e\u7684\u60c5\u51b5\n0x08001000 main:\n0x08001000 200A          MOVS    R0, #10\n0x08001002 E002          B       exit\n\n0x08001004 loop:\n0x08001004 3001          ADDS    R0, #1\n\n0x08001006 exit:\n0x08001006 4770          BX      LR\n\n; \u65e0\u6807\u7b7e\u7684\u60c5\u51b5\n0x08001000 200A          MOVS    R0, #10\n0x08001002 E002          B       0x08001006\n0x08001004 3001          ADDS    R0, #1\n0x08001006 4770          BX      LR\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_23","title":"\u7279\u6b8a\u7528\u9014\u6807\u7b7e","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_24","title":"\u6bb5\u6807\u7b7e","text":"<pre><code>.text                   @ \u4ee3\u7801\u6bb5\u5f00\u59cb\n.global _start\n_start:\n    @ \u4ee3\u7801...\n\n.data                   @ \u6570\u636e\u6bb5\u5f00\u59cb\nvariables:\n    .word 0, 0, 0\n\n.bss                    @ \u672a\u521d\u59cb\u5316\u6570\u636e\u6bb5\nbuffer:\n    .space 256\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_25","title":"\u5bf9\u9f50\u6807\u7b7e","text":"<pre><code>    .align 2            @ 4\u5b57\u8282\u5bf9\u9f50\naligned_data:\n    .word 0x12345678\n\n    .align 3            @ 8\u5b57\u8282\u5bf9\u9f50\ndouble_aligned:\n    .dword 0x123456789ABCDEF0\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_26","title":"\u6807\u7b7e\u4e0e\u5730\u5740\u8ba1\u7b97","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_27","title":"\u5730\u5740\u5dee\u8ba1\u7b97","text":"<pre><code>start:\n    @ \u4e00\u4e9b\u4ee3\u7801...\nend:\n    @ \u8ba1\u7b97\u4ee3\u7801\u5927\u5c0f\n    LDR R0, =end\n    LDR R1, =start\n    SUB R2, R0, R1      @ R2 = \u4ee3\u7801\u5927\u5c0f\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_28","title":"\u76f8\u5bf9\u5730\u5740\u5f15\u7528","text":"<pre><code>    ADR R0, data_table  @ \u83b7\u53d6\u76f8\u5bf9\u5730\u5740\n    LDR R1, [R0]        @ \u52a0\u8f7d\u6570\u636e\n\ndata_table:\n    .word 0x12345678\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_29","title":"\u5e38\u89c1\u6807\u7b7e\u4f7f\u7528\u6a21\u5f0f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_30","title":"\u6761\u4ef6\u5206\u652f","text":"<pre><code>    CMP R0, #100\n    BGT greater_than    @ \u5982\u679c\u5927\u4e8e\u8df3\u8f6c\n    BLT less_than       @ \u5982\u679c\u5c0f\u4e8e\u8df3\u8f6c\n    BEQ equal           @ \u5982\u679c\u7b49\u4e8e\u8df3\u8f6c\n\ngreater_than:\n    MOV R1, #1\n    B   end_compare\n\nless_than:\n    MOV R1, #-1\n    B   end_compare\n\nequal:\n    MOV R1, #0\n\nend_compare:\n    @ \u7ee7\u7eed\u6267\u884c...\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_31","title":"\u8df3\u8f6c\u8868\u5b9e\u73b0","text":"<pre><code>    CMP R0, #3\n    BHS default_case    @ \u5982\u679c&gt;=3\u8df3\u8f6c\u5230\u9ed8\u8ba4\u60c5\u51b5\n    LDR PC, [PC, R0, LSL #2]  @ \u8df3\u8f6c\u5230\u5bf9\u5e94\u5904\u7406\u7a0b\u5e8f\n    B   end_switch\n\njump_table:\n    .word case0, case1, case2\n\ncase0:\n    @ \u60c5\u51b50\u5904\u7406\n    B   end_switch\n\ncase1:\n    @ \u60c5\u51b51\u5904\u7406\n    B   end_switch\n\ncase2:\n    @ \u60c5\u51b52\u5904\u7406\n    B   end_switch\n\ndefault_case:\n    @ \u9ed8\u8ba4\u5904\u7406\n\nend_switch:\n    @ \u7ee7\u7eed\u6267\u884c...\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_32","title":"\u8c03\u8bd5\u4fe1\u606f\u4e2d\u7684\u6807\u7b7e","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%87%E7%AD%BE/#_33","title":"\u5e26\u8c03\u8bd5\u7b26\u53f7","text":"<pre><code>.LFB0:                  @ \u51fd\u6570\u5f00\u59cb\u6807\u7b7e\n    .loc 1 10 0         @ \u6587\u4ef61\u7b2c10\u884c\n    push    {r7, lr}\n\n.LBB2:                  @ \u57fa\u672c\u5757\u5f00\u59cb\n    .loc 1 11 0\n    movs    r0, #10\n\n.LBE2:                  @ \u57fa\u672c\u5757\u7ed3\u675f\n    .loc 1 12 0\n    pop     {r7, pc}\n.LFE0:                  @ \u51fd\u6570\u7ed3\u675f\u6807\u7b7e\n</code></pre> <p>\u6807\u7b7e\u662f\u6c47\u7f16\u7f16\u7a0b\u7684\u57fa\u7840\u6784\u5efa\u5757\uff0c\u5b83\u4eec\u4f7f\u4ee3\u7801\u66f4\u6613\u8bfb\u3001\u6613\u7ef4\u62a4\uff0c\u5e76\u63d0\u4f9b\u4e86\u5730\u5740\u5f15\u7528\u7684\u62bd\u8c61\u5c42\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/","title":"\u6808","text":"<p>\u6808\u662f\u5185\u5b58\u4e2d\u7684\u4e00\u5757\u7279\u6b8a\u533a\u57df\uff0c\u91c7\u7528\u540e\u8fdb\u5148\u51fa\u7684\u539f\u5219\u7ba1\u7406\u6570\u636e\uff0c\u4e3b\u8981\u7528\u4e8e\u51fd\u6570\u8c03\u7528\u3001\u5c40\u90e8\u53d8\u91cf\u5b58\u50a8\u548c\u73b0\u573a\u4fdd\u62a4\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_2","title":"\u6808\u7684\u6838\u5fc3\u7279\u6027","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_3","title":"\u751f\u957f\u65b9\u5411","text":"<ul> <li>\u5411\u4e0b\u751f\u957f\uff1a\u6808\u4ece\u9ad8\u5730\u5740\u5411\u4f4e\u5730\u5740\u6269\u5c55</li> <li>\u6808\u6307\u9488(SP)\uff1a\u59cb\u7ec8\u6307\u5411\u6808\u9876\u4f4d\u7f6e</li> </ul> <pre><code>\u9ad8\u5730\u5740 \u2192 \u6808\u5e95 (\u521d\u59cbSP)\n        \u2502\n        \u2502 \u5df2\u4f7f\u7528\u6808\u7a7a\u95f4\n        \u2502\n        \u2193 \u6808\u9876 (\u5f53\u524dSP) \n\u4f4e\u5730\u5740 \u2192 \u672a\u4f7f\u7528\u7a7a\u95f4\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_4","title":"\u6808\u7684\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#push-","title":"PUSH - \u538b\u6808","text":"<pre><code>PUSH {R0, R1, LR}    ; SP\u51cf\u5c11\uff0c\u6570\u636e\u5b58\u5165\u6808\u4e2d\n</code></pre> <p>\u6267\u884c\u8fc7\u7a0b\uff1a 1. SP = SP - 12 (3\u4e2a\u5bc4\u5b58\u5668 \u00d7 4\u5b57\u8282) 2. \u6570\u636e\u6309\u987a\u5e8f\u5b58\u5165\u6808\u4e2d</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#pop-","title":"POP - \u51fa\u6808","text":"<pre><code>POP {R0, R1, PC}     ; \u6570\u636e\u4ece\u6808\u4e2d\u6062\u590d\uff0cSP\u589e\u52a0\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_5","title":"\u6808\u5728\u51fd\u6570\u8c03\u7528\u4e2d\u7684\u4f5c\u7528","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_6","title":"\u51fd\u6570\u5f00\u573a","text":"<pre><code>my_function:\n    PUSH {R4, R5, LR}    ; \u4fdd\u5b58\u73b0\u573a\n    SUB SP, SP, #8       ; \u5206\u914d\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_7","title":"\u6808\u5e27\u5e03\u5c40","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2190 \u65e7SP\n\u2502    \u65e7LR     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502     R5      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502     R4      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2190 \u5f53\u524dSP\n\u2502 \u5c40\u90e8\u53d8\u91cf2   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u5c40\u90e8\u53d8\u91cf1   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2190 \u65b0SP\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_8","title":"\u51fd\u6570\u9000\u573a","text":"<pre><code>    ADD SP, SP, #8       ; \u91ca\u653e\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4\n    POP {R4, R5, PC}     ; \u6062\u590d\u73b0\u573a\u5e76\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_9","title":"\u6808\u7684\u7528\u9014","text":"<ol> <li>\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\uff1aLR\u5bc4\u5b58\u5668\u538b\u6808</li> <li>\u4fdd\u62a4\u5bc4\u5b58\u5668\uff1a\u9632\u6b62\u88ab\u8c03\u7528\u51fd\u6570\u7834\u574f\u8c03\u7528\u8005\u7684\u6570\u636e</li> <li>\u5c40\u90e8\u53d8\u91cf\u5b58\u50a8\uff1a\u51fd\u6570\u5185\u7684\u81ea\u52a8\u53d8\u91cf</li> <li>\u53c2\u6570\u4f20\u9012\uff1a\u5f53\u5bc4\u5b58\u5668\u4e0d\u591f\u65f6\u901a\u8fc7\u6808\u4f20\u9012</li> <li>\u4e2d\u65ad\u5904\u7406\uff1a\u4fdd\u5b58\u5904\u7406\u5668\u72b6\u6001</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_10","title":"\u6808\u6307\u9488\u64cd\u4f5c","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_11","title":"\u663e\u5f0f\u8c03\u6574","text":"<pre><code>SUB SP, SP, #16     ; \u5206\u914d16\u5b57\u8282\u6808\u7a7a\u95f4\nADD SP, SP, #16     ; \u91ca\u653e\u6808\u7a7a\u95f4\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_12","title":"\u9690\u5f0f\u8c03\u6574","text":"<pre><code>PUSH {R0-R3}        ; \u81ea\u52a8 SP = SP - 16\nPOP {R0-R3}         ; \u81ea\u52a8 SP = SP + 16\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_13","title":"\u91cd\u8981\u7279\u70b9","text":"<ul> <li>\u81ea\u52a8\u7ba1\u7406\uff1a\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u6808\u64cd\u4f5c\u6307\u4ee4</li> <li>\u540e\u8fdb\u5148\u51fa\uff1a\u6700\u540e\u538b\u5165\u7684\u6570\u636e\u6700\u5148\u5f39\u51fa</li> <li>\u7ebf\u7a0b\u79c1\u6709\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u6709\u81ea\u5df1\u7684\u6808\u7a7a\u95f4</li> <li>\u5927\u5c0f\u6709\u9650\uff1a\u6808\u6ea2\u51fa\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#vs","title":"\u6808 vs \u6808\u5e27","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_14","title":"\u6838\u5fc3\u533a\u522b","text":"\u7279\u6027 \u6808 (Stack) \u6808\u5e27 (Stack Frame) \u6570\u91cf \u6bcf\u4e2a\u7ebf\u7a0b\u4e00\u4e2a\u6808 \u6bcf\u4e2a\u51fd\u6570\u8c03\u7528\u4e00\u4e2a\u6808\u5e27 \u751f\u547d\u5468\u671f \u7ebf\u7a0b\u6574\u4e2a\u751f\u547d\u5468\u671f \u51fd\u6570\u8c03\u7528\u671f\u95f4 \u5927\u5c0f \u8f83\u5927 (\u901a\u5e38\u51e0MB) \u8f83\u5c0f (\u51e0\u5341\u5230\u51e0\u767e\u5b57\u8282) \u7528\u9014 \u6240\u6709\u51fd\u6570\u8c03\u7528\u7684\u603b\u5bb9\u5668 \u5355\u4e2a\u51fd\u6570\u7684\u5c40\u90e8\u5de5\u4f5c\u533a"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_15","title":"\u8be6\u7ec6\u89e3\u91ca","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#stack-","title":"\u6808 (Stack) - \"\u6574\u680b\u5927\u697c\"","text":"<ul> <li>\u4e00\u4e2a\u5b8c\u6574\u7684\u8bb0\u5fc6\u533a\u57df\uff0c\u5c31\u50cf\u4e00\u680b\u529e\u516c\u5927\u697c</li> <li>\u6bcf\u4e2a\u7ebf\u7a0b\u6709\u81ea\u5df1\u7684\u6808</li> <li>\u4ece\u9ad8\u5730\u5740\u5411\u4f4e\u5730\u5740\u751f\u957f</li> <li>\u5305\u542b\u6240\u6709\u51fd\u6570\u8c03\u7528\u7684\u6808\u5e27</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#stack-frame-","title":"\u6808\u5e27 (Stack Frame) - \"\u5355\u4e2a\u529e\u516c\u5ba4\"","text":"<ul> <li>\u51fd\u6570\u8c03\u7528\u65f6\u521b\u5efa\u7684\u4e34\u65f6\u5de5\u4f5c\u533a\uff0c\u5c31\u50cf\u5927\u697c\u91cc\u7684\u4e00\u4e2a\u529e\u516c\u5ba4</li> <li>\u6bcf\u4e2a\u51fd\u6570\u8c03\u7528\u90fd\u6709\u72ec\u7acb\u7684\u6808\u5e27</li> <li>\u5305\u542b\u8be5\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\u3001\u53c2\u6570\u3001\u8fd4\u56de\u5730\u5740\u7b49</li> <li>\u51fd\u6570\u8fd4\u56de\u65f6\"\u9000\u623f\"\uff0c\u6808\u5e27\u88ab\u91ca\u653e</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_16","title":"\u5b9e\u9645\u5185\u5b58\u5e03\u5c40","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_17","title":"\u591a\u4e2a\u51fd\u6570\u8c03\u7528\u65f6\u7684\u6808\u7ed3\u6784","text":"<pre><code>\u9ad8\u5730\u5740 \u2192 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2190 \u6808\u5e95\n         \u2502  main\u51fd\u6570   \u2502 \u2190 main\u7684\u6808\u5e27\n         \u2502   \u6808\u5e27      \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n         \u2502  funcA\u51fd\u6570  \u2502 \u2190 funcA\u7684\u6808\u5e27  \n         \u2502   \u6808\u5e27      \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n         \u2502  funcB\u51fd\u6570  \u2502 \u2190 funcB\u7684\u6808\u5e27\n         \u2502   \u6808\u5e27      \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n         \u2502  funcC\u51fd\u6570  \u2502 \u2190 funcC\u7684\u6808\u5e27\n         \u2502   \u6808\u5e27      \u2502\n\u4f4e\u5730\u5740 \u2192 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2190 \u5f53\u524dSP (\u6808\u9876)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_18","title":"\u5177\u4f53\u793a\u4f8b\u5206\u6790","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#c","title":"C\u4ee3\u7801\u793a\u4f8b","text":"<pre><code>int funcC(int x) {\n    int local_c = x + 5;\n    return local_c;\n}\n\nint funcB(int a) {\n    int local_b = a * 2;\n    return funcC(local_b);\n}\n\nint funcA() {\n    int local_a = 10;\n    return funcB(local_a);\n}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_19","title":"\u6808\u5e27\u521b\u5efa\u8fc7\u7a0b","text":"<pre><code>main:\n    BL funcA           ; \u8c03\u7528funcA\n\nfuncA:\n    PUSH {R4, LR}      ; \u521b\u5efafuncA\u7684\u6808\u5e27\n    SUB SP, SP, #8     ; \u4e3a\u5c40\u90e8\u53d8\u91cf\u5206\u914d\u7a7a\u95f4\n    MOV R4, #10\n    STR R4, [SP, #4]   ; local_a = 10\n    BL funcB           ; \u8c03\u7528funcB\n    ADD SP, SP, #8     ; \u91ca\u653efuncA\u6808\u5e27\u7684\u5c40\u90e8\u53d8\u91cf\n    POP {R4, PC}       ; \u91ca\u653efuncA\u6808\u5e27\n\nfuncB:\n    PUSH {R4, LR}      ; \u5728funcA\u6808\u5e27\u4e4b\u4e0a\u521b\u5efafuncB\u6808\u5e27\n    SUB SP, SP, #8\n    ; ... funcB\u7684\u4ee3\u7801 ...\n    BL funcC           ; \u8c03\u7528funcC\n    ADD SP, SP, #8\n    POP {R4, PC}\n\nfuncC:\n    PUSH {R4, LR}      ; \u5728funcB\u6808\u5e27\u4e4b\u4e0a\u521b\u5efafuncC\u6808\u5e27\n    SUB SP, SP, #8\n    ; ... funcC\u7684\u4ee3\u7801 ...\n    ADD SP, SP, #8\n    POP {R4, PC}       ; \u91ca\u653efuncC\u6808\u5e27\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_20","title":"\u6808\u5e27\u7684\u5178\u578b\u5185\u5bb9","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_21","title":"\u5355\u4e2a\u6808\u5e27\u7684\u5185\u90e8\u7ed3\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2190 \u5e27\u6307\u9488 (FP/R11)\n\u2502  \u8c03\u7528\u8005FP   \u2502 \u2190 \u524d\u4e00\u4e2a\u6808\u5e27\u7684\u5e27\u6307\u9488\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u8fd4\u56de\u5730\u5740   \u2502 \u2190 \u51fd\u6570\u8fd4\u56de\u540e\u7ee7\u7eed\u6267\u884c\u7684\u4f4d\u7f6e\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u4fdd\u5b58\u7684R4   \u2502 \u2190 \u88ab\u8c03\u7528\u8005\u4fdd\u5b58\u7684\u5bc4\u5b58\u5668\n\u2502  \u4fdd\u5b58\u7684R5   \u2502\n\u2502  \u4fdd\u5b58\u7684LR   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2190 \u6808\u6307\u9488 (SP) \u8fdb\u5165\u65f6\n\u2502  \u53c2\u65705+     \u2502 \u2190 \u591a\u4f59\u7684\u53c2\u6570\uff08\u5982\u679c\u6709\uff09\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u5c40\u90e8\u53d8\u91cf1   \u2502 \u2190 \u51fd\u6570\u7684\u81ea\u52a8\u53d8\u91cf\n\u2502 \u5c40\u90e8\u53d8\u91cf2   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2190 \u5f53\u524dSP (\u51fd\u6570\u6267\u884c\u4e2d)\n\u2502    \u7a7a\u4f59     \u2502 \u2190 \u53ef\u80fd\u7528\u4e8e\u4e34\u65f6\u5b58\u50a8\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_22","title":"\u5173\u952e\u7279\u70b9","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_23","title":"\u6808\u7684\u7279\u70b9","text":"<ul> <li>\u540e\u8fdb\u5148\u51fa (LIFO)\uff1a\u6700\u540e\u8c03\u7528\u7684\u51fd\u6570\u6700\u5148\u8fd4\u56de</li> <li>\u81ea\u52a8\u7ba1\u7406\uff1a\u7f16\u8bd1\u5668\u751f\u6210\u6808\u64cd\u4f5c\u4ee3\u7801</li> <li>\u5927\u5c0f\u56fa\u5b9a\uff1a\u6808\u6ea2\u51fa\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5d29\u6e83</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_24","title":"\u6808\u5e27\u7684\u7279\u70b9","text":"<ul> <li>\u5d4c\u5957\u7ed3\u6784\uff1a\u6808\u5e27\u5728\u6808\u5185\u5d4c\u5957\u6392\u5217</li> <li>\u52a8\u6001\u521b\u5efa/\u9500\u6bc1\uff1a\u51fd\u6570\u8c03\u7528\u65f6\u521b\u5efa\uff0c\u8fd4\u56de\u65f6\u9500\u6bc1</li> <li>\u72ec\u7acb\u7a7a\u95f4\uff1a\u6bcf\u4e2a\u6808\u5e27\u5185\u7684\u53d8\u91cf\u76f8\u4e92\u9694\u79bb</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%A0%88/#_25","title":"\u603b\u7ed3","text":"<p>\u7b80\u5355\u6bd4\u55bb\uff1a - \u6808 = \u4e00\u6574\u680b\u529e\u516c\u5927\u697c - \u6808\u5e27 = \u5927\u697c\u91cc\u7684\u5355\u4e2a\u529e\u516c\u5ba4</p> <p>\u6240\u6709\u51fd\u6570\u5171\u4eab\u540c\u4e00\u4e2a\u6808\uff0c\u4f46\u6bcf\u4e2a\u51fd\u6570\u8c03\u7528\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u6808\u5e27\uff01</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/","title":"\u6c47\u7f16\u57fa\u7840","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_2","title":"\u57fa\u672c\u6307\u4ee4\u683c\u5f0f","text":"<pre><code>\u64cd\u4f5c\u7801 \u76ee\u6807\u5bc4\u5b58\u5668, \u6e90\u5bc4\u5b58\u56681, \u6e90\u5bc4\u5b58\u56682/\u7acb\u5373\u6570\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#1","title":"1. \u6570\u636e\u79fb\u52a8\u6307\u4ee4","text":"<pre><code>MOV R0, R1          @ \u628aR1\u7684\u503c\u590d\u5236\u5230R0\nMOV R0, #100        @ \u628a\u6570\u5b57100\u653e\u5230R0\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#2","title":"2. \u7b97\u672f\u8fd0\u7b97\u6307\u4ee4","text":"<pre><code>ADD R0, R1, R2      @ R0 = R1 + R2\nSUB R0, R1, R2      @ R0 = R1 - R2\nMUL R0, R1, R2      @ R0 = R1 \u00d7 R2\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#3","title":"3. \u5185\u5b58\u8bbf\u95ee\u6307\u4ee4","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_3","title":"\u5bc4\u5b58\u5668\u5730\u5740\u7ed3\u6784","text":"<pre><code>[\u57fa\u5740\u5bc4\u5b58\u5668, \u504f\u79fb\u91cf]\n</code></pre> <ul> <li>\u56fa\u5b9a\u7684\u504f\u79fb\u91cf\uff08\u5355\u4f4d\uff1a4\u5b57\u8282\uff09</li> </ul> <pre><code>LDR R0, [R1,#4]     @ \u4eceR1+4\u6307\u5411\u7684\u5185\u5b58\u5730\u5740\u52a0\u8f7d4\u4e2a\u5b57\u8282\u7684\u6570\u636e\u5230R0;Load Register\nLDRH R0, [R1,#4]     @ \u4eceR1+4\u6307\u5411\u7684\u5185\u5b58\u5730\u5740\u7684\u52a0\u8f7d2\u4e2a\u5b57\u8282(half)\u7684\u6570\u636e\u5230R0;\nLDRD R0, [R1,#4]     @ \u4eceR1+4\u6307\u5411\u7684\u5185\u5b58\u5730\u5740\u7684\u52a0\u8f7d8\u4e2a\u5b57\u8282\uff08double\uff09\u7684\u6570\u636e\u5230R0;\nLDRB R0, [R1,#4]     @ \u4eceR1+4\u6307\u5411\u7684\u5185\u5b58\u5730\u5740\u7684\u52a0\u8f7d1\u4e2a\u5b57\u8282\u7684\u6570\u636e\u5230R0;\nSTR R0, [R1]        @ \u628aR0\u7684\u6570\u636e\u5b58\u50a8\u5230R1\u6307\u5411\u7684\u5185\u5b58\u5730\u5740,Store Register\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#4","title":"4. \u6bd4\u8f83\u548c\u8df3\u8f6c\u6307\u4ee4","text":"<pre><code>CMP R0, R1          @ \u6bd4\u8f83R0\u548cR1\uff0c\u8bbe\u7f6e\u6807\u5fd7\u4f4d\nB   label           @ \u65e0\u6761\u4ef6\u8df3\u8f6c\u5230label\nBL  label           @ Branch and Link,\u5148\u628a\u8fd4\u56de\u5730\u5740\u4fdd\u5b58\u5728LR\u5bc4\u5b58\u5668\u518d\u8df3\u8f6c\nBEQ label           @ \u5982\u679c\u76f8\u7b49\u5219\u8df3\u8f6c\nBNE label           @ \u5982\u679c\u4e0d\u76f8\u7b49\u5219\u8df3\u8f6c\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_4","title":"\u7b80\u5355\u6c47\u7f16\u793a\u4f8b","text":"<pre><code>@ \u8ba1\u7b97 10 + 20\nMOV R0, #10         @ R0 = 10\nMOV R1, #20         @ R1 = 20\nADD R2, R0, R1      @ R2 = R0 + R1 = 30\n</code></pre> <p>## \u66f4\u591a\u6307\u4ee4\u53ca\u8be6\u89e3  - [[PUSH\u6307\u4ee4]] - [[POP\u6307\u4ee4]] - [[B\u548cBX\u6307\u4ee4]]</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#c","title":"C\u8bed\u8a00\u4e0e\u53cd\u6c47\u7f16","text":"<p>\u5148\u4e86\u89e3 - [[\u5185\u5b58\u7ba1\u7406]] - [[\u6807\u7b7e]]</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#c_1","title":"\u7b80\u5355\u7684C\u7a0b\u5e8f","text":"<pre><code>// simple.c\nint add_numbers(int a, int b) {\n    int result = a + b;\n    return result;\n}\n\nint main() {\n    int x = 5;\n    int y = 3;\n    int sum = add_numbers(x, y);\n    return 0;\n}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_5","title":"\u7f16\u8bd1\u4e3a\u6c47\u7f16","text":"<p>\u4f7f\u7528GCC\u7f16\u8bd1\u5668\u53ef\u4ee5\u67e5\u770b\u751f\u6210\u7684\u6c47\u7f16\u4ee3\u7801\uff1a</p> <pre><code>arm-none-eabi-gcc -S simple.c -o simple.s\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#c_2","title":"C\u4ee3\u7801\u4e0e\u6c47\u7f16\u4ee3\u7801\u5206\u6790","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#c_3","title":"C\u6e90\u4ee3\u7801","text":"<pre><code>int add_numbers(int a, int b) {\n    int result = a + b;\n    return result;\n}\n\nint main() {\n    int x = 5;\n    int y = 3;\n    int sum = add_numbers(x, y);\n    return 0;\n}\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#arm","title":"\u5bf9\u5e94\u7684ARM\u6c47\u7f16\u4ee3\u7801\u53ca\u5206\u6790","text":"<p>\u9700\u8981\u5148\u4e86\u89e3\uff1a - [[../ARM\u67b6\u6784/ARM\u67b6\u6784|ARM\u67b6\u6784]]</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#add_numbers","title":"add_numbers\u51fd\u6570\u6c47\u7f16\uff08\u7b80\u5355\u7248\u672c\uff09","text":"<pre><code>add_numbers:\n    @ \u7b80\u5355\u51fd\u6570 - \u76f4\u63a5\u8ba1\u7b97\u5e76\u8fd4\u56de\n    ADD     R0, R0, R1      @ result = a + b (\u53c2\u6570a\u5728R0, b\u5728R1, \u7ed3\u679c\u76f4\u63a5\u653e\u56deR0)\n    BX      LR              @ \u8fd4\u56de\u8c03\u7528\u8005\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#add_numbers_1","title":"add_numbers\u51fd\u6570\u6c47\u7f16\uff08\u4fdd\u5b58\u5bc4\u5b58\u5668\u7248\u672c\uff09","text":"<pre><code>add_numbers:\n    @ \u51fd\u6570\u5f00\u59cb - \u4fdd\u5b58\u5bc4\u5b58\u5668\n    PUSH    {R4, R5, LR}    @ \u4fdd\u5b58\u9700\u8981\u4fdd\u62a4\u7684\u5bc4\u5b58\u5668(R4,R5)\u548c\u8fd4\u56de\u5730\u5740(LR)\u5230\u6808\u4e2d\n\n    @ \u51fd\u6570\u4f53\n    MOV     R4, R0          @ \u5c06\u53c2\u6570a\u4fdd\u5b58\u5230R4\n    MOV     R5, R1          @ \u5c06\u53c2\u6570b\u4fdd\u5b58\u5230R5\n    ADD     R0, R4, R5      @ result = a + b\uff0c\u7ed3\u679c\u653e\u5728R0\n\n    @ \u51fd\u6570\u7ed3\u675f\n    POP     {R4, R5, PC}    @ \u6062\u590d\u5bc4\u5b58\u5668\u5e76\u7528PC\u66ff\u4ee3LR\u5b9e\u73b0\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#main","title":"main\u51fd\u6570\u6c47\u7f16","text":"<pre><code>main:\n    @ \u51fd\u6570\u5f00\u59cb - \u5206\u914d\u6808\u7a7a\u95f4\n    PUSH    {R4, R5, LR}    @ \u4fdd\u5b58\u9700\u8981\u4fdd\u62a4\u7684\u5bc4\u5b58\u5668\u548c\u8fd4\u56de\u5730\u5740\u5230\u6808\u4e2d\n                            @ \u8fd9\u91ccR5\u5176\u5b9e\u7528\u4e0d\u5230\uff0c\u8fd9\u91cc\u4ec5\u4f5c\u793a\u4f8b\u7ed9\u51fa\n    SUB     SP, SP, #12     @ \u4e3a\u5c40\u90e8\u53d8\u91cfx,y,sum\u5206\u914d\u6808\u7a7a\u95f4\n\n    @ \u521d\u59cb\u5316\u5c40\u90e8\u53d8\u91cf\n    MOV     R4, #5          @ x = 5\n    STR     R4, [SP, #8]    @ \u5c06x\u5b58\u50a8\u5230\u6808\u4e2d[SP+8]\n    MOV     R4, #3          @ y = 3\n    STR     R4, [SP, #4]    @ \u5c06y\u5b58\u50a8\u5230\u6808\u4e2d[SP+4]\n\n    @ \u51fd\u6570\u8c03\u7528\uff0c\u5c40\u90e8\u53d8\u91cf\u4f20\u5165\n    LDR     R0, [SP, #8]    @ \u51c6\u5907\u7b2c\u4e00\u4e2a\u53c2\u6570x\u5230R0\n    LDR     R1, [SP, #4]    @ \u51c6\u5907\u7b2c\u4e8c\u4e2a\u53c2\u6570y\u5230R1\n    BL      add_numbers     @ \u8c03\u7528add_numbers\u51fd\u6570\n    STR     R0, [SP, #0]    @ \u5c06\u8fd4\u56de\u503c\u5b58\u50a8\u5230sum [SP+0]\n\n    @ \u51fd\u6570\u8fd4\u56de\n    MOV     R0, #0          @ \u8bbe\u7f6e\u8fd4\u56de\u503c0\n    ADD     SP, SP, #12     @ \u91ca\u653e\u5c40\u90e8\u53d8\u91cf\u7a7a\u95f4\n    POP     {R4, R5, PC}    @ \u6062\u590d\u5bc4\u5b58\u5668\u5e76\u8fd4\u56de\n</code></pre> <p>\u7591\u95ee\uff1a\u4e3a\u4ec0\u4e48\u9700\u8981\u501f\u52a9\u5bc4\u5b58\u5668\u6765\u8bbf\u95ee\u5185\u5b58\uff1f\u56e0\u4e3a ARM\u91c7\u7528Load-Store\u67b6\u6784\uff0c\u8fd9\u610f\u5473\u7740\uff1a - \u53ea\u6709LOAD/STORE\u6307\u4ee4\u53ef\u4ee5\u8bbf\u95ee\u5185\u5b58 - \u6240\u6709\u6570\u636e\u5904\u7406\u6307\u4ee4\u53ea\u80fd\u5728\u5bc4\u5b58\u5668\u95f4\u64cd\u4f5c - \u6ca1\u6709\"\u76f4\u63a5\u5185\u5b58\u5230\u5185\u5b58\"\u7684\u64cd\u4f5c</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_6","title":"\u6808\u5e27\u5e03\u5c40\u5206\u6790","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#main_1","title":"main\u51fd\u6570\u6808\u5e27","text":"<pre><code>\u9ad8\u5730\u5740 \u2192 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2190 \u65e7SP\n         \u2502    \u65e7LR     \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n         \u2502     R5      \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n         \u2502     R4      \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2190 \u5f53\u524dSP (\u51fd\u6570\u5f00\u59cb\u540e)\n         \u2502    x (5)    \u2502 [SP+8]\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n         \u2502    y (3)    \u2502 [SP+4]\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n         \u2502   sum(8)    \u2502 [SP+0]\n\u4f4e\u5730\u5740 \u2192 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2190 \u65b0SP (SP-12\u540e)\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_7","title":"\u5173\u952e\u70b9\u5206\u6790","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#1_1","title":"1. \u53c2\u6570\u4f20\u9012\u89c4\u5219","text":"<ul> <li>\u524d4\u4e2a\u53c2\u6570\uff1a\u901a\u8fc7R0-R3\u4f20\u9012</li> <li>\u8fd4\u56de\u503c\uff1a\u901a\u8fc7R0\u8fd4\u56de</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#2_1","title":"2. \u5bc4\u5b58\u5668\u4f7f\u7528\u7ea6\u5b9a","text":"<ul> <li>R0-R3\uff1a\u8c03\u7528\u8005\u4fdd\u5b58\uff0c\u53ef\u7528\u4e8e\u53c2\u6570\u4f20\u9012</li> <li>R4-R11\uff1a\u88ab\u8c03\u7528\u8005\u4fdd\u5b58\uff0c\u4f7f\u7528\u524d\u5fc5\u987b\u538b\u6808\u4fdd\u5b58</li> <li>LR (R14)\uff1a\u94fe\u63a5\u5bc4\u5b58\u5668\uff0c\u5b58\u50a8\u8fd4\u56de\u5730\u5740</li> <li>SP (R13)\uff1a\u6808\u6307\u9488</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#3_1","title":"3. \u51fd\u6570\u8c03\u7528\u8fc7\u7a0b","text":"<ol> <li>\u53c2\u6570\u51c6\u5907\uff1a\u5c06\u53c2\u6570\u653e\u5165R0-R3</li> <li>BL\u6307\u4ee4\uff1a\u8df3\u8f6c\u5230\u51fd\u6570\uff0c\u540c\u65f6\u5c06\u8fd4\u56de\u5730\u5740\u4fdd\u5b58\u5230LR</li> <li>\u51fd\u6570\u6267\u884c\uff1a\u88ab\u8c03\u7528\u51fd\u6570\u5de5\u4f5c</li> <li>BX LR\uff1a\u8fd4\u56de\u5230\u8c03\u7528\u70b9</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#4_1","title":"4. \u6808\u5e73\u8861","text":"<ul> <li>PUSH/POP \u5fc5\u987b\u6210\u5bf9\u51fa\u73b0</li> <li>SUB/ADD SP \u5fc5\u987b\u6210\u5bf9\u51fa\u73b0</li> <li>\u786e\u4fdd\u51fd\u6570\u8fd4\u56de\u65f6SP\u6062\u590d\u5230\u539f\u59cb\u503c</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_8","title":"\u53cd\u6c47\u7f16\u4ee3\u7801\u7ed3\u6784\u89e3\u6790","text":"<p>\u53cd\u6c47\u7f16\u4ee3\u7801\u901a\u5e38\u663e\u793a\u4e3a\u4ee5\u4e0b\u683c\u5f0f\uff1a</p> <pre><code>\u5185\u5b58\u5730\u5740    \u673a\u5668\u7801    ASCII\u663e\u793a    \u6307\u4ee4    \u64cd\u4f5c\u6570\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_9","title":"\u5177\u4f53\u793a\u4f8b\u5206\u6790","text":"<pre><code>0x08002F34  B503    ..    PUSH    {R0, R1, LR}\n</code></pre> <p>\u9010\u6bb5\u89e3\u91ca\uff1a</p> \u90e8\u5206 \u5185\u5bb9 \u542b\u4e49 <code>0x08002F34</code> \u5185\u5b58\u5730\u5740 \u8fd9\u6761\u6307\u4ee4\u5728\u5185\u5b58\u4e2d\u7684\u4f4d\u7f6e <code>B503</code> \u673a\u5668\u7801 CPU\u5b9e\u9645\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801\uff0816\u8fdb\u5236\u663e\u793a\uff09 <code>..</code> ASCII\u663e\u793a \u673a\u5668\u7801\u5bf9\u5e94\u7684ASCII\u5b57\u7b26\uff08\u4e0d\u53ef\u6253\u5370\u5b57\u7b26\u663e\u793a\u4e3a\u70b9\uff09 <code>PUSH</code> \u6307\u4ee4\u52a9\u8bb0\u7b26 \u4eba\u7c7b\u53ef\u8bfb\u7684\u6307\u4ee4\u540d\u79f0 <code>{R0, R1, LR}</code> \u64cd\u4f5c\u6570 \u6307\u4ee4\u8981\u64cd\u4f5c\u7684\u6570\u636e\u6216\u5bc4\u5b58\u5668"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_10","title":"\u5404\u90e8\u5206\u8be6\u7ec6\u8bf4\u660e","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#1_2","title":"1. \u5185\u5b58\u5730\u5740","text":"<ul> <li>\u6307\u4ee4\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u50a8\u4f4d\u7f6e</li> <li>16\u8fdb\u5236\u683c\u5f0f\uff0c\u5982 <code>0x08002F34</code></li> <li>\u4ee3\u7801\u6267\u884c\u65f6\uff0cPC\uff08\u7a0b\u5e8f\u8ba1\u6570\u5668\uff09\u5c31\u6307\u5411\u8fd9\u4e9b\u5730\u5740</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#2_2","title":"2. \u673a\u5668\u7801","text":"<ul> <li>CPU\u771f\u6b63\u7406\u89e3\u548c\u6267\u884c\u7684\u4e8c\u8fdb\u5236\u6307\u4ee4</li> <li>\u4ee516\u8fdb\u5236\u663e\u793a\uff0c\u5982 <code>B503</code></li> <li>ARM\u67b6\u6784\u4e2d\u901a\u5e38\u662f2\u5b57\u8282\u62164\u5b57\u8282</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#3-ascii","title":"3. ASCII\u663e\u793a\u5217","text":"<ul> <li>\u7528\u9014\uff1a\u5c06\u673a\u5668\u7801\u5b57\u8282\u5f53\u4f5cASCII\u5b57\u7b26\u663e\u793a</li> <li>\u89c4\u5219\uff1a\u53ef\u6253\u5370\u5b57\u7b26\u663e\u793a\u539f\u5b57\u7b26\uff0c\u4e0d\u53ef\u6253\u5370\u5b57\u7b26\u663e\u793a\u4e3a <code>.</code></li> </ul> <p>\u5e38\u89c1\u60c5\u51b5\uff1a</p> <pre><code>0x08002F36  4408    .D    ADD     R0, R1, R0    ; 44='D', 08=\u4e0d\u53ef\u6253\u5370\u2192'.'\n0x08002F38  4142    AB    MOV     R2, R1        ; 41='A', 42='B'\u2192\"AB\"\n0x08002F3C  0000    ..    MOVS    R0, R0        ; 00,00\u90fd\u4e0d\u53ef\u6253\u5370\u2192\"..\"\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#4_2","title":"4. \u6307\u4ee4\u548c\u64cd\u4f5c\u6570","text":"<ul> <li>\u6307\u4ee4\uff1a\u4eba\u7c7b\u53ef\u8bfb\u7684\u64cd\u4f5c\u540d\u79f0\uff0c\u5982 <code>ADD</code>, <code>PUSH</code>, <code>LDR</code></li> <li>\u64cd\u4f5c\u6570\uff1a\u6307\u4ee4\u64cd\u4f5c\u7684\u5bf9\u8c61\uff0c\u5982\u5bc4\u5b58\u5668\u3001\u5185\u5b58\u5730\u5740\u3001\u7acb\u5373\u6570</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_11","title":"\u66f4\u591a\u5b8c\u6574\u793a\u4f8b","text":"<pre><code>; \u793a\u4f8b1\uff1a\u51fd\u6570\u5f00\u573a\n0x08002F00  B570    p.    PUSH    {R4-R6,LR}    ; \u4fdd\u5b58\u5bc4\u5b58\u5668\u5230\u6808\n; \u2191\u5730\u5740      \u2191\u673a\u5668\u7801 \u2191ASCII \u2191\u6307\u4ee4    \u2191\u64cd\u4f5c\u6570\n\n; \u793a\u4f8b2\uff1a\u7b97\u672f\u8fd0\u7b97\n0x08002F36  4408    .D    ADD     R0, R1, R0    ; R0 = R1 + R0\n; 44='D', 08=\u4e0d\u53ef\u6253\u5370\u2192\".D\"\n\n; \u793a\u4f8b3\uff1a\u5185\u5b58\u8bbf\u95ee  \n0x08002F38  6801    .h    LDR     R1, [R0, #0]  ; \u4eceR0\u5730\u5740\u52a0\u8f7d\u6570\u636e\u5230R1\n; 68='h', 01=\u4e0d\u53ef\u6253\u5370\u2192\".h\"\n\n; \u793a\u4f8b4\uff1a\u6761\u4ef6\u8df3\u8f6c\n0x08002F3A  D101    ..    BNE     0x08002F40    ; \u5982\u679c\u4e0d\u76f8\u7b49\u5219\u8df3\u8f6c\n; D1,01\u90fd\u4e0d\u53ef\u6253\u5370\u2192\"..\"\n\n; \u793a\u4f8b5\uff1a\u957f\u6307\u4ee4\uff084\u5b57\u8282\uff09\n0x08002F3C  F8DFE004 ....  LDR     LR, [PC, #4]   ; \u957f\u6307\u4ee4\uff0c4\u5b57\u8282\u673a\u5668\u7801\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#ascii","title":"ASCII\u663e\u793a\u5217\u7684\u5b9e\u7528\u4ef7\u503c","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#1_3","title":"1. \u8bc6\u522b\u533a\u57df\u7c7b\u578b","text":"<ul> <li>\u4ee3\u7801\u533a\u57df\uff1a\u591a\u4e3a <code>..</code> \u6216\u89c4\u5f8b\u7684\u6a21\u5f0f</li> <li>\u6570\u636e\u533a\u57df\uff1a\u53ef\u80fd\u51fa\u73b0\u53ef\u8bfb\u5b57\u7b26\u4e32</li> <li>\u6df7\u5408\u533a\u57df\uff1a\u6307\u4ee4\u4e2d\u5076\u7136\u51fa\u73b0\u7684\u53ef\u6253\u5370\u5b57\u7b26</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#2_3","title":"2. \u5b9e\u9645\u5e94\u7528\u793a\u4f8b","text":"<pre><code>; \u4ee3\u7801\u6bb5 - \u591a\u4e3a\"..\"\n0x08002F40  B401    ..    PUSH    {R0}\n0x08002F42  4602    .F    MOV     R2, R0\n0x08002F44  E002    ..    B       0x08002F4C\n\n; \u6570\u636e\u6bb5 - \u53ef\u80fd\u5305\u542b\u6587\u672c\n0x08002F50  6C6C6548  Hell    ; \u5b57\u7b26\u4e32\"Hello\"\u7684\u5f00\u59cb\n0x08002F54  006F6F72  roo.    ; \u53ef\u80fd\u7684\u6570\u636e\u533a\u57df\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_12","title":"\u5982\u4f55\u9605\u8bfb\u53cd\u6c47\u7f16","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#1_4","title":"1. \u5173\u6ce8\u6307\u4ee4\u6d41","text":"<pre><code>0x08002F34  B503      PUSH    {R0,R1,LR}    ; \u4fdd\u5b58\u5bc4\u5b58\u5668\u5230\u6808\n0x08002F36  4408      ADD     R0, R1, R0    ; R0 = R1 + R0  \n0x08002F38  6801      LDR     R1, [R0, #0]  ; \u4ece\u5185\u5b58\u52a0\u8f7d\u6570\u636e\n0x08002F3A  D101      BNE     0x08002F40    ; \u6761\u4ef6\u8df3\u8f6c\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#2_4","title":"2. \u7406\u89e3\u6570\u636e\u6d41\u5411","text":"<ul> <li> <p>\u5bc4\u5b58\u5668\u95f4\uff1a<code>ADD R0, R1, R2</code>\u00a0\u2192 \u6570\u636e\u4eceR1,R2\u6d41\u5411R0</p> </li> <li> <p>\u5185\u5b58\u5230\u5bc4\u5b58\u5668\uff1a<code>LDR R0, [R1]</code>\u00a0\u2192 \u6570\u636e\u4ece\u5185\u5b58\u6d41\u5411\u5bc4\u5b58\u5668</p> </li> <li> <p>\u5bc4\u5b58\u5668\u5230\u5185\u5b58\uff1a<code>STR R0, [R1]</code>\u00a0\u2192 \u6570\u636e\u4ece\u5bc4\u5b58\u5668\u6d41\u5411\u5185\u5b58</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#3_2","title":"3. \u8bc6\u522b\u51fd\u6570\u7ed3\u6784","text":"<pre><code>; \u51fd\u6570\u5f00\u59cb\n0x08002F00  B570      PUSH    {R4-R6,LR}    ; \u4fdd\u5b58\u73b0\u573a\n0x08002F02  4604      MOV     R4, R0        ; \u5904\u7406\u53c2\u6570\n; ... \u51fd\u6570\u4f53 ...\n0x08002F10  BD70      POP     {R4-R6,PC}    ; \u6062\u590d\u73b0\u573a\u5e76\u8fd4\u56de\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#_13","title":"\u5feb\u901f\u8bc6\u522b\u5e38\u89c1\u6a21\u5f0f","text":"\u6a21\u5f0f \u793a\u4f8b \u542b\u4e49 \u51fd\u6570\u5f00\u5934 <code>PUSH {..., LR}</code> \u4fdd\u5b58\u8fd4\u56de\u5730\u5740\uff0c\u5f00\u59cb\u65b0\u51fd\u6570 \u51fd\u6570\u7ed3\u5c3e <code>POP {..., PC}</code> \u6062\u590d\u5bc4\u5b58\u5668\u5e76\u8fd4\u56de \u51fd\u6570\u8c03\u7528 <code>BL 0x0800xxxx</code> \u8c03\u7528\u5b50\u51fd\u6570 \u6761\u4ef6\u5224\u65ad <code>CMP R0, #0</code>\u00a0+\u00a0<code>BEQ/BNE</code> if-else\u903b\u8f91 \u5faa\u73af \u6807\u7b7e + \u6bd4\u8f83 + \u6761\u4ef6\u8df3\u8f6c for/while\u5faa\u73af ## \u5feb\u901f\u9605\u8bfb\u6280\u5de7 <ol> <li>\u91cd\u70b9\u770b\u6307\u4ee4\u5217\uff1a\u7406\u89e3\u7a0b\u5e8f\u903b\u8f91\u7684\u4e3b\u8981\u4f9d\u636e</li> <li>ASCII\u5217\u4e3a\u8f85\u52a9\uff1a\u5e2e\u52a9\u8bc6\u522b\u533a\u57df\u7c7b\u578b\u548c\u6570\u636e\u5185\u5bb9  </li> <li>\u5173\u6ce8\u6570\u636e\u6d41\uff1a\u89c2\u5bdf\u5bc4\u5b58\u5668\u95f4\u7684\u6570\u636e\u4f20\u9012</li> <li>\u8bc6\u522b\u6a21\u5f0f\uff1a\u51fd\u6570\u8c03\u7528\u3001\u5faa\u73af\u3001\u6761\u4ef6\u5224\u65ad\u7684\u56fa\u5b9a\u6a21\u5f0f</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E7%94%B5%E6%8E%A7%E7%AE%97%E6%B3%95/%E7%94%B5%E6%8E%A7%E7%AE%97%E6%B3%95/","title":"\u7b80\u4ecb","text":"<ul> <li>[[PID]]</li> <li>[[LQR]]</li> <li>[[SMC]]</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E8%A7%86%E8%A7%89/%E8%A7%86%E8%A7%89/","title":"\u76ee\u5f55","text":"<ul> <li>[[Micropython &amp; K230]]</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/","title":"I2C","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#i2c","title":"\u4e00\u3001 I2C \u534f\u8bae\u7b80\u4ecb","text":"<p>I2C\uff08Inter-Integrated Circuit\uff09\u662f\u7531\u98de\u5229\u6d66\u516c\u53f8\u5f00\u53d1\u7684\u4e00\u79cd\u7b80\u5355\u7684\u3001\u53cc\u5411\u3001\u4e8c\u7ebf\u5236\u3001\u540c\u6b65\u4e32\u884c\u603b\u7ebf\u3002</p> <ul> <li>\u53cc\u5411\uff1a\u6570\u636e\u53ef\u4ee5\u5728\u4e3b\u8bbe\u5907\u548c\u4ece\u8bbe\u5907\u4e4b\u95f4\u53cc\u5411\u4f20\u8f93\u3002</li> <li>\u4e8c\u7ebf\u5236\uff1a\u4ec5\u9700\u8981\u4e24\u6839\u4fe1\u53f7\u7ebf\u2014\u2014\u4e32\u884c\u6570\u636e\u7ebf\uff08SDA\uff09 \u548c\u4e32\u884c\u65f6\u949f\u7ebf\uff08SCL\uff09\u3002\u8fd9\u6781\u5927\u5730\u51cf\u5c11\u4e86\u82af\u7247\u7ba1\u811a\u6570\u91cf\u548cPCB\u8d70\u7ebf\u3002</li> <li>\u540c\u6b65\uff1a\u901a\u4fe1\u53cc\u65b9\u901a\u8fc7\u7edf\u4e00\u7684\u65f6\u949f\u4fe1\u53f7\uff08SCL\uff09\u6765\u540c\u6b65\u6570\u636e\u4f4d\uff08SDA\uff09\u7684\u4f20\u8f93\u8282\u594f\u3002</li> <li>\u591a\u4e3b\u4ece\uff1a\u603b\u7ebf\u652f\u6301\u591a\u4e2a\u4e3b\u8bbe\u5907\uff08Master\uff09\u548c\u591a\u4e2a\u4ece\u8bbe\u5907\uff08Slave\uff09\uff0c\u901a\u8fc7\u5730\u5740\u5bfb\u5740\u3002</li> <li>\u4f4e\u901f\uff1a\u901a\u5e38\u7528\u4e8e\u677f\u5185IC\u4e4b\u95f4\u7684\u77ed\u8ddd\u79bb\u901a\u4fe1\uff0c\u901f\u5ea6\u4ece\u6807\u51c6\u6a21\u5f0f\uff08100kbps\uff09\u5230\u8d85\u5feb\u901f\u6a21\u5f0f\uff085Mbps\uff09\u4e0d\u7b49\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_1","title":"\u4e8c\u3001 \u786c\u4ef6\u8fde\u63a5","text":"<ul> <li>SDA\uff08Serial Data Line\uff09\uff1a\u4e32\u884c\u6570\u636e\u7ebf\uff0c\u7528\u4e8e\u4f20\u8f93\u6570\u636e\u3002</li> <li>SCL\uff08Serial Clock Line\uff09\uff1a\u4e32\u884c\u65f6\u949f\u7ebf\uff0c\u7528\u4e8e\u4ea7\u751f\u540c\u6b65\u65f6\u949f\u3002</li> </ul> <p>\u6240\u6709\u8bbe\u5907\u90fd\u5e76\u8054\u5728\u603b\u7ebf\u4e0a\uff0c\u5e76\u4e14\u603b\u7ebf\u63a5\u53e3\u662f\u5f00\u6f0f drain\uff08OD:Output Drain) \u6216 \u96c6\u7535\u6781\u5f00\u8def\uff08OC\uff09 \u7ed3\u6784\u3002\u89c4\u5b9a\u5728SDA\u548cSCL\u7ebf\u4e0a\u5404\u63a5\u4e00\u4e2a\u4e0a\u62c9\u7535\u963b\uff08Rp\uff09 \u5230\u7535\u6e90VCC\uff0c\u5728\u91ca\u653e\u603b\u7ebf\u65f6\u4fdd\u6301\u9ad8\u7535\u5e73\u3002</p> <ul> <li>\u4f5c\u7528\uff1a<ol> <li>\u5f53\u6ca1\u6709\u8bbe\u5907\u4e3b\u52a8\u62c9\u4f4e\u7535\u5e73\u65f6\uff0c\u7531\u4e0a\u62c9\u7535\u963b\u5c06\u603b\u7ebf\u7f6e\u4e8e\u9ad8\u7535\u5e73\uff08\u7a7a\u95f2\u72b6\u6001\uff09\u3002</li> <li>\u5141\u8bb8\u4e0d\u540c\u7535\u538b\u7b49\u7ea7\u7684\u5668\u4ef6\u5728\u603b\u7ebf\u4e0a\u5171\u5b58\uff08\u53ea\u8981\u5b83\u4eec\u7684VCC\u4e0d\u540c\uff09\u3002</li> </ol> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_2","title":"\u4e09\u3001 \u6838\u5fc3\u6982\u5ff5","text":"<ol> <li> <p>\u4e3b\u8bbe\u5907\uff08Master\uff09</p> <ul> <li>\u53d1\u8d77\u548c\u7ec8\u6b62\u4f20\u8f93\u7684\u8bbe\u5907\u3002</li> <li>\u4ea7\u751f\u65f6\u949f\u4fe1\u53f7SCL\u3002</li> <li>\u8d1f\u8d23\u5bfb\u5740\u4ece\u8bbe\u5907\u3002</li> </ul> </li> <li> <p>\u4ece\u8bbe\u5907\uff08Slave\uff09</p> <ul> <li>\u88ab\u4e3b\u8bbe\u5907\u5bfb\u5740\u7684\u8bbe\u5907\u3002</li> <li>\u54cd\u5e94\u4e3b\u8bbe\u5907\u7684\u547d\u4ee4\u3002</li> </ul> </li> <li> <p>\u5730\u5740\uff08Address\uff09</p> <ul> <li>\u6bcf\u4e2a\u4ece\u8bbe\u5907\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u76847\u4f4d\u621610\u4f4d\u5730\u5740\uff0c\u7528\u4e8e\u4e3b\u8bbe\u5907\u7684\u5bfb\u5740\u3002</li> <li>7\u4f4d\u5730\u5740\u662f\u6700\u5e38\u89c1\u7684\u683c\u5f0f\uff0c\u7406\u8bba\u4e0a\u53ef\u8fde\u63a5127\u4e2a\u8bbe\u5907\uff08\u5730\u57400x00\u4fdd\u7559\uff0c\u6709\u4e9b\u5730\u5740\u6709\u7279\u6b8a\u7528\u9014\uff09\u3002</li> <li>10\u4f4d\u5730\u5740\u7528\u4e8e\u6269\u5c55\u66f4\u591a\u8bbe\u5907\u3002</li> </ul> </li> <li> <p>\u901f\u5ea6\u6a21\u5f0f</p> <ul> <li>\u6807\u51c6\u6a21\u5f0f\uff08Standard-mode\uff09\uff1a 100 kbit/s</li> <li>\u5feb\u901f\u6a21\u5f0f\uff08Fast-mode\uff09\uff1a 400 kbit/s</li> <li>\u5feb\u901f\u6a21\u5f0f+\uff08Fast-mode Plus\uff09\uff1a 1 Mbit/s</li> <li>\u9ad8\u901f\u6a21\u5f0f\uff08High-speed mode\uff09\uff1a 3.4 Mbit/s</li> <li>\u8d85\u5feb\u901f\u6a21\u5f0f\uff08Ultra Fast-mode\uff09\uff1a 5 Mbit/s</li> </ul> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_3","title":"\u56db\u3001 \u901a\u4fe1\u6d41\u7a0b\u4e0e\u5e27\u683c\u5f0f","text":"<p>\u4e00\u6b21\u5b8c\u6574\u7684I2C\u901a\u4fe1\u5305\u542b\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a</p> <p>\u8d77\u59cb\u6761\u4ef6\uff08START\uff09 -&gt; \u4ece\u673a\u5730\u5740\u5e27\uff08Address Frame\uff09+ \u8bfb\u5199\u4f4d\uff08R/W#\uff09+ \u5e94\u7b54\u4f4d\uff08ACK/NACK\uff09 -&gt; \u6570\u636e\u5e27\uff08Data Frames\uff09+ \u5e94\u7b54\u4f4d\uff08ACK/NACK\uff09 -&gt; \u505c\u6b62\u6761\u4ef6\uff08STOP\uff09</p> <p>![[../\u56fe\u6e90/I2C-Bits-Protocol.jpg]]</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#1-sp","title":"1. \u8d77\u59cb\uff08S\uff09\u548c\u505c\u6b62\uff08P\uff09\u6761\u4ef6","text":"<ul> <li>\u8d77\u59cb\u6761\u4ef6\uff08S\uff09\uff1a \u5f53SCL\u4e3a\u9ad8\u7535\u5e73\u65f6\uff0cSDA\u7ebf\u51fa\u73b0\u4e00\u4e2a\u4e0b\u964d\u6cbf\u3002<ul> <li>\u8868\u793a\u4e00\u6b21\u4f20\u8f93\u7684\u5f00\u59cb\u3002</li> </ul> </li> </ul> <ul> <li>\u505c\u6b62\u6761\u4ef6\uff08P\uff09\uff1a \u5f53SCL\u4e3a\u9ad8\u7535\u5e73\u65f6\uff0cSDA\u7ebf\u51fa\u73b0\u4e00\u4e2a\u4e0a\u5347\u6cbf\u3002<ul> <li>\u8868\u793a\u4e00\u6b21\u4f20\u8f93\u7684\u7ed3\u675f\u3002</li> </ul> </li> </ul> <p>\u6ce8\u610f\uff1a\u5728SCL\u4e3a\u9ad8\u671f\u95f4\uff0cSDA\u7684\u7a33\u5b9a\u53d8\u5316\u88ab\u7528\u4e8e\u8868\u793a\u8d77\u59cb\u548c\u505c\u6b62\u6761\u4ef6\uff0c\u5728\u6570\u636e\u4f20\u8f93\u671f\u95f4\uff0cSDA\u7684\u53d8\u5316\u5fc5\u987b\u53d1\u751f\u5728SCL\u4e3a\u4f4e\u65f6\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_4","title":"*\u57fa\u672c\u5355\u5143","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#2","title":"2.\u5730\u5740\u5e27 + \u8bfb\u5199\u4f4d","text":"<p>\u8d77\u59cb\u6761\u4ef6\u540e\uff0c\u4e3b\u8bbe\u5907\u53d1\u9001\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u662f\u5730\u5740\u5e27\u3002</p> <ul> <li>7\u4f4d\u5730\u5740\u683c\u5f0f\uff1a<ul> <li>\u8fd9\u4e2a\u5b57\u8282\u7531 7\u4f4d\u4ece\u673a\u5730\u5740 \u548c 1\u4f4d\u8bfb\u5199\u63a7\u5236\u4f4d\uff08R/W#\uff09 \u7ec4\u6210\u3002</li> <li>\u4f4d\u5e8f\uff1a MSB\uff08\u6700\u9ad8\u6709\u6548\u4f4d\uff09\u5148\u884c\u3002</li> <li>R/W#\u4f4d\uff1a<ul> <li>0\uff1a \u8868\u793a\u4e3b\u8bbe\u5907\u5199\uff08Write\uff09 \u6570\u636e\u5230\u4ece\u8bbe\u5907\u3002</li> <li>1\uff1a \u8868\u793a\u4e3b\u8bbe\u5907\u8bfb\uff08Read\uff09 \u4ece\u8bbe\u5907\u7684\u6570\u636e\u3002</li> </ul> </li> </ul> </li> </ul> BIT 7 BIT 6 BIT 5 BIT 4 BIT 3 BIT 2 BIT 1 BIT 0 \u63cf\u8ff0 A6 A5 A4 A3 A2 A1 A0 R/W# 7\u4f4d\u5730\u5740 + \u8bfb\u5199\u4f4d"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#3-acknack","title":"3. \u5e94\u7b54\uff08ACK\uff09\u4e0e\u975e\u5e94\u7b54\uff08NACK\uff09\u4f4d","text":"<p>\u6bcf\u4e2a\u5b57\u8282\uff08\u5305\u62ec\u5730\u5740\u5e27\u548c\u6240\u6709\u6570\u636e\u5e27\uff09\u4f20\u8f93\u5b8c\u6bd5\u540e\uff0c\u540e\u9762\u90fd\u7d27\u8ddf\u7740\u4e00\u4e2a\u5e94\u7b54\u4f4d\u3002</p> <ul> <li>\u65f6\u949f\uff1a \u5e94\u7b54\u4f4d\u7531\u63a5\u6536\u65b9\u5728\u7b2c9\u4e2a\u65f6\u949f\u8109\u51b2\u671f\u95f4\u63a7\u5236SDA\u7ebf\u3002</li> <li>\u5e94\u7b54\uff08ACK\uff09\uff1a<ul> <li>\u63a5\u6536\u65b9\u5c06SDA\u7ebf\u62c9\u4f4e\u3002</li> <li>\u8868\u793a\u63a5\u6536\u65b9\u5df2\u6210\u529f\u63a5\u6536\u5230\u8be5\u5b57\u8282\uff0c\u5e76\u51c6\u5907\u597d\u63a5\u6536\u4e0b\u4e00\u4e2a\u5b57\u8282\u3002</li> </ul> </li> <li>\u975e\u5e94\u7b54\uff08NACK\uff09\uff1a<ul> <li>\u63a5\u6536\u65b9\u4fdd\u6301SDA\u7ebf\u4e3a\u9ad8\u3002</li> <li>\u8868\u793a\uff1a<ol> <li>\u63a5\u6536\u65b9\u672a\u6210\u529f\u63a5\u6536\u6570\u636e\uff08\u5982CRC\u9519\u8bef\uff09\u3002</li> <li>\u63a5\u6536\u65b9\u65e0\u6cd5\u63a5\u6536\u66f4\u591a\u6570\u636e\u3002</li> <li>\u4e3b\u8bbe\u5907\u5728\u8bfb\u64cd\u4f5c\u65f6\uff0c\u53d1\u9001NACK\u6765\u544a\u77e5\u4ece\u8bbe\u5907\u8fd9\u662f\u6700\u540e\u4e00\u4e2a\u8981\u8bfb\u53d6\u7684\u5b57\u8282\uff0c\u968f\u540e\u4e3b\u8bbe\u5907\u5e94\u4ea7\u751f\u505c\u6b62\u6761\u4ef6\u3002</li> </ol> </li> </ul> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#4","title":"4. \u6570\u636e\u5e27","text":"<p>\u5730\u5740\u5e27\u88ab\u5e94\u7b54\u540e\uff0c\u5f00\u59cb\u4f20\u8f93\u6570\u636e\u5e27\u3002</p> <ul> <li>\u6bcf\u4e2a\u6570\u636e\u5e27\u4e3a8\u4f4d\uff081\u4e2a\u5b57\u8282\uff09\u3002</li> <li>\u540c\u6837\u662fMSB\u5148\u884c\u3002</li> <li>\u6bcf\u4e2a\u6570\u636e\u5e27\u540e\u90fd\u7d27\u8ddf\u7740\u4e00\u4e2a\u5e94\u7b54\u4f4d\uff08ACK/NACK\uff09\uff0c\u7531\u6570\u636e\u63a5\u6536\u65b9\u53d1\u51fa\u3002<ul> <li>\u5199\u64cd\u4f5c\uff1a \u4ece\u8bbe\u5907\u662f\u63a5\u6536\u65b9\uff0c\u6545\u4ece\u8bbe\u5907\u53d1ACK\u3002</li> <li>\u8bfb\u64cd\u4f5c\uff1a \u4e3b\u8bbe\u5907\u662f\u63a5\u6536\u65b9\uff0c\u6545\u4e3b\u8bbe\u5907\u53d1ACK\u3002</li> </ul> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_5","title":"\u4e94\u3001 \u5b8c\u6574\u7684\u901a\u4fe1\u5e8f\u5217","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_6","title":"\u4e3b\u8bbe\u5907\u5411\u4ece\u8bbe\u5907\u5199\u5165\u5b57\u8282","text":"<ol> <li>\u4e3b\u8bbe\u5907\u4ea7\u751f\u8d77\u59cb\u6761\u4ef6\uff08S\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u53d1\u90017\u4f4d\u4ece\u673a\u5730\u5740 + \u5199\u4f4d\uff080\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u8fd4\u56de\u5e94\u7b54\u4f4d ACK\uff080\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u53d1\u90018\u4f4d\u6570\u636e\uff08\u901a\u5e38\u662f\u5bc4\u5b58\u5668\u5730\u5740\u6216\u8005\u547d\u4ee4\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u8fd4\u56de\u5e94\u7b54\u4f4d ACK\uff080\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u53d1\u90018\u4f4d\u6570\u636e\uff08\u6307\u9488\u81ea\u52a8\u540e\u79fb\u4e00\u4e2a\u5b57\u8282\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u8fd4\u56de\u5e94\u7b54\u4f4d ACK\uff080\uff09\u3002</li> <li>...(\u91cd\u590d5~6\uff0c\u76f4\u5230\u6570\u636e\u53d1\u9001\u5b8c\u6bd5)</li> <li>\u4e3b\u8bbe\u5907\u4ea7\u751f\u505c\u6b62\u6761\u4ef6\uff08P\uff09\u3002</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_7","title":"\u5355\u5b57\u8282\u5b9e\u4f8b","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_8","title":"I2C","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_9","title":"\u4e3b\u8bbe\u5907\u4ece\u4ece\u8bbe\u5907\u8bfb\u53d6\u5b57\u8282","text":"<ol> <li>\u4e3b\u8bbe\u5907\u4ea7\u751f\u8d77\u59cb\u6761\u4ef6\uff08S\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u53d1\u90017\u4f4d\u4ece\u673a\u5730\u5740 + \u8bfb\u4f4d\uff081\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u8fd4\u56de\u5e94\u7b54\u4f4d ACK\uff080\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u53d1\u90018\u4f4d\u6570\u636e\uff08\u6570\u636e\u57fa\u4e8e\u4e0a\u6b21\u901a\u4fe1\u65f6\u7684\u5185\u5b58\u5730\u5740\u6307\u9488\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u8fd4\u56de\u5e94\u7b54\u4f4d ACK\uff080\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u53d1\u90018\u4f4d\u6570\u636e\uff08\u6307\u9488\u81ea\u52a8\u540e\u79fb\u4e00\u4e2a\u5b57\u8282\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u8fd4\u56de\u5e94\u7b54\u4f4d ACK\uff080\uff09\u3002</li> <li>...(\u91cd\u590d6~7)</li> <li>\u4ece\u8bbe\u5907\u53d1\u90018\u4f4d\u6570\u636e</li> <li>\u4e3b\u8bbe\u5907\u8fd4\u56de\u975e\u5e94\u7b54\u4f4d NACK\uff081\uff09\uff08\u7ed3\u675f\u8bfb\u53d6\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u4ea7\u751f\u505c\u6b62\u6761\u4ef6\uff08P\uff09\u3002</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_10","title":"\u590d\u5408\u683c\u5f0f\uff08\u6700\u5e38\u7528\uff09","text":"<p>\u4e3b\u8bbe\u5907\u5148\u5199\u5165\u4ece\u8bbe\u5907\u7684\u5185\u90e8\u5bc4\u5b58\u5668\u5730\u5740\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8\u5e76\u8bfb\u53d6\u6570\u636e\u3002\u8fd9\u5728\u64cd\u4f5c\u4f20\u611f\u5668\u3001EEPROM\u7b49\u8bbe\u5907\u65f6\u975e\u5e38\u5e38\u89c1\u3002</p> <ol> <li>\u4e3b\u8bbe\u5907\u4ea7\u751f\u8d77\u59cb\u6761\u4ef6\uff08S\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u53d1\u90017\u4f4d\u4ece\u673a\u5730\u5740 + \u5199\u4f4d\uff080\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u8fd4\u56deACK\u3002</li> <li>\u4e3b\u8bbe\u5907\u53d1\u9001\u8981\u5199\u5165\u7684\u5bc4\u5b58\u5668\u5730\u5740\uff08\u4f8b\u5982 0x00\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u8fd4\u56deACK\u3002</li> <li>\u4e3b\u8bbe\u5907\u4ea7\u751f\u91cd\u590d\u8d77\u59cb\u6761\u4ef6\uff08Sr\uff09\uff08\u529f\u80fd\u548c\u8d77\u59cb\u6761\u4ef6S\u4e00\u6837\uff0c\u4f46\u4e0d\u4f1a\u5148\u4ea7\u751f\u505c\u6b62\u6761\u4ef6\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u53d1\u90017\u4f4d\u4ece\u673a\u5730\u5740 + \u8bfb\u4f4d\uff081\uff09\u3002</li> <li>\u4ece\u8bbe\u5907\u8fd4\u56deACK\u3002</li> <li>\u4ece\u8bbe\u5907\u53d1\u9001\u5bc4\u5b58\u56680x00\u4e2d\u7684\u6570\u636e\u3002</li> <li>\u4e3b\u8bbe\u5907\u8fd4\u56deNACK\uff08\u8868\u793a\u8bfb\u53d6\u7ed3\u675f\uff0c\u4e5f\u53ef\u5411\u4e0a\u9762\u4f8b\u5b50\u4e00\u6837\uff0c\u8fd4\u56de0\uff0c\u76f4\u5230\u8bfb\u5b8c\u6240\u6709\u6570\u636e\u518d\u8fd4\u56de1\uff09\u3002</li> <li>\u4e3b\u8bbe\u5907\u4ea7\u751f\u505c\u6b62\u6761\u4ef6\uff08P\uff09\u3002 ![[../\u56fe\u6e90/I2C\u6307\u5b9a\u5730\u5740\u8bfb.png]]</li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#clock-stretching","title":"\u516d\u3001 \u65f6\u949f\u62c9\u4f38\uff08Clock Stretching\uff09","text":"<ul> <li>\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u4ece\u8bbe\u5907\u5982\u679c\u6765\u4e0d\u53ca\u5904\u7406\uff08\u4f8b\u5982\u6b63\u5728\u5904\u7406\u4e2d\u65ad\uff09\uff0c\u5b83\u53ef\u4ee5\u5728SCL\u7ebf\u4e0a\u6267\u884c\u65f6\u949f\u62c9\u4f38\u3002</li> <li>\u5177\u4f53\u505a\u6cd5\u662f\uff1a\u4ece\u8bbe\u5907\u5728\u63a5\u6536\u5230\u4e00\u4e2a\u4f4d\u540e\uff0c\u4e3b\u52a8\u62c9\u4f4eSCL\u7ebf\uff0c\u5f3a\u5236\u5c06\u65f6\u949f\u4fdd\u6301\u4e3a\u4f4e\u7535\u5e73\u3002\u8fd9\u4f1a\u6682\u505c\u6574\u4e2a\u901a\u4fe1\uff0c\u76f4\u5230\u4ece\u8bbe\u5907\u51c6\u5907\u597d\u5e76\u91ca\u653eSCL\u7ebf\uff0c\u65f6\u949f\u624d\u6062\u590d\u4e3a\u9ad8\u3002</li> <li>\u8fd9\u662f\u4e00\u79cd\u4ece\u8bbe\u5907\u63a7\u5236\u901a\u4fe1\u8282\u594f\u7684\u6d41\u63a7\u673a\u5236\u3002</li> </ul> <p>\u6ce2\u5f62\u793a\u610f\u56fe\uff1a</p> <pre><code>SDA   ___/X_X_X_X_..._X_X_________________...\nSCL   ~~~|_|_|_|_|...|_|\\\\\\\\\\\\\\\\\\\\________... (\u4ece\u673a\u62c9\u4f4eSCL)\n        |             | |        |\n     \u6b63\u5e38\u65f6\u949f        \u4ece\u673a\u5f00\u59cb   \u4ece\u673a\u91ca\u653eSCL\uff0c\n                      \u62c9\u4f38\u65f6\u949f   \u901a\u4fe1\u7ee7\u7eed\n</code></pre>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/I2C/#_11","title":"\u4e03\u3001 \u603b\u7ed3\u4e0e\u8981\u70b9","text":"\u9879\u76ee \u63cf\u8ff0 \u4fe1\u53f7\u7ebf SDA\uff08\u6570\u636e\uff09\uff0c SCL\uff08\u65f6\u949f\uff09 \u62d3\u6251 \u6240\u6709\u8bbe\u5907\u5e76\u8054\uff0c\u9700\u4e0a\u62c9\u7535\u963b \u5bfb\u5740 7\u4f4d\u621610\u4f4d\u5730\u5740\uff0c\u652f\u6301\u591a\u4e3b\u4ece \u8d77\u59cb\u6761\u4ef6 SCL\u9ad8\u65f6\uff0cSDA\u4e0b\u964d\u6cbf \u505c\u6b62\u6761\u4ef6 SCL\u9ad8\u65f6\uff0cSDA\u4e0a\u5347\u6cbf \u6570\u636e\u6709\u6548\u6027 SCL\u9ad8\u671f\u95f4\uff0cSDA\u5fc5\u987b\u4fdd\u6301\u7a33\u5b9a \u6570\u636e\u53d8\u5316 SCL\u4f4e\u671f\u95f4\uff0cSDA\u53ef\u4ee5\u53d8\u5316 \u5b57\u8282\u683c\u5f0f 8\u4f4d\u6570\u636e\uff0cMSB\u5148\u884c\uff0c\u540e\u8ddf1\u4f4dACK/NACK ACK \u63a5\u6536\u65b9\u62c9\u4f4eSDA\uff0c\u8868\u793a\u6210\u529f NACK \u63a5\u6536\u65b9\u4e0d\u62c9\u4f4eSDA\uff0c\u8868\u793a\u5931\u8d25\u6216\u7ed3\u675f"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/","title":"\u4e00\u3001 SPI \u534f\u8bae\u7b80\u4ecb","text":"<p>SPI\uff08Serial Peripheral Interface\uff09\u662f\u7531\u6469\u6258\u7f57\u62c9\u516c\u53f8\u5f00\u53d1\u7684\u4e00\u79cd\u5168\u53cc\u5de5\u3001\u540c\u6b65\u3001\u56db\u7ebf\u5236\u7684\u4e32\u884c\u901a\u4fe1\u603b\u7ebf\u3002\u5b83\u4ee5\u5176\u7b80\u5355\u6027\u548c\u9ad8\u901f\u5ea6\u800c\u95fb\u540d\u3002</p> <ul> <li> <p>\u5168\u53cc\u5de5\uff1a\u6570\u636e\u53ef\u4ee5\u540c\u65f6\u5728\u4e3b\u8bbe\u5907\u548c\u4ece\u8bbe\u5907\u4e4b\u95f4\u53cc\u5411\u4f20\u8f93\u3002</p> </li> <li> <p>\u540c\u6b65\uff1a\u901a\u4fe1\u53cc\u65b9\u901a\u8fc7\u7edf\u4e00\u7684\u65f6\u949f\u4fe1\u53f7\uff08SCLK\uff09\u6765\u540c\u6b65\u6570\u636e\u4f4d\uff08MOSI, MISO\uff09\u7684\u4f20\u8f93\u8282\u594f\u3002</p> </li> <li> <p>\u56db\u7ebf\u5236\uff1a\u901a\u5e38\u9700\u8981\u56db\u6839\u4fe1\u53f7\u7ebf\uff08\u6709\u65f6\u53ef\u7cbe\u7b80\u4e3a\u4e09\u7ebf\uff09\u3002</p> </li> <li> <p>\u9ad8\u901f\uff1a\u76f8\u6bd4 I2C\uff0cSPI \u53ef\u4ee5\u8fbe\u5230\u5f88\u9ad8\u7684\u901f\u5ea6\uff08\u51e0\u5341 Mbps \u751a\u81f3\u4e0a\u767e Mbps\uff09\uff0c\u6ca1\u6709\u6807\u51c6\u4e0a\u9650\u3002\uff08\u63a8\u633d\u8f93\u51fa\u80fd\u529b\u5f3a\uff09</p> </li> <li> <p>\u65e0\u5bfb\u5740\uff1a\u901a\u8fc7\u786c\u4ef6\u7247\u9009\uff08CS\uff09\u7ebf\u9009\u62e9\u4ece\u8bbe\u5907\uff0c\u4e0d\u652f\u6301\u8f6f\u4ef6\u5bfb\u5740\u3002</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#_1","title":"\u4e8c\u3001 \u786c\u4ef6\u8fde\u63a5\u4e0e\u4fe1\u53f7\u7ebf","text":"<p> SPI \u901a\u4fe1\u81f3\u5c11\u9700\u8981\u56db\u6839\u7ebf\uff1a</p> \u4fe1\u53f7\u7ebf\u540d\u79f0 \u5168\u79f0 \u65b9\u5411 \u63cf\u8ff0 SCLK / SCK Serial Clock \u4e3b \u2192 \u4ece \u4e3b\u8bbe\u5907\u4ea7\u751f\u7684\u540c\u6b65\u65f6\u949f\u4fe1\u53f7\u3002 MOSI / SDO Master Out Slave In \u4e3b \u2192 \u4ece \u6570\u636e\u4ece\u4e3b\u8bbe\u5907\u8f93\u51fa\uff0c\u8f93\u5165\u5230\u4ece\u8bbe\u5907\u3002 MISO / SDI Master In Slave Out \u4ece \u2192 \u4e3b \u6570\u636e\u4ece\u4ece\u8bbe\u5907\u8f93\u51fa\uff0c\u8f93\u5165\u5230\u4e3b\u8bbe\u5907\u3002 CS / SS Chip Select / Slave Select \u4e3b \u2192 \u4ece \u4e3b\u8bbe\u5907\u7528\u4e8e\u9009\u62e9\u76ee\u6807\u4ece\u8bbe\u5907\u7684\u4fe1\u53f7\uff08\u4f4e\u7535\u5e73\u6709\u6548\uff09\u3002 <p>[!NOTE]</p> <p>\u8f93\u51fa\u5f15\u811a\u914d\u7f6e\u4e3a\u63a8\u633d\u8f93\u51fa\uff0c\u8f93\u5165\u5f15\u811a\u914d\u7f6e\u4e3a\u6d6e\u7a7a\u6216\u4e0a\u62c9\u8f93\u5165\u3002</p> <p>\u5f53\u4ece\u673a\u672a\u88ab\u9009\u4e2d\u65f6\uff0c\u5176\u8f93\u51fa\u5f15\u811aMISO\u5fc5\u987b\u4e3a\u9ad8\u963b\u6001\uff08\u65ad\u5f00\uff09</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#_2","title":"\u4e09\u3001 \u6838\u5fc3\u6982\u5ff5","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#_3","title":"\u79fb\u4f4d\u793a\u610f","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#1-cpolcpha","title":"1. \u65f6\u949f\u6781\u6027\uff08CPOL\uff09\u4e0e\u65f6\u949f\u76f8\u4f4d\uff08CPHA\uff09","text":"<p>\u8fd9\u662f SPI \u6700\u6838\u5fc3\u4e5f\u6700\u5bb9\u6613\u6df7\u6dc6\u7684\u6982\u5ff5\uff0c\u5b83\u4eec\u5171\u540c\u5b9a\u4e49\u4e86\u65f6\u949f\u7684\u7a33\u5b9a\u7535\u5e73\u548c\u6570\u636e\u91c7\u6837\u7684\u8fb9\u6cbf\u3002\u6709\u56db\u79cd\u53ef\u80fd\u7684\u6a21\u5f0f\u3002</p> <ul> <li> <p>\u65f6\u949f\u6781\u6027 CPOL\uff1a</p> <ul> <li> <p>CPOL = 0\uff1a \u65f6\u949f\u7a7a\u95f2\u72b6\u6001\uff08\u5f53 CS \u6709\u6548\u4f46\u65e0\u6570\u636e\u4f20\u8f93\u65f6\uff09\u4e3a\u4f4e\u7535\u5e73\u3002</p> </li> <li> <p>CPOL = 1\uff1a \u65f6\u949f\u7a7a\u95f2\u72b6\u6001\u4e3a\u9ad8\u7535\u5e73\u3002</p> </li> </ul> </li> <li> <p>\u65f6\u949f\u76f8\u4f4d CPHA\uff1a</p> <ul> <li> <p>CPHA = 0\uff1a \u6570\u636e\u5728\u65f6\u949f\u7684\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\uff08\u5373 SCK \u4ece\u7a7a\u95f2\u72b6\u6001\u53d8\u5316\u7684\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\uff09\u88ab\u91c7\u6837\u3002</p> </li> <li> <p>CPHA = 1\uff1a \u6570\u636e\u5728\u65f6\u949f\u7684\u7b2c\u4e8c\u4e2a\u8fb9\u6cbf\uff08\u5373 SCK \u4ece\u7a7a\u95f2\u72b6\u6001\u53d8\u5316\u7684\u7b2c\u4e8c\u4e2a\u8fb9\u6cbf\uff09\u88ab\u91c7\u6837\u3002</p> </li> </ul> </li> </ul> <p>\u56db\u79cd SPI \u6a21\u5f0f\u603b\u7ed3\uff1a</p> \u6a21\u5f0f CPOL CPHA \u65f6\u949f\u7a7a\u95f2\u72b6\u6001 \u6570\u636e\u91c7\u6837\u65f6\u523b \u6570\u636e\u79fb\u4f4d/\u53d8\u5316\u65f6\u523b Mode 0 0 0 Low \u7b2c\u4e00\u4e2a\u65f6\u949f\u8fb9\u6cbf\uff08\u4e0a\u5347\u6cbf\uff09 \u5728\u4e0b\u964d\u6cbf\uff08\u7b2c\u4e8c\u4e2a\u8fb9\u6cbf\uff09 Mode 1 0 1 Low \u7b2c\u4e8c\u4e2a\u65f6\u949f\u8fb9\u6cbf\uff08\u4e0b\u964d\u6cbf\uff09 \u5728\u4e0a\u5347\u6cbf\uff08\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\uff09 Mode 2 1 0 High \u7b2c\u4e00\u4e2a\u65f6\u949f\u8fb9\u6cbf\uff08\u4e0b\u964d\u6cbf\uff09 \u5728\u4e0a\u5347\u6cbf\uff08\u7b2c\u4e8c\u4e2a\u8fb9\u6cbf\uff09 Mode 3 1 1 High \u7b2c\u4e8c\u4e2a\u65f6\u949f\u8fb9\u6cbf\uff08\u4e0a\u5347\u6cbf\uff09 \u5728\u4e0b\u964d\u6cbf\uff08\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\uff09 <p>\u5173\u952e\u8bb0\u5fc6\u70b9\uff1aMode 0\u00a0\u548c\u00a0Mode 3\u00a0\u662f\u6700\u5e38\u7528\u7684\u4e24\u79cd\u6a21\u5f0f\u3002\u4e3b\u8bbe\u5907\u548c\u4ece\u8bbe\u5907\u7684 CPOL \u4e0e CPHA \u8bbe\u7f6e\u5fc5\u987b\u5b8c\u5168\u4e00\u81f4\uff0c\u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u901a\u4fe1\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#2-bit-order","title":"2. \u6570\u636e\u987a\u5e8f\uff08Bit Order\uff09","text":"<ul> <li>\u53ef\u4ee5\u914d\u7f6e\u4e3a\u00a0MSB First\uff08\u6700\u9ad8\u4f4d\u5148\u884c\uff09\u6216\u00a0LSB First\uff08\u6700\u4f4e\u4f4d\u5148\u884c\uff09\u3002MSB First \u662f\u9ed8\u8ba4\u548c\u6700\u5e38\u89c1\u7684\u65b9\u5f0f\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#3-frame-size","title":"3. \u6570\u636e\u5e27\u5927\u5c0f\uff08Frame Size\uff09","text":"<ul> <li>\u901a\u5e38\u4e3a\u00a08\u4f4d\uff081\u4e2a\u5b57\u8282\uff09\uff0c\u4f46\u8bb8\u591a\u73b0\u4ee3\u63a7\u5236\u5668\u652f\u6301\u4efb\u610f\u957f\u5ea6\u7684\u6570\u636e\u5e27\uff08\u5982 4\u4f4d\uff0c 12\u4f4d\uff0c 16\u4f4d\u7b49\uff09\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#_4","title":"\u56db\u3001 \u901a\u4fe1\u6d41\u7a0b\u4e0e\u5e27\u683c\u5f0f","text":"<p>SPI \u7684\u901a\u4fe1\u6d41\u7a0b\u975e\u5e38\u7b80\u5355\uff0c\u7531\u4e3b\u8bbe\u5907\u5b8c\u5168\u63a7\u5236\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#_5","title":"\u57fa\u672c\u901a\u4fe1\u6d41\u7a0b","text":"<ol> <li>\u521d\u59cb\u5316\uff1a\u4e3b\u8bbe\u5907\u914d\u7f6e\u65f6\u949f\u6781\u6027\uff08CPOL\uff09\u548c\u76f8\u4f4d\uff08CPHA\uff09\u3002</li> <li>\u7247\u9009(\u5f00\u59cb)\uff1a\u4e3b\u8bbe\u5907\u5c06\u76ee\u6807\u4ece\u8bbe\u5907\u7684\u00a0CS \u7ebf\u62c9\u4f4e\uff08\u6709\u6548\uff09\uff0c\u6fc0\u6d3b\u8be5\u4ece\u8bbe\u5907\u3002</li> </ol> <ol> <li> <p>\u6570\u636e\u4f20\u8f93\uff1a\u4e3b\u8bbe\u5907\u5728 SCLK \u7ebf\u4e0a\u4ea7\u751f\u65f6\u949f\u8109\u51b2\uff0c\u540c\u65f6\uff1a</p> <ul> <li> <p>\u901a\u8fc7\u00a0MOSI\u00a0\u7ebf\u5c06\u6570\u636e\u4e00\u4f4d\u4e00\u4f4d\u5730\u53d1\u9001\u7ed9\u4ece\u8bbe\u5907\u3002</p> </li> <li> <p>\u901a\u8fc7\u00a0MISO\u00a0\u7ebf\u4ece\u4ece\u8bbe\u5907\u4e00\u4f4d\u4e00\u4f4d\u5730\u63a5\u6536\u6570\u636e\u3002</p> </li> <li> <p>\u8fd9\u662f\u4e00\u4e2a\u540c\u65f6\u8fdb\u884c\uff08\u5168\u53cc\u5de5\uff09\u00a0\u7684\u8fc7\u7a0b\u3002</p> </li> <li>\u4f20\u8f93\u7ed3\u675f\uff1a\u4e3b\u8bbe\u5907\u5c06\u00a0CS \u7ebf\u62c9\u9ad8\uff08\u65e0\u6548\uff09\uff0c\u7ed3\u675f\u901a\u4fe1\u3002</li> </ul> </li> </ol>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#8","title":"\u5e27\u683c\u5f0f\u6ce2\u5f62\u56fe\uff08\u4ee5 8 \u4f4d\u6570\u636e\u4f20\u8f93\u4e3a\u4f8b\uff09","text":"<p>\u7531\u4e8e SPI \u6709\u56db\u79cd\u6a21\u5f0f\uff0c\u5176\u6ce2\u5f62\u4e5f\u4e0d\u540c\u3002\u4e0b\u56fe\u6e05\u6670\u5730\u5c55\u793a\u4e86\u56db\u79cd\u6a21\u5f0f\u4e0b\u7684\u6570\u636e\u4f20\u8f93\u65f6\u5e8f\u3002</p> <p>\u901a\u7528\u65f6\u5e8f\u6982\u5ff5\uff1a</p> <ul> <li>\u6570\u636e\u91c7\u6837\u65f6\u523b\uff1a\u63a5\u6536\u7aef\u8bfb\u53d6\u6570\u636e\u4f4d\u7684\u65f6\u673a\u3002</li> <li>\u6570\u636e\u53d8\u5316\u65f6\u523b\uff1a\u53d1\u9001\u7aef\u6539\u53d8\u6570\u636e\u4f4d\u7684\u65f6\u673a\u3002</li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#0","title":"\u6a21\u5f0f0","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#1","title":"\u6a21\u5f0f1","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#2","title":"\u6a21\u5f0f2","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#3","title":"\u6a21\u5f0f3","text":"<p>[!NOTE]</p> <p>\u53cc\u7ebf\u4ea4\u53c9\u8868\u793a\u4f20\u8f93\u4e00\u4e2aBit\u3002</p> <p>MISO\u4e3a\u7f6e\u4e8e\u4e2d\u95f4\u7684\u4e00\u6761\u7ebf\uff0c\u8868\u793a\u9ad8\u963b\u6001\uff0c\u5373\u65ad\u5f00\u3002\u4ece\u6b64\u72b6\u6001\u53d8\u4e3a\u62c9\u5f00\u7684\u72b6\u6001\uff0c\u8868\u793a\u4ece\u673a\u88ab\u9009\u4e2d\uff0c\u5141\u8bb8\u5f00\u59cb\u901a\u4fe1\u3002</p> <p>\u6240\u6709\u6570\u636e\u4f20\u5b8c\u540e\uff0cMOSI\u53d8\u6362\u7535\u5e73\u662f\u4e3a\u4e86\u56de\u5230\u9ed8\u8ba4\u7535\u5e73\uff0c\u5982\u679c\u6ca1\u6709\u9ed8\u8ba4\u7535\u5e73\u4e5f\u53ef\u4ee5\u4e0d\u53d8\u6362\u3002</p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#_6","title":"\u591a\u5b57\u8282\u8fde\u7eed\u4f20\u8f93","text":"<p>SPI \u53ef\u4ee5\u975e\u5e38\u5bb9\u6613\u5730\u8fdb\u884c\u591a\u5b57\u8282\u8fde\u7eed\u4f20\u8f93\u3002\u4e3b\u8bbe\u5907\u53ea\u9700\u5728 CS \u6709\u6548\u671f\u95f4\uff0c\u6301\u7eed\u4ea7\u751f SCLK \u65f6\u949f\u5468\u671f\u5373\u53ef\u3002\u6bcf\u4e2a SCLK \u5468\u671f\u4f20\u8f93\u4e00\u4f4d\u6570\u636e\u3002</p> <p></p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#spi_1","title":"\u4e94\u3001 SPI \u4f18\u7f3a\u70b9\u603b\u7ed3","text":"\u4f18\u70b9 \u7f3a\u70b9 \u5168\u53cc\u5de5\u901a\u4fe1\uff0c\u6548\u7387\u9ad8 \u9700\u89814\u6839\u7ebf\uff0c\u6bd4 I2C \u5360\u7528\u66f4\u591a GPIO \u534f\u8bae\u975e\u5e38\u7b80\u5355\uff0c\u786c\u4ef6\u5b9e\u73b0\u5bb9\u6613 \u65e0\u786c\u4ef6\u5e94\u7b54\u673a\u5236\uff0c\u65e0\u6cd5\u786e\u8ba4\u6570\u636e\u662f\u5426\u88ab\u6210\u529f\u63a5\u6536 \u901a\u4fe1\u901f\u5ea6\u975e\u5e38\u9ad8\uff0c\u6ca1\u6709\u6807\u51c6\u4e0a\u9650 \u65e0\u6807\u51c6\u7684\u5bfb\u5740\u673a\u5236\uff0c\u9700\u8981\u5927\u91cf\u72ec\u7acb\u7684 CS \u7ebf\u8fde\u63a5\u591a\u4ece\u673a \u901a\u4fe1\u8fc7\u7a0b\u7531\u4e3b\u8bbe\u5907\u5b8c\u5168\u63a7\u5236\uff0c\u65e0\u9700\u590d\u6742\u7684\u4ef2\u88c1\u548c\u540c\u6b65 \u6ca1\u6709\u5b98\u65b9\u7684\u6807\u51c6\u534f\u8bae\uff0c\u4e0d\u540c\u5382\u5546\u8bbe\u5907\u53ef\u80fd\u6709\u4e0d\u540c\u8981\u6c42 \u6570\u636e\u4f20\u8f93\u7ed3\u6784\u7075\u6d3b\uff0c\u6ca1\u6709\u56fa\u5b9a\u7684\u6570\u636e\u5e27\u683c\u5f0f"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/SPI/#spi-i2c","title":"\u516d\u3001 SPI \u4e0e I2C \u7684\u5feb\u901f\u5bf9\u6bd4","text":"\u7279\u6027 SPI I2C \u7ebf\u6570 4 \u7ebf\uff08CS, SCLK, MOSI, MISO\uff09 2 \u7ebf\uff08SDA, SCL\uff09 \u901f\u5ea6 \u9ad8\uff08\u901a\u5e38 &gt;10 Mbps\uff09 \u4e2d\u4f4e\u901f\uff08\u6807\u51c6\u6a21\u5f0f 100kbps\uff0c\u5feb\u901f\u6a21\u5f0f 400kbps\uff09 \u901a\u4fe1\u65b9\u5f0f \u5168\u53cc\u5de5 \u534a\u53cc\u5de5 \u62d3\u6251 \u70b9\u5bf9\u70b9\u3001\u72ec\u7acbCS\u3001\u83ca\u82b1\u94fe \u591a\u4e3b\u4ece\u3001\u603b\u7ebf\u578b\u3001\u8f6f\u4ef6\u5bfb\u5740 \u534f\u8bae\u590d\u6742\u5ea6 \u7b80\u5355 \u76f8\u5bf9\u590d\u6742\uff08\u6709\u8d77\u59cb\u3001\u505c\u6b62\u3001\u5e94\u7b54\u4f4d\uff09 \u6d41\u63a7/\u5e94\u7b54 \u65e0 \u6709\uff08ACK/NACK \u4f4d\uff09 \u786c\u4ef6\u5f00\u9500 \u4e3b\u8bbe\u5907 CS \u7ebf\u968f\u4ece\u8bbe\u5907\u6570\u91cf\u589e\u52a0 \u786c\u4ef6\u8d44\u6e90\u56fa\u5b9a"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/USART/","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u901a\u7528\u540c\u6b65\u5f02\u6b65\u6536\u53d1\u4f20\u8f93\u5668\uff08USART\uff09\u662f\u4e00\u79cd\u5168\u53cc\u5de5\u4e32\u884c\u901a\u4fe1\u63a5\u53e3\uff0c\u8bbe\u5907\u901a\u8fc7\u5b9a\u4e49\u660e\u786e\u7684\u5e27\u7ed3\u6784\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff0c\u652f\u6301\u540c\u6b65\u548c\u5f02\u6b65\u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\u3002 \u5bf9\u6bd4</p> \u540d\u79f0 \u5f15\u811a \u53cc\u5de5 \u65f6\u949f \u7535\u5e73 \u8bbe\u5907 USART TX\u3001RX \u5168\u53cc\u5de5 \u5f02\u6b65 \u5355\u7aef \u70b9\u5bf9\u70b9 I2C SCL\u3001SDA \u534a\u53cc\u5de5 \u540c\u6b65 \u5355\u7aef \u591a\u8bbe\u5907 SPI SCLK\u3001MOSI\u3001MISO\u3001CS \u5168\u53cc\u5de5 \u540c\u6b65 \u5355\u7aef \u591a\u8bbe\u5907 CAN CAN_H\u3001CAN_L \u534a\u53cc\u5de5 \u5f02\u6b65 \u5dee\u5206 \u591a\u8bbe\u5907 USB DP\u3001DM \u534a\u53cc\u5de5 \u5f02\u6b65 \u5dee\u5206 \u70b9\u5bf9\u70b9 # \u786c\u4ef6\u8fde\u63a5\u65b9\u5f0f <p></p>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/USART/#_2","title":"\u4fe1\u53f7\u7535\u5e73\u6807\u51c6","text":"\u7535\u5e73\u6807\u51c6 \u903b\u8f910 \u903b\u8f911 \u5e94\u7528\u573a\u666f TTL 0V 3.3V/5V \u677f\u5185\u901a\u4fe1 RS232 +3V to +15V -3V to -15V \u957f\u8ddd\u79bb\u901a\u4fe1 RS485 -1.5V to -6V +1.5V to +6V \u5de5\u4e1a\u73b0\u573a"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/USART/#_3","title":"\u5173\u952e\u53c2\u6570","text":"<ul> <li> <p>\u6ce2\u7279\u7387\uff1a\u4e32\u53e3\u901a\u4fe1\u7684\u901f\u7387</p> </li> <li> <p>\u8d77\u59cb\u4f4d\uff1a\u6807\u5fd7\u4e00\u4e2a\u6570\u636e\u5e27\u7684\u5f00\u59cb\uff0c\u56fa\u5b9a\u4e3a\u4f4e\u7535\u5e73</p> </li> <li> <p>\u6570\u636e\u4f4d\uff1a\u6570\u636e\u5e27\u7684\u6709\u6548\u8f7d\u8377\uff0c1\u4e3a\u9ad8\u7535\u5e73\uff0c0\u4e3a\u4f4e\u7535\u5e73\uff0c\u4f4e\u4f4d\u5148\u884c</p> </li> <li> <p>\u6821\u9a8c\u4f4d\uff1a\u7528\u4e8e\u6570\u636e\u9a8c\u8bc1\uff0c\u6839\u636e\u6570\u636e\u4f4d\u8ba1\u7b97\u5f97\u6765(\u53ef\u8bbe\u7f6e)</p> </li> <li> <p>\u505c\u6b62\u4f4d\uff1a\u7528\u4e8e\u6570\u636e\u5e27\u95f4\u9694\uff0c\u56fa\u5b9a\u4e3a\u9ad8\u7535\u5e73\uff08\u4e00\u822c\u4e3a1\u4f4d\uff09</p> </li> </ul>"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/USART/#_4","title":"\u5e27\u7ed3\u6784\u7ec4\u6210","text":"<p>\u5178\u578b\u6570\u636e\u5e27\u683c\u5f0f\uff1a</p> <p></p> <p></p> <p>\u5e27\u7ed3\u6784\u53c2\u6570\u914d\u7f6e\u8868\uff1a</p> \u7ec4\u6210\u90e8\u5206 \u4f4d\u6570 \u529f\u80fd\u8bf4\u660e \u8d77\u59cb\u4f4d 1\u4f4d \u6807\u5fd7\u4f20\u8f93\u5f00\u59cb\uff0c\u5c06\u7ebf\u8def\u4ece\u7a7a\u95f2\u9ad8\u7535\u5e73\u62c9\u4f4e \u6570\u636e\u4f4d 5-9\u4f4d \u6709\u6548\u6570\u636e\u8f7d\u8377\uff0c\u901a\u5e38\u4e3a8\u4f4d \u6821\u9a8c\u4f4d 0/1\u4f4d \u5947\u5076\u6821\u9a8c\uff0c\u7528\u4e8e\u9519\u8bef\u68c0\u6d4b \u505c\u6b62\u4f4d 1/1.5/2\u4f4d \u6807\u5fd7\u5e27\u7ed3\u675f\uff0c\u8fd4\u56de\u9ad8\u7535\u5e73\u72b6\u6001"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/USART/#_5","title":"\u901a\u4fe1\u6a21\u5f0f\u5bf9\u6bd4","text":"\u6a21\u5f0f \u6570\u636e\u6d41\u5411 \u786c\u4ef6\u9700\u6c42 \u5e94\u7528\u573a\u666f \u5168\u53cc\u5de5 \u540c\u65f6\u53cc\u5411\u4f20\u8f93 TX\u3001RX\u72ec\u7acb \u5b9e\u65f6\u6570\u636e\u4ea4\u4e92 \u534a\u53cc\u5de5 \u53cc\u5411\u4ea4\u66ff\u4f20\u8f93 \u5355\u6570\u636e\u7ebf \u591a\u8bbe\u5907\u5171\u4eab\u603b\u7ebf \u5355\u5de5 \u5355\u5411\u4f20\u8f93 \u5355\u5411\u7ebf\u8def \u4f20\u611f\u5668\u6570\u636e\u8bfb\u53d6"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/USART/#_6","title":"\u6ce2\u7279\u7387","text":"<p>\u6ce2\u7279\u7387\u4e0e\u7cbe\u5ea6\u5173\u7cfb\uff1a</p> <pre><code>\u5b9e\u9645\u6ce2\u7279\u7387\u8bef\u5dee(%) = |(\u5b9e\u9645\u503c - \u7406\u8bba\u503c)| / \u7406\u8bba\u503c \u00d7 100%\n\u8981\u6c42\uff1a\u8bef\u5dee &lt; 2.5% (\u901a\u5e38\u6807\u51c6)\n</code></pre> <p>\u5e38\u7528\u6ce2\u7279\u7387\u914d\u7f6e\u8868\uff1a</p> \u6ce2\u7279\u7387 \u65f6\u949f\u6e90\u8981\u6c42 \u9002\u7528\u573a\u666f 9600 \u4f4e\u9891\u65f6\u949f \u957f\u8ddd\u79bb\u901a\u4fe1 115200 \u6807\u51c6\u65f6\u949f \u5e38\u7528\u901f\u7387 460800 \u9ad8\u9891\u65f6\u949f \u9ad8\u901f\u4f20\u8f93 1M\u4ee5\u4e0a \u4e13\u7528\u65f6\u949f \u7279\u6b8a\u5e94\u7528"},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/USART/#_7","title":"\u65f6\u5e8f\u4f8b\u5b50","text":""},{"location":"%E7%94%B5%E8%B5%9B%E8%BD%AF%E4%BB%B6/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/","title":"\u76ee\u5f55","text":"<ul> <li>[[I2C]]</li> <li>[[USART]]</li> <li>[[CAN]]</li> <li>[[SPI]]</li> </ul>"}]}